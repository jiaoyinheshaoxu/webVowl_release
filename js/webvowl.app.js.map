{"version":3,"sources":["webpack:///webpack/bootstrap bed9e0e93e0a0472910f?ab4f","webpack:///./src/app/js/entry.js","webpack:///external \"d3\"?c0c4","webpack:///./~/lodash/_baseGetTag.js?0d07","webpack:///./~/lodash/_Symbol.js?dfe5","webpack:///./~/lodash/_root.js?c0bd","webpack:///./~/lodash/_freeGlobal.js?e849","webpack:///./~/lodash/_getRawTag.js?9b8e","webpack:///./~/lodash/_objectToString.js?e901","webpack:///./~/lodash/isSymbol.js?7ab9","webpack:///./~/lodash/isObjectLike.js?36be","webpack:///./~/lodash/isArray.js?0d20","webpack:///./~/lodash/_arrayMap.js?3223","webpack:///./~/lodash/toString.js?a8fe","webpack:///./~/lodash/_baseToString.js?9b51","webpack:///./src/app/css/toolstyle.css","webpack:///./src/app/js/browserWarning.js","webpack:///./src/app/js/app.js","webpack:///./src/app/js/menu/exportMenu.js","webpack:///./src/app/js/menu/filterMenu.js","webpack:///./src/app/js/menu/gravityMenu.js","webpack:///./src/app/js/menu/modeMenu.js","webpack:///./src/app/js/menu/ontologyMenu.js","webpack:///./~/lodash/unescape.js","webpack:///./~/lodash/_unescapeHtmlChar.js","webpack:///./~/lodash/_basePropertyOf.js","webpack:///./src/app/js/menu/pauseMenu.js","webpack:///./src/app/js/menu/resetMenu.js","webpack:///./src/app/js/menu/searchMenu.js","webpack:///./src/app/js/menu/navigationMenu.js","webpack:///./src/app/js/menu/zoomSlider.js","webpack:///./src/app/js/sidebar.js","webpack:///./src/app/js/menu/configMenu.js","webpack:///./src/app/js/loadingModule.js"],"names":[],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA;AACA;;AAEA;;;;;;;;ACHA,qB;;;;;;;ACAA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC3BA;;AAEA;AACA;;AAEA;;;;;;;;ACLA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;;;;;ACRA;AACA;;AAEA;;;;;;;;;ACHA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;;;;;;;ACrBA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,SAAS;AACpB,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC3BA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,EAAE;AACb,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACpCA,0C;;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,GAAG,SAAS,GAAG;AAC9C;AACA;AACA;AACA,GAAE;AACF;AACA,wCAAuC,GAAG,SAAS,GAAG;AACtD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,gC;;;;;;;;AC9DA;;AAEA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+LAA8L,gCAAgC;AAC9N,4HAA2H,0BAA0B;;AAErJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,4CAA2C;AAC3C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qDAAoD;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,GAAG,SAAS,GAAG;AACxD;AACA;AACA;AACA,UAAS;AACT;AACA,kDAAiD,GAAG,SAAS,GAAG;AAChE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;ACpUA;AACA;AACA;AACA;AACA;;AAEA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uCAAsC;AACtC;AACA;AACA;AACA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG,KAAK;;AAER;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,sBAAqB,gBAAgB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAW;AACX,iCAAgC;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,cAAa,gBAAgB;AAC7B;AACA;;AAEA;AACA;AACA,KAAI;AACJ,2CAA0C;AAC1C;AACA;;AAEA;AACA;;AAEA;AACA,kCAAiC,2DAA2D,GAAG,iCAAiC;AAChI,qCAAoC,gCAAgC;AACpE,iDAAgD,4BAA4B;AAC5E,6DAA4D,4BAA4B;AACxF,yCAAwC,iCAAiC;AACzE,6CAA4C,sCAAsC;AAClF,uPAAsP,4BAA4B;AAClR,gEAA+D,4BAA4B;AAC3F,+CAA8C,4BAA4B;AAC1E,sDAAqD,4BAA4B;AACjF,6DAA4D,4BAA4B;AACxF,yDAAwD,4BAA4B;AACpF,0CAAyC,4BAA4B;AACrE,wCAAuC,4BAA4B;AACnE,0DAAyD,8BAA8B;AACvF,mFAAkF,4BAA4B;AAC9G,wJAAuJ,4BAA4B,GAAG,iCAAiC;AACvN,mDAAkD,8BAA8B;AAChF,mEAAkE,4BAA4B;AAC9F,yCAAwC,8BAA8B;AACtE,yDAAwD,4BAA4B;AACpF,+CAA8C,iCAAiC;AAC/E,sCAAqC,iCAAiC;AACtE,gDAA+C,qCAAqC;AACpF,oCAAmC,qCAAqC;AACxE,yDAAwD,mCAAmC;AAC3F,sCAAqC,8BAA8B;AACnE,wCAAuC,uCAAuC;AAC9E;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA,0BAAyB,cAAc;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;;AAEA,yBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAQ;;AAER;AACA,gDAA+C;AAC/C,iDAAgD;AAChD,gDAA+C;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,2BAA2B;AACxC;AACA;AACA;AACA;AACA;AACA,cAAa,0BAA0B;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,2BAA2B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,kBAAiB,yBAAyB;AAC1C;AACA,eAAc,0BAA0B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,iCAAgC;AAChC;AACA;AACA;;AAEA;AACA;;;;;;;;;ACzcA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAmD;AACnD,iDAAgD;;AAEhD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAqB,yDAAyD;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,UAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;ACzWA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAqB;AACrB;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,mCAAmC;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;AACH;;;AAGA;AACA;;;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB;AACxB,6BAA4B;;AAE5B,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qCAAoC;AACpC;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,+CAA+C;;AAE1D;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB,uBAAuB;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;;;ACtNA;;AAEA;;AAEA,uBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA,gBAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,6CAA4C;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;AC5hBA;AACA;;AAEA;AACA,8CAA6C;AAC7C;;AAEA;AACA,8BAA6B;AAC7B,UAAS,QAAQ,QAAQ,UAAU,aAAa;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACjCA;;AAEA;AACA;AACA,SAAQ;AACR,QAAO;AACP,QAAO;AACP,UAAS;AACT,SAAQ;AACR;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;;AAEA;;;;;;;;ACpBA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,YAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;;;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;;;AAGA;AACA;;;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,uCAAsC;;;AAGtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,gBAAgB;AACjC;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa,4BAA4B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,cAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA,cAAa,8BAA8B;AAC3C;AACA;AACA;AACA,mBAAkB,gCAAgC;AAClD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,yGAAwG,EAAE,4CAA4C,EAAE,eAAe,EAAE,gHAAgH,EAAE;AAC3R;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,cAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,gBAAgB;AAC7B;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA,mBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,gBAAgB;AAC9B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,gBAAgB;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA,mBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,gBAAgB;AACjC;AACA;AACA;;AAEA;AACA;;;;;;;;;ACldA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAoB,gBAAgB;AACpC;AACA;;AAEA;AACA;AACA,qBAAoB,gBAAgB;AACpC;AACA;;AAEA;AACA,qBAAoB,gBAAgB;AACpC;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA,8BAA6B,QAAQ;AACrC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD;AACzD,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8DAA6D;AAC7D;;AAEA;AACA;AACA;AACA;AACA,UAAS,KAAK;;AAEd;AACA;AACA,UAAS,KAAK,qCAAqC;;AAEnD;;AAEA;AACA;AACA;AACA;AACA,gEAA+D,+BAA+B,EAAE;AAChG,gEAA+D,+BAA+B,EAAE;AAChG;;AAEA;AACA;;;;;;;;;AClPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;;AAElC;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;AChHA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA4C;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAuE,mBAAmB,kBAAkB;AAC5G,yCAAwC,6BAA6B,oBAAoB,WAAW,QAAQ,SAAS,uBAAuB,oBAAoB;AAChK;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA,uCAAsC,oBAAoB,gCAAgC,0BAA0B;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG,O;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,mBAAmB,uCAAuC;AAC9F;AACA,oDAAmD,wCAAwC,oBAAoB,WAAW,QAAQ,SAAS,uBAAuB,oBAAoB,mBAAmB;;AAEzM;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,wB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,oBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,6DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA;AACA;AACA,4DAA2D,8BAA8B,gFAAgF,cAAc,cAAc,aAAa,mBAAmB,qBAAqB;AAC1P,6DAA4D,8BAA8B,8EAA8E,cAAc,cAAc,aAAa,mBAAmB,qBAAqB;AACzP,8DAA6D,8BAA8B,8EAA8E,cAAc,cAAc,aAAa,mBAAmB,qBAAqB;AAC1P,2DAA0D,8BAA8B,8EAA8E,cAAc,cAAc,aAAa,mBAAmB,qBAAqB;;AAEvP;AACA;AACA;;AAEA,oCAAmC;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAwC;;AAExC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;;;;;;;;;;AC9xBA;AACA,wBAAuB;AACvB;;;AAGA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;;;;;;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wCAAuC;AACvC;;AAEA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,+EAA8E;AAC9E,oFAAmF;AACnF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA,8EAA6E;AAC7E;AACA,0EAAyE;AACzE;AACA,wEAAuE;AACvE;AACA,uEAAsE;AACtE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAwC;AACxC;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAwC;AACxC;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC;;AAEA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,4FAA2F;AAC3F;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;;AAEA;AACA,oDAAmD;;AAEnD;AACA;AACA;AACA,UAAS,KAAK;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC;AACtC;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+EAA8E;AAC9E,mFAAkF;AAClF;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,cAAc;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0DAAyD;AACzD;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4DAA2D;AAC3D;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,yCAAwC;AACxC,qDAAoD;AACpD,gEAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA","file":"js/webvowl.app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bed9e0e93e0a0472910f","require(\"../css/toolstyle.css\");\r\nrequire(\"./browserWarning\");\r\n\r\nmodule.exports = require(\"./app\");\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/entry.js\n// module id = 0\n// module chunks = 1","module.exports = d3;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 6\n// module chunks = 0 1","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_baseGetTag.js\n// module id = 87\n// module chunks = 0 1","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_Symbol.js\n// module id = 88\n// module chunks = 0 1","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_root.js\n// module id = 89\n// module chunks = 0 1","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_freeGlobal.js\n// module id = 90\n// module chunks = 0 1","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_getRawTag.js\n// module id = 91\n// module chunks = 0 1","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_objectToString.js\n// module id = 92\n// module chunks = 0 1","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/isSymbol.js\n// module id = 99\n// module chunks = 0 1","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/isObjectLike.js\n// module id = 100\n// module chunks = 0 1","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/isArray.js\n// module id = 108\n// module chunks = 0 1","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_arrayMap.js\n// module id = 150\n// module chunks = 0 1","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/toString.js\n// module id = 215\n// module chunks = 0 1","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_baseToString.js\n// module id = 216\n// module chunks = 0 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/css/toolstyle.css\n// module id = 315\n// module chunks = 1","/* Taken from here: http://stackoverflow.com/a/17907562 */\r\nfunction getInternetExplorerVersion() {\r\n\tvar ua,\r\n\t\tre,\r\n\t\trv = -1;\r\n\r\n\t// check for edge\r\n\tvar isEdge=/(?:\\b(MS)?IE\\s+|\\bTrident\\/7\\.0;.*\\s+rv:|\\bEdge\\/)(\\d+)/.test(navigator.userAgent);\r\n\tif (isEdge){\r\n\t\trv  = parseInt(\"12\");\r\n\t\treturn rv;\r\n\t}\r\n\r\n\tvar isIE11 = /Trident.*rv[ :]*11\\./.test(navigator.userAgent);\r\n\tif (isIE11){\r\n\t\trv  = parseInt(\"11\");\r\n\t\treturn rv;\r\n\t}\r\n\tif (navigator.appName === \"Microsoft Internet Explorer\") {\r\n\t\tua = navigator.userAgent;\r\n\t\tre = new RegExp(\"MSIE ([0-9]{1,}[\\\\.0-9]{0,})\");\r\n\t\tif (re.exec(ua) !== null) {\r\n\t\t\trv = parseFloat(RegExp.$1);\r\n\t\t}\r\n\t} else if (navigator.appName === \"Netscape\") {\r\n\t\tua = navigator.userAgent;\r\n\t\tre = new RegExp(\"Trident/.*rv:([0-9]{1,}[\\\\.0-9]{0,})\");\r\n\t\tif (re.exec(ua) !== null) {\r\n\t\t\trv = parseFloat(RegExp.$1);\r\n\t\t}\r\n\t}\r\n\treturn rv;\r\n}\r\n\r\nfunction showBrowserWarningIfRequired() {\r\n\tvar version = getInternetExplorerVersion();\r\n\tconsole.log(\"Browser Version =\"+version);\r\n    if (version > 0 && version <= 11) {\r\n        d3.select(\"#browserCheck\").classed(\"hidden\", false);\r\n        d3.select(\"#killWarning\" ).classed(\"hidden\", true);\r\n        d3.select(\"#optionsArea\" ).classed(\"hidden\", true);\r\n        d3.select(\"#logo\").classed(\"hidden\", true);\r\n    }\r\n\tif (version == 12 ) {\r\n        d3.select(\"#logo\").classed(\"hidden\", false);\r\n        d3.select(\"#browserCheck\").classed(\"hidden\",false);\r\n        // connect the button;\r\n\t\tvar pb_kill=d3.select(\"#killWarning\");\r\n\t\tpb_kill.on(\"click\",function(){\r\n\t\t\tconsole.log(\"hide the warning please\");\r\n            d3.select(\"#browserCheck\").classed(\"hidden\",true);\r\n            d3.select(\"#logo\").style(\"padding\", \"10px\");\r\n\t\t});\r\n\t}\r\n\telse{\r\n        d3.select(\"#logo\").classed(\"hidden\", false);\r\n        d3.select(\"#browserCheck\").classed(\"hidden\",true);\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = showBrowserWarningIfRequired;\r\nshowBrowserWarningIfRequired();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/browserWarning.js\n// module id = 317\n// module chunks = 1","module.exports = function () {\r\n\r\n\tvar app = {},\r\n\t\tgraph = webvowl.graph(),\r\n\t\toptions = graph.graphOptions(),\r\n\t\tlanguageTools = webvowl.util.languageTools(),\r\n\t\tGRAPH_SELECTOR = \"#graph\",\r\n\t// Modules for the webvowl app\r\n\t\texportMenu     = require(\"./menu/exportMenu\")     (graph),\r\n\t\tfilterMenu     = require(\"./menu/filterMenu\")     (graph),\r\n\t\tgravityMenu    = require(\"./menu/gravityMenu\")    (graph),\r\n\t\tmodeMenu       = require(\"./menu/modeMenu\")       (graph),\r\n\t\tontologyMenu   = require(\"./menu/ontologyMenu\")   (graph),\r\n\t\tpauseMenu      = require(\"./menu/pauseMenu\")      (graph),\r\n\t\tresetMenu      = require(\"./menu/resetMenu\")      (graph),\r\n\t\tsearchMenu     = require(\"./menu/searchMenu\")     (graph),\r\n\t\tnavigationMenu = require(\"./menu/navigationMenu\") (graph),\r\n        zoomSlider     = require(\"./menu/zoomSlider\")     (graph),\r\n\t\tsidebar        = require(\"./sidebar\")             (graph),\r\n        configMenu     = require(\"./menu/configMenu\")     (graph),\r\n\t\tloadingModule  = require(\"./loadingModule\")       (graph),\r\n\r\n\r\n\t// Graph modules\r\n\t\tcolorExternalsSwitch \t = webvowl.modules.colorExternalsSwitch(graph),\r\n\t\tcompactNotationSwitch \t = webvowl.modules.compactNotationSwitch(graph),\r\n\t\tdatatypeFilter \t\t\t = webvowl.modules.datatypeFilter(),\r\n\t\tdisjointFilter \t\t\t = webvowl.modules.disjointFilter(),\r\n\t\tfocuser \t\t\t\t = webvowl.modules.focuser(),\r\n\t\temptyLiteralFilter\t\t = webvowl.modules.emptyLiteralFilter(),\r\n\t\tnodeDegreeFilter \t\t = webvowl.modules.nodeDegreeFilter(filterMenu),\r\n\t\tnodeScalingSwitch \t\t = webvowl.modules.nodeScalingSwitch(graph),\r\n\t\tobjectPropertyFilter \t = webvowl.modules.objectPropertyFilter(),\r\n\t\tlevelFilter\t\t\t\t = webvowl.modules.levelFilter(filterMenu),\r\n\t\tpickAndPin \t\t\t\t = webvowl.modules.pickAndPin(),\r\n\t\tselectionDetailDisplayer = webvowl.modules.selectionDetailsDisplayer(sidebar.updateSelectionInformation),\r\n\t\tstatistics \t\t\t\t = webvowl.modules.statistics(),\r\n\t\tsubclassFilter \t\t\t = webvowl.modules.subclassFilter(),\r\n\t\tsetOperatorFilter \t\t = webvowl.modules.setOperatorFilter();\r\n\r\n\tapp.initialize = function () {\r\n        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function(f){return setTimeout(f, 1000/60);}; // simulate calling code 60\r\n        window.cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame || function(requestID){clearTimeout(requestID);}; //fall back\r\n\r\n        options.graphContainerSelector(GRAPH_SELECTOR);\r\n\t\toptions.selectionModules().push(focuser);\r\n\t\toptions.selectionModules().push(selectionDetailDisplayer );\r\n\t\toptions.selectionModules().push(pickAndPin);\r\n\r\n\t\toptions.filterModules().push(emptyLiteralFilter);\r\n\t\toptions.filterModules().push(statistics);\r\n\t\toptions.filterModules().push(datatypeFilter);\r\n\t\toptions.filterModules().push(objectPropertyFilter);\r\n\t\toptions.filterModules().push(subclassFilter);\r\n\t\toptions.filterModules().push(disjointFilter);\r\n\t\toptions.filterModules().push(setOperatorFilter);\r\n\t\toptions.filterModules().push(nodeScalingSwitch);\r\n\t\toptions.filterModules().push(nodeDegreeFilter);\r\n\t\toptions.filterModules().push(levelFilter);\r\n\t\toptions.filterModules().push(compactNotationSwitch);\r\n\t\toptions.filterModules().push(colorExternalsSwitch);\r\n\r\n\r\n\t\td3.select(window).on(\"resize\", adjustSize);\r\n\r\n\t\texportMenu.setup();\r\n\t\tgravityMenu.setup();\r\n\t\tfilterMenu.setup(datatypeFilter, objectPropertyFilter, subclassFilter, disjointFilter, setOperatorFilter, nodeDegreeFilter,levelFilter);\r\n\t\tmodeMenu.setup(pickAndPin, nodeScalingSwitch, compactNotationSwitch, colorExternalsSwitch);\r\n\t\tpauseMenu.setup();\r\n\t\tsidebar.setup();\r\n\t\tloadingModule.setup();\r\n\r\n        var agentVersion=getInternetExplorerVersion();\r\n       \tif (agentVersion> 0 && agentVersion<= 11) {\r\n            console.log(\"Agent version \"+agentVersion);\r\n        \tconsole.log(\"This agent is not supported\");\r\n\t\t\td3.select(\"#browserCheck\").classed(\"hidden\", false);\r\n\t\t\td3.select(\"#killWarning\" ).classed(\"hidden\", true);\r\n\t\t\td3.select(\"#optionsArea\" ).classed(\"hidden\", true);\r\n\t\t\td3.select(\"#logo\").classed(\"hidden\", true);\r\n        } else {\r\n\t\t\td3.select(\"#logo\").classed(\"hidden\", false);\r\n\t\t\tif (agentVersion===12) {\r\n\t\t\t\t// allow Mircosoft Edge Browser but with warning\r\n                d3.select(\"#browserCheck\").classed(\"hidden\", false);\r\n                d3.select(\"#killWarning\").classed(\"hidden\", false);\r\n            } else {\r\n                d3.select(\"#browserCheck\").classed(\"hidden\", true);\r\n\t\t\t}\r\n\r\n            resetMenu.setup([gravityMenu, filterMenu, modeMenu, focuser, selectionDetailDisplayer, pauseMenu]);\r\n\t\t\tsearchMenu.setup();\r\n\t\t\tnavigationMenu.setup();\r\n\t\t\tzoomSlider.setup();\r\n\r\n\t\t\t// give the options the pointer to the some menus for import and export\r\n\t\t\toptions.literalFilter(emptyLiteralFilter);\r\n\t\t\toptions.loadingModule(loadingModule);\r\n\t\t\toptions.filterMenu(filterMenu);\r\n\t\t\toptions.modeMenu(modeMenu);\r\n\t\t\toptions.gravityMenu(gravityMenu);\r\n\t\t\toptions.pausedMenu(pauseMenu);\r\n\t\t\toptions.pickAndPinModule(pickAndPin);\r\n\t\t\toptions.resetMenu(resetMenu);\r\n\t\t\toptions.searchMenu(searchMenu);\r\n\t\t\toptions.ontologyMenu(ontologyMenu);\r\n\t\t\toptions.navigationMenu(navigationMenu);\r\n\t\t\toptions.sidebar(sidebar);\r\n\t\t\toptions.exportMenu(exportMenu);\r\n\t\t\toptions.graphObject(graph);\r\n\t\t\toptions.zoomSlider(zoomSlider);\r\n            ontologyMenu.setup(loadOntologyFromText);\r\n            configMenu.setup();\r\n\t\t\tgraph.start();\r\n\t\t\tadjustSize();\r\n\r\n\t\t\tvar defZoom;\r\n\t\t\tvar w = graph.options().width();\r\n\t\t\tvar h = graph.options().height();\r\n\t\t\tdefZoom = Math.min(w, h) / 1000;\r\n\t\t\tgraph.setDefaultZoom(defZoom);\r\n\r\n\t\t\t// prevent backspace reloading event\r\n            var htmlBody=d3.select(\"body\");\r\n            d3.select(document).on(\"keydown\", function (e) {\r\n                if (d3.event.keyCode === 8 && d3.event.target===htmlBody.node() ) {\r\n                \t// we could add here an alert\r\n                    d3.event.preventDefault();\r\n                }\r\n            });\r\n\t\t\tloadingModule.parseUrlAndLoadOntology(); // loads automatically the ontology provided by the parameters\r\n        }\r\n\t};\r\n\r\n\tfunction loadOntologyFromText(jsonText, filename, alternativeFilename) {\r\n\t\tpauseMenu.reset();\r\n\t\tgraph.options().navigationMenu().hideAllMenus();\r\n\r\n\t\tif ((jsonText===undefined && filename===undefined) || (jsonText.length===0)){\r\n            loadingModule.notValidJsonFile();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar data;\r\n\t\tif (jsonText) {\r\n\t\t\t// validate JSON FILE\r\n\t\t\tvar validJSON;\r\n\t\t\ttry {\r\n\t\t\t\tdata =JSON.parse(jsonText);\r\n\t\t\t\tvalidJSON=true;\r\n\t\t\t} catch (e){\r\n\t\t\t\tvalidJSON=false;\r\n\t\t\t}\r\n\t\t\tif (validJSON===false){\r\n\t\t\t\t// the server output is not a valid json file\r\n                loadingModule.notValidJsonFile();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!filename) {\r\n\t\t\t\t// First look if an ontology title exists, otherwise take the alternative filename\r\n\t\t\t\tvar ontologyNames = data.header ? data.header.title : undefined;\r\n\t\t\t\tvar ontologyName = languageTools.textInLanguage(ontologyNames);\r\n\r\n\t\t\t\tif (ontologyName) {\r\n\t\t\t\t\tfilename = ontologyName;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilename = alternativeFilename;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// check if we have graph data\r\n        var classCount =0;\r\n\t\tif (data.class!==undefined){\r\n\t\t\tclassCount=data.class.length;\r\n\t\t}\r\n\r\n\t\tif (classCount === 0 ){\r\n\t\t\t// generate message for the user;\r\n\t\t\tloadingModule.emptyGraphContentError();\r\n\t\t}else {\r\n            loadingModule.validJsonFile();\r\n            ontologyMenu.setCachedOntology(filename, jsonText);\r\n            exportMenu.setJsonText(jsonText);\r\n            options.data(data);\r\n            graph.options().loadingModule().setPercentMode();\r\n            graph.load();\r\n            sidebar.updateOntologyInformation(data, statistics);\r\n            exportMenu.setFilename(filename);\r\n            graph.updateZoomSliderValueFromOutside();\r\n            adjustSize();\r\n        }\r\n\t}\r\n\r\n\tfunction adjustSize() {\r\n\t\tvar graphContainer = d3.select(GRAPH_SELECTOR),\r\n\t\t\tsvg = graphContainer.select(\"svg\"),\r\n\t\t\theight = window.innerHeight - 40,\r\n\t\t\twidth = window.innerWidth - (window.innerWidth * 0.22);\r\n\r\n\t\tif (sidebar.getSidebarVisibility()===\"0\"){\r\n            height = window.innerHeight - 40 ;\r\n            width = window.innerWidth;\r\n        }\r\n\r\n        graph.adjustingGraphSize(true);\r\n\t\tgraphContainer.style(\"height\", height + \"px\");\r\n\t\tsvg.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height);\r\n\r\n\t\toptions.width ( width  )\r\n\t\t\t   .height( height );\r\n\r\n\t\tgraph.updateStyle();\r\n        adjustSliderSize();\r\n\r\n        d3.select(\"#loadingInfo-container\").style(\"height\",0.5*(height-80)+\"px\");\r\n        loadingModule.checkForScreenSize();\r\n\r\n\t\t// update also the padding options of loading and the logo positions;\r\n\t\tvar warningDiv=d3.select(\"#browserCheck\");\r\n\t\tif (warningDiv.classed(\"hidden\")===false ) {\r\n            var offset=10+warningDiv.node().getBoundingClientRect().height;\r\n            d3.select(\"#logo\").style(\"padding\", offset+\"px 10px\");\r\n        }else {\r\n\t\t\t// remove the dynamic padding from the logo element;\r\n            d3.select(\"#logo\").style(\"padding\", \"10px\");\r\n        }\r\n\r\n        // scrollbar tests;\r\n\t\tvar element =d3.select(\"#menuElementContainer\").node();\r\n        var maxScrollLeft = element.scrollWidth - element.clientWidth;\r\n        var leftButton=d3.select(\"#scrollLeftButton\");\r\n        var rightButton=d3.select(\"#scrollRightButton\");\r\n        if (maxScrollLeft>0){\r\n        \t// show both and then check how far is bar;\r\n         \trightButton.classed(\"hidden\",false);\r\n            leftButton.classed(\"hidden\",false);\r\n            navigationMenu.updateScrollButtonVisibility();\r\n         }else{\r\n        \t// hide both;\r\n            rightButton.classed(\"hidden\",true);\r\n            leftButton.classed(\"hidden\",true);\r\n\t\t}\r\n\r\n\t}\r\n\r\n    function adjustSliderSize(){\r\n\t\t// TODO: refactor and put this into the slider it self\r\n        var height = window.innerHeight - 40;\r\n        var fullHeight=height;\r\n        var zoomOutPos=height-30;\r\n        var sliderHeight=150;\r\n        if (fullHeight<150) {\r\n            // hide the slider button;\r\n            d3.select(\"#zoomSliderParagraph\").classed(\"hidden\", true);\r\n            d3.select(\"#zoomOutButton\").classed(\"hidden\", true);\r\n            d3.select(\"#zoomInButton\").classed(\"hidden\", true);\r\n            d3.select(\"#centerGraphButton\").classed(\"hidden\", true);\r\n            return;\r\n        }\r\n        d3.select(\"#zoomSliderParagraph\").classed(\"hidden\",false);\r\n        d3.select(\"#zoomOutButton\").classed(\"hidden\",false);\r\n        d3.select(\"#zoomInButton\").classed(\"hidden\",false);\r\n        d3.select(\"#centerGraphButton\").classed(\"hidden\",false);\r\n\r\n        var zoomInPos=zoomOutPos-20;\r\n        var centerPos=zoomInPos-20;\r\n        if (fullHeight<280){\r\n            // hide the slider button;\r\n            d3.select(\"#zoomSliderParagraph\").classed(\"hidden\",true);\r\n            d3.select(\"#zoomOutButton\").style(\"top\",zoomOutPos+\"px\");\r\n            d3.select(\"#zoomInButton\").style(\"top\",zoomInPos+\"px\");\r\n            d3.select(\"#centerGraphButton\").style(\"top\",centerPos+\"px\");\r\n            return;\r\n        }\r\n\r\n        var sliderPos=zoomOutPos-sliderHeight;\r\n        zoomInPos=sliderPos-20;\r\n        centerPos=zoomInPos-20;\r\n        d3.select(\"#zoomSliderParagraph\").classed(\"hidden\",false);\r\n        d3.select(\"#zoomOutButton\").style(\"top\",zoomOutPos+\"px\");\r\n        d3.select(\"#zoomInButton\").style(\"top\",zoomInPos+\"px\");\r\n        d3.select(\"#centerGraphButton\").style(\"top\",centerPos+\"px\");\r\n        d3.select(\"#zoomSliderParagraph\").style(\"top\",sliderPos+\"px\");\r\n    }\r\n\r\n\tfunction getInternetExplorerVersion(){\r\n        var ua,\r\n            re,\r\n            rv = -1;\r\n\r\n        // check for edge\r\n        var isEdge=/(?:\\b(MS)?IE\\s+|\\bTrident\\/7\\.0;.*\\s+rv:|\\bEdge\\/)(\\d+)/.test(navigator.userAgent);\r\n        if (isEdge){\r\n            rv  = parseInt(\"12\");\r\n            return rv;\r\n        }\r\n\r\n        var isIE11 = /Trident.*rv[ :]*11\\./.test(navigator.userAgent);\r\n        if (isIE11){\r\n            rv  = parseInt(\"11\");\r\n            return rv;\r\n        }\r\n        if (navigator.appName === \"Microsoft Internet Explorer\") {\r\n            ua = navigator.userAgent;\r\n            re = new RegExp(\"MSIE ([0-9]{1,}[\\\\.0-9]{0,})\");\r\n            if (re.exec(ua) !== null) {\r\n                rv = parseFloat(RegExp.$1);\r\n            }\r\n        } else if (navigator.appName === \"Netscape\") {\r\n            ua = navigator.userAgent;\r\n            re = new RegExp(\"Trident/.*rv:([0-9]{1,}[\\\\.0-9]{0,})\");\r\n            if (re.exec(ua) !== null) {\r\n                rv = parseFloat(RegExp.$1);\r\n            }\r\n        }\r\n        return rv;\r\n\t}\r\n\r\n\treturn app;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/app.js\n// module id = 318\n// module chunks = 1","/**\r\n * Contains the logic for the export button.\r\n * @returns {{}}\r\n */\r\nmodule.exports = function (graph) {\r\n\r\n\tvar exportMenu = {},\r\n\t\texportSvgButton,\r\n\t\texportFilename,\r\n\t\texportJsonButton,\r\n\t\tcopyButton,\r\n\t\texportableJsonText;\r\n\r\n\r\n\r\n\r\n\r\n    /**\r\n\t * Adds the export button to the website.\r\n\t */\r\n\texportMenu.setup = function () {\r\n\t\texportSvgButton = d3.select(\"#exportSvg\")\r\n\t\t\t.on(\"click\", exportSvg);\r\n\t\texportJsonButton = d3.select(\"#exportJson\")\r\n\t\t\t.on(\"click\", exportJson);\r\n\r\n\t\tcopyButton=d3.select(\"#copyBt\")\r\n            .on(\"click\", copyUrl);\r\n\r\n\r\n        var menuEntry= d3.select(\"#m_export\");\r\n\t\tmenuEntry.on(\"mouseover\",function(){\r\n\t\t\tvar searchMenu=graph.options().searchMenu();\r\n\t\t\tsearchMenu.hideSearchEntries();\r\n            exportMenu.exportAsUrl();\r\n\t\t});\r\n\t};\r\n\r\n\texportMenu.setFilename = function (filename) {\r\n\t\texportFilename = filename || \"export\";\r\n\t};\r\n\r\n\texportMenu.setJsonText = function (jsonText) {\r\n\t\texportableJsonText = jsonText;\r\n\t};\r\n\r\n\tfunction copyUrl(){\r\n        d3.select(\"#exportedUrl\").node().focus();\r\n        d3.select(\"#exportedUrl\").node().select();\r\n        document.execCommand(\"copy\");\r\n        graph.options().navigationMenu().hideAllMenus();\r\n\t}\r\n\r\n\tfunction prepareOptionString(defOpts,currOpts){\r\n\t\tvar setOptions=0;\r\n        var optsString=\"opts=\";\r\n\r\n\t\tfor (var name in defOpts) {\r\n\t\t\t// define key and value ;\r\n\t\t\tif (defOpts.hasOwnProperty(name)) {// for travis warning\r\n\t\t\t\tvar def_value = defOpts[name];\r\n\t\t\t\tvar cur_value = currOpts[name];\r\n\t\t\t\tif (def_value !== cur_value) {\r\n\t\t\t\t\toptsString += name + \"=\" + cur_value + \";\";\r\n\t\t\t\t\tsetOptions++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\toptsString+=\"\";\r\n\t\tif (setOptions===0){ return \"\";}\r\n\t\treturn optsString;\r\n\t}\r\n\r\n\t exportMenu.exportAsUrl=function(){\r\n\r\n        var currObj={};\r\n        currObj.sidebar=graph.options().sidebar().getSidebarVisibility();\r\n\r\n        // identify default value given by ontology;\r\n\t\tvar defOntValue=graph.options().filterMenu().getDefaultDegreeValue();\r\n\t\tvar currentValue=graph.options().filterMenu().getDegreeSliderValue();\r\n\t\t\r\n\t\tif (parseInt(defOntValue)===parseInt(currentValue)) {\r\n\t\t\tcurrObj.doc=-1;\r\n\t\t}else{ currObj.doc=currentValue;}\r\n\r\n        currObj.cd=graph.options().classDistance();\r\n        currObj.dd=graph.options().datatypeDistance();\r\n        currObj.filter_datatypes=String(graph.options().filterMenu().getCheckBoxValue(\"datatypeFilterCheckbox\"));\r\n        currObj.filter_sco=String(graph.options().filterMenu().getCheckBoxValue(\"subclassFilterCheckbox\"));\r\n        currObj.filter_disjoint=String(graph.options().filterMenu().getCheckBoxValue(\"disjointFilterCheckbox\"));\r\n        currObj.filter_setOperator=String(graph.options().filterMenu().getCheckBoxValue(\"setoperatorFilterCheckbox\"));\r\n        currObj.filter_objectProperties=String(graph.options().filterMenu().getCheckBoxValue(\"objectPropertyFilterCheckbox\"));\r\n        currObj.mode_dynamic=String(graph.options().dynamicLabelWidth());\r\n        currObj.mode_scaling=String(graph.options().modeMenu().getCheckBoxValue(\"nodescalingModuleCheckbox\"));\r\n        currObj.mode_compact=String(graph.options().modeMenu().getCheckBoxValue(\"compactnotationModuleCheckbox\"));\r\n        currObj.mode_colorExt=String(graph.options().modeMenu().getCheckBoxValue(\"colorexternalsModuleCheckbox\"));\r\n        currObj.mode_multiColor=String(graph.options().modeMenu().colorModeState());\r\n        currObj.rect=0;\r\n\r\n\t\tvar defObj=graph.options().defaultConfig();\r\n        var optsString=prepareOptionString(defObj,currObj);\r\n        var urlString=String(location);\r\n        var htmlElement;\r\n        // when everything is default then there is nothing to write\r\n\t\tif (optsString.length===0){\r\n            // building up parameter list;\r\n            htmlElement=d3.select(\"#exportedUrl\").node();\r\n            htmlElement.value=urlString;\r\n            // ** -- removed for touch devices : otherwise this will call the mobile-keyboard -- ** //\r\n            // htmlElement.focus();\r\n            // htmlElement.select();\r\n            htmlElement.title=urlString;\r\n            return ;\r\n\t\t}\r\n\r\n        // generate the options string;\r\n        var numParameters=(urlString.match(/#/g) || []).length;\r\n        var newUrlString;\r\n        if (numParameters===undefined || numParameters===0){\r\n            newUrlString=urlString+\"#\"+optsString;\r\n\t\t}\r\n        if (numParameters>0) {\r\n            var tokens = urlString.split(\"#\");\r\n            var i;\r\n            if (tokens[1].indexOf(\"opts=\")>=0){\r\n\t\t\t\ttokens[1]=optsString;\r\n                newUrlString=tokens[0];\r\n\t\t\t}else{\r\n                newUrlString=tokens[0]+\"#\";\r\n                newUrlString+=optsString;\r\n\t\t\t}\r\n\t\t\t// append parameters\r\n            for (i=1;i<tokens.length;i++){\r\n            \tif (tokens[i].length>0) {\r\n                    newUrlString += \"#\" + tokens[i];\r\n                }\r\n            }\r\n        }\r\n        // building up parameter list;\r\n        htmlElement=d3.select(\"#exportedUrl\").node();\r\n        htmlElement.value=newUrlString;\r\n        htmlElement.focus();\r\n        htmlElement.select();\r\n        htmlElement.title=newUrlString;\r\n\t};\r\n\r\n\tfunction exportSvg() {\r\n        graph.options().navigationMenu().hideAllMenus();\r\n\t\t// Get the d3js SVG element\r\n\t\tvar graphSvg = d3.select(graph.options().graphContainerSelector()).select(\"svg\"),\r\n\t\t\tgraphSvgCode,\r\n\t\t\tescapedGraphSvgCode,\r\n\t\t\tdataURI;\r\n\r\n\t\t// inline the styles, so that the exported svg code contains the css rules\r\n\t\tinlineVowlStyles();\r\n\t\thideNonExportableElements();\r\n\r\n\t\tgraphSvgCode = graphSvg.attr(\"version\", 1.1)\r\n\t\t\t.attr(\"xmlns\", \"http://www.w3.org/2000/svg\")\r\n\t\t\t.node().parentNode.innerHTML;\r\n\r\n\t\t// Insert the reference to VOWL\r\n\t\tgraphSvgCode = \"<!-- Created with WebVOWL (version \" + webvowl.version + \")\" +\r\n\t\t               \", http://vowl.visualdataweb.org -->\\n\" + graphSvgCode;\r\n\r\n\t\tescapedGraphSvgCode = escapeUnicodeCharacters(graphSvgCode);\r\n\t\t//btoa(); Creates a base-64 encoded ASCII string from a \"string\" of binary data.\r\n\t\tdataURI = \"data:image/svg+xml;base64,\" + btoa(escapedGraphSvgCode);\r\n\r\n\t\texportSvgButton.attr(\"href\", dataURI)\r\n\t\t\t.attr(\"download\", exportFilename + \".svg\");\r\n\r\n\t\t// remove graphic styles for interaction to go back to normal\r\n\t\tremoveVowlInlineStyles();\r\n\t\tshowNonExportableElements();\r\n\t}\r\n\r\n\tfunction escapeUnicodeCharacters(text) {\r\n\t\tvar textSnippets = [],\r\n\t\t\ti, textLength = text.length,\r\n\t\t\tcharacter,\r\n\t\t\tcharCode;\r\n\r\n\t\tfor (i = 0; i < textLength; i++) {\r\n\t\t\tcharacter = text.charAt(i);\r\n\t\t\tcharCode = character.charCodeAt(0);\r\n\r\n\t\t\tif (charCode < 128) {\r\n\t\t\t\ttextSnippets.push(character);\r\n\t\t\t} else {\r\n\t\t\t\ttextSnippets.push(\"&#\" + charCode + \";\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn textSnippets.join(\"\");\r\n\t}\r\n\r\n\tfunction inlineVowlStyles() {\r\n\t\tsetStyleSensitively(\".text\", [{name: \"font-family\", value: \"Helvetica, Arial, sans-serif\"}, {name: \"font-size\", value: \"12px\"}]);\r\n\t\tsetStyleSensitively(\".subtext\", [{name: \"font-size\", value: \"9px\"}]);\r\n\t\tsetStyleSensitively(\".text.instance-count\", [{name: \"fill\", value: \"#666\"}]);\r\n\t\tsetStyleSensitively(\".external + text .instance-count\", [{name: \"fill\", value: \"#aaa\"}]);\r\n\t\tsetStyleSensitively(\".cardinality\", [{name: \"font-size\", value: \"10px\"}]);\r\n\t\tsetStyleSensitively(\".text, .embedded\", [{name: \"pointer-events\", value: \"none\"}]);\r\n\t\tsetStyleSensitively(\".class, .object, .disjoint, .objectproperty, .disjointwith, .equivalentproperty, .transitiveproperty, .functionalproperty, .inversefunctionalproperty, .symmetricproperty, .allvaluesfromproperty, .somevaluesfromproperty\", [{name: \"fill\", value: \"#acf\"}]);\r\n\t\tsetStyleSensitively(\".label .datatype, .datatypeproperty\", [{name: \"fill\", value: \"#9c6\"}]);\r\n\t\tsetStyleSensitively(\".rdf, .rdfproperty\", [{name: \"fill\", value: \"#c9c\"}]);\r\n\t\tsetStyleSensitively(\".literal, .node .datatype\", [{name: \"fill\", value: \"#fc3\"}]);\r\n\t\tsetStyleSensitively(\".deprecated, .deprecatedproperty\", [{name: \"fill\", value: \"#ccc\"}]);\r\n\t\tsetStyleSensitively(\".external, .externalproperty\", [{name: \"fill\", value: \"#36c\"}]);\r\n\t\tsetStyleSensitively(\"path, .nofill\", [{name: \"fill\", value: \"none\"}]);\r\n\t\tsetStyleSensitively(\"marker path\", [{name: \"fill\", value: \"#000\"}]);\r\n\t\tsetStyleSensitively(\".class, path, line, .fineline\", [{name: \"stroke\", value: \"#000\"}]);\r\n\t\tsetStyleSensitively(\".white, .subclass, .subclassproperty, .external + text\", [{name: \"fill\", value: \"#fff\"}]);\r\n\t\tsetStyleSensitively(\".class.hovered, .property.hovered, .cardinality.hovered, .cardinality.focused, circle.pin, .filled.hovered, .filled.focused\", [{name: \"fill\", value: \"#f00\"}, {name: \"cursor\", value: \"pointer\"}]);\r\n\t\tsetStyleSensitively(\".focused, path.hovered\", [{name: \"stroke\", value: \"#f00\"}]);\r\n\t\tsetStyleSensitively(\".indirect-highlighting, .feature:hover\", [{name: \"fill\", value: \"#f90\"}]);\r\n\t\tsetStyleSensitively(\".values-from\", [{name: \"stroke\", value: \"#69c\"}]);\r\n\t\tsetStyleSensitively(\".symbol, .values-from.filled\", [{name: \"fill\", value: \"#69c\"}]);\r\n\t\tsetStyleSensitively(\".class, path, line\", [{name: \"stroke-width\", value: \"2\"}]);\r\n\t\tsetStyleSensitively(\".fineline\", [{name: \"stroke-width\", value: \"1\"}]);\r\n\t\tsetStyleSensitively(\".dashed, .anonymous\", [{name: \"stroke-dasharray\", value: \"8\"}]);\r\n\t\tsetStyleSensitively(\".dotted\", [{name: \"stroke-dasharray\", value: \"3\"}]);\r\n\t\tsetStyleSensitively(\"rect.focused, circle.focused\", [{name: \"stroke-width\", value: \"4px\"}]);\r\n\t\tsetStyleSensitively(\".nostroke\", [{name: \"stroke\", value: \"none\"}]);\r\n\t\tsetStyleSensitively(\"marker path\", [{name: \"stroke-dasharray\", value: \"100\"}]);\r\n\t}\r\n\r\n\tfunction setStyleSensitively(selector, styles) {\r\n\t\tvar elements = d3.selectAll(selector);\r\n\t\tif (elements.empty()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstyles.forEach(function (style) {\r\n\t\t\telements.each(function () {\r\n\t\t\t\tvar element = d3.select(this);\r\n\t\t\t\tif (!shouldntChangeInlineCss(element, style.name)) {\r\n\t\t\t\t\telement.style(style.name, style.value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tfunction shouldntChangeInlineCss(element, style) {\r\n\t\treturn style === \"fill\" && hasBackgroundColorSet(element);\r\n\t}\r\n\r\n\tfunction hasBackgroundColorSet(element) {\r\n\t\tvar data = element.datum();\r\n\t\tif (data===undefined) { return false; }\r\n\t\treturn data.backgroundColor && !!data.backgroundColor();\r\n\t}\r\n\r\n\t/**\r\n\t * For example the pin of the pick&pin module should be invisible in the exported graphic.\r\n\t */\r\n\tfunction hideNonExportableElements() {\r\n\t\td3.selectAll(\".hidden-in-export\").style(\"display\", \"none\");\r\n\t}\r\n\r\n\tfunction removeVowlInlineStyles() {\r\n\t\td3.selectAll(\".text, .subtext, .text.instance-count, .external + text .instance-count, .cardinality, .text, .embedded, .class, .object, .disjoint, .objectproperty, .disjointwith, .equivalentproperty, .transitiveproperty, .functionalproperty, .inversefunctionalproperty, .symmetricproperty, .allvaluesfromproperty, .somevaluesfromproperty, .label .datatype, .datatypeproperty, .rdf, .rdfproperty, .literal, .node .datatype, .deprecated, .deprecatedproperty, .external, .externalproperty, path, .nofill, .symbol, .values-from.filled, marker path, .class, path, line, .fineline, .white, .subclass, .subclassproperty, .external + text, .class.hovered, .property.hovered, .cardinality.hovered, .cardinality.focused, circle.pin, .filled.hovered, .filled.focused, .focused, path.hovered, .indirect-highlighting, .feature:hover, .values-from, .class, path, line, .fineline, .dashed, .anonymous, .dotted, rect.focused, circle.focused, .nostroke, marker path\")\r\n\t\t\t.each(function () {\r\n\t\t\t\tvar element = d3.select(this);\r\n\r\n\t\t\t\tvar inlineStyles = element.node().style;\r\n\t\t\t\tfor (var styleName in inlineStyles) {\r\n\t\t\t\t\tif (inlineStyles.hasOwnProperty(styleName)) {\r\n\t\t\t\t\t\tif (shouldntChangeInlineCss(element, styleName)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telement.style(styleName, null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (element.datum && element.datum()!==undefined && element.datum().type){\r\n\t\t\t\t\tif (element.datum().type()===\"rdfs:subClassOf\") {\r\n\t\t\t\t\t\telement.style(\"fill\", null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t// repair svg icons in the menu;\r\n        var scrollContainer = d3.select(\"#menuElementContainer\").node();\r\n        var controlElements=scrollContainer.children;\r\n        var numEntries = controlElements.length;\r\n\r\n        for (var  i = 0; i < numEntries; i++) {\r\n            var currentMenu=controlElements[i].id;\r\n            d3.select(\"#\" + currentMenu).select(\"path\").style(\"stroke-width\", \"0\");\r\n            d3.select(\"#\" + currentMenu).select(\"path\").style(\"fill\", \"#fff\");\r\n        }\r\n\r\n        d3.select(\"#magnifyingGlass\").style(\"stroke-width\",\"0\");\r\n        d3.select(\"#magnifyingGlass\").style(\"fill\",\"#666\");\r\n\r\n    }\r\n\r\n\tfunction showNonExportableElements() {\r\n\t\td3.selectAll(\".hidden-in-export\").style(\"display\", null);\r\n\t}\r\n\r\n\tfunction exportJson() {\r\n        graph.options().navigationMenu().hideAllMenus();\r\n\t\t/**  check if there is data **/\r\n\t\tif (!exportableJsonText) {\r\n\t\t\talert(\"No graph data available.\");\r\n\t\t\t// Stop the redirection to the path of the href attribute\r\n\t\t\td3.event.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar i; // an index variable for the for-loops\r\n\r\n\t\t/** get data for exporter **/\r\n\t\tvar nodeElements = graph.graphNodeElements();  // get visible nodes\r\n\t\tvar propElements = graph.graphLabelElements(); // get visible labels\r\n\t\tvar jsonObj = JSON.parse(exportableJsonText);\t   // reparse the original input json\r\n\r\n\t\t/** modify comment **/\r\n\t\tvar comment = jsonObj._comment;\r\n\t\tvar additionalString = \" [Additional Information added by WebVOWL Exporter Version: \" + \"@@WEBVOWL_VERSION\" + \"]\";\r\n\t\t// adding new string to comment only if it does not exist\r\n\t\tif (comment.indexOf(additionalString) === -1) {\r\n\t\t\tjsonObj._comment = comment + \" [Additional Information added by WebVOWL Exporter Version: \" + \"@@WEBVOWL_VERSION\" + \"]\";\r\n\t\t}\r\n\r\n\t\tvar classAttribute = jsonObj.classAttribute;\r\n\t\tvar propAttribute = jsonObj.propertyAttribute;\r\n\t\t/**  remove previously stored variables **/\r\n\t\tfor (i = 0; i < classAttribute.length; i++) {\r\n\t\t\tvar classObj = classAttribute[i];\r\n\t\t\tdelete classObj.pos;\r\n\t\t\tdelete classObj.pinned;\r\n\t\t}\r\n\t\tvar propertyObj;\r\n\t\tfor (i = 0; i < propAttribute.length; i++) {\r\n\t\t\tpropertyObj = propAttribute[i];\r\n\t\t\tdelete propertyObj.pos;\r\n\t\t\tdelete propertyObj.pinned;\r\n\t\t}\r\n\t\t/**  add new variables to jsonObj  **/\r\n\t\t// class attribute variables\r\n\t\tnodeElements.each(function (node) {\r\n\t\t\tvar nodeId = node.id();\r\n\t\t\tfor (i = 0; i < classAttribute.length; i++) {\r\n\t\t\t\tvar classObj = classAttribute[i];\r\n\t\t\t\tif (classObj.id === nodeId) {\r\n\t\t\t\t\t// store relative positions\r\n\t\t\t\t\tclassObj.pos = [node.x, node.y];\r\n\t\t\t\t\tif (node.pinned())\r\n\t\t\t\t\t\tclassObj.pinned = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t// property attribute variables\r\n\t\tfor (var j = 0; j < propElements.length; j++) {\r\n\t\t\tvar correspondingProp = propElements[j].property();\r\n\t\t\tfor (i = 0; i < propAttribute.length; i++) {\r\n\t\t\t\tpropertyObj = propAttribute[i];\r\n\t\t\t\tif (propertyObj.id === correspondingProp.id()) {\r\n\t\t\t\t\tpropertyObj.pos = [propElements[j].x, propElements[j].y];\r\n\t\t\t\t\tif (propElements[j].pinned())\r\n\t\t\t\t\t\tpropertyObj.pinned = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t/** create the variable for settings and set their values **/\r\n\t\tjsonObj.settings = {};\r\n\r\n\t\t// Global Settings\r\n\t\tvar zoom = graph.scaleFactor();\r\n\t\tvar paused = graph.paused();\r\n\t\tvar translation = graph.translation();\r\n\t\tjsonObj.settings.global = {};\r\n\t\tjsonObj.settings.global.zoom = zoom;\r\n\t\tjsonObj.settings.global.translation = translation;\r\n\t\tjsonObj.settings.global.paused = paused;\r\n\r\n\t\t// shared variable declaration\r\n\t\tvar cb_text;\r\n\t\tvar isEnabled;\r\n\t\tvar cb_obj;\r\n\r\n\t\t// Gravity Settings\r\n\t\tvar classDistance = graph.options().classDistance();\r\n\t\tvar datatypeDistance = graph.options().datatypeDistance();\r\n\t\tjsonObj.settings.gravity = {};\r\n\t\tjsonObj.settings.gravity.classDistance = classDistance;\r\n\t\tjsonObj.settings.gravity.datatypeDistance = datatypeDistance;\r\n\r\n\t\t// Filter Settings\r\n\t\tvar fMenu = graph.options().filterMenu();\r\n\t\tvar fContainer = fMenu.getCheckBoxContainer();\r\n\t\tvar cbCont = [];\r\n\t\tfor (i = 0; i < fContainer.length; i++) {\r\n\t\t\tcb_text = fContainer[i].checkbox.attr(\"id\");\r\n\t\t\tisEnabled = fContainer[i].checkbox.property(\"checked\");\r\n\t\t\tcb_obj = {};\r\n\t\t\tcb_obj.id = cb_text;\r\n\t\t\tcb_obj.checked = isEnabled;\r\n\t\t\tcbCont.push(cb_obj);\r\n\t\t}\r\n\t\tvar degreeSliderVal = fMenu.getDegreeSliderValue();\r\n\t\tjsonObj.settings.filter = {};\r\n\t\tjsonObj.settings.filter.checkBox = cbCont;\r\n\t\tjsonObj.settings.filter.degreeSliderValue = degreeSliderVal;\r\n\r\n\t\t//level\r\n\t\tvar levelSliderVal = fMenu.getLevelSliderValue();\r\n\t\tjsonObj.settings.filter = {};\r\n\t\tjsonObj.settings.filter.levelSliderValue = levelSliderVal;\r\n\r\n\t\t// Modes Settings\r\n\t\tvar mMenu = graph.options().modeMenu();\r\n\t\tvar mContainer = mMenu.getCheckBoxContainer();\r\n\t\tvar cb_modes = [];\r\n\t\tfor (i = 0; i < mContainer.length; i++) {\r\n\t\t\tcb_text = mContainer[i].attr(\"id\");\r\n\t\t\tisEnabled = mContainer[i].property(\"checked\");\r\n\t\t\tcb_obj = {};\r\n\t\t\tcb_obj.id = cb_text;\r\n\t\t\tcb_obj.checked = isEnabled;\r\n\t\t\tcb_modes.push(cb_obj);\r\n\t\t}\r\n\t\tvar colorSwitchState = mMenu.colorModeState();\r\n\t\tjsonObj.settings.modes = {};\r\n\t\tjsonObj.settings.modes.checkBox = cb_modes;\r\n\t\tjsonObj.settings.modes.colorSwitchState = colorSwitchState;\r\n\r\n\t\tvar exportObj = {};\r\n\t\t// todo: [ ] find better way for ordering the objects\r\n\t\t// hack for ordering of objects, so settings is after metrics\r\n\t\texportObj._comment = jsonObj._comment;\r\n\t\texportObj.header = jsonObj.header;\r\n\t\texportObj.namespace = jsonObj.namespace;\r\n\t\texportObj.metrics = jsonObj.metrics;\r\n\t\texportObj.settings = jsonObj.settings;\r\n\t\texportObj.class = jsonObj.class;\r\n\t\texportObj.classAttribute = jsonObj.classAttribute;\r\n\t\texportObj.property = jsonObj.property;\r\n\t\texportObj.propertyAttribute = jsonObj.propertyAttribute;\r\n\r\n\r\n\t\t// make a string again;\r\n\t\tvar exportText = JSON.stringify(exportObj, null, '  ');\r\n\t\t// write the data\r\n\t\tvar dataURI = \"data:text/json;charset=utf-8,\" + encodeURIComponent(exportText);\r\n\t\texportJsonButton.attr(\"href\", dataURI)\r\n\t\t\t.attr(\"download\", exportFilename + \".json\");\r\n\t}\r\n\r\n\treturn exportMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/exportMenu.js\n// module id = 319\n// module chunks = 1","/**\r\n * Contains the logic for connecting the filters with the website.\r\n *\r\n * @param graph required for calling a refresh after a filter change\r\n * @returns {{}}\r\n */\r\nmodule.exports = function (graph) {\r\n\r\n\tvar filterMenu = {},\r\n\t\tcheckboxData = [],\r\n\t\tmenuElement = d3.select(\"#m_filter\"),\r\n        menuControl= d3.select(\"#c_filter a\"),\r\n\t\tnodeDegreeContainer = d3.select(\"#nodeDegreeFilteringOption\"),\r\n\t\tlevelContainer = d3.select(\"#levelFilteringOption\"),\r\n\t\tgraphDegreeLevel,\r\n\t\tgraphLevelLevel,\r\n\t\tdefaultDegreeValue=0,\r\n\t\tdefaultLevelValue=0,\r\n\t\tlevelSlider,\r\n\t\tdegreeSlider;\r\n\r\n    filterMenu.setDefaultDegreeValue=function(val){defaultDegreeValue=val;};\r\n    filterMenu.getDefaultDegreeValue=function(){return defaultDegreeValue;};\r\n\r\n    filterMenu.setDefaultLevelValue=function(val){\r\n    \tdefaultLevelValue=val;\r\n    };\r\n    filterMenu.getDefaultLevelValue=function(){\r\n    \treturn defaultLevelValue;\r\n    };\r\n\r\n\tfilterMenu.getGraphObject=function(){\r\n\t\treturn graph;\r\n\t};\r\n\t/** some getter function  **/\r\n\tfilterMenu.getCheckBoxContainer = function () {\r\n\t\treturn checkboxData;\r\n\t};\r\n\r\n\t/**\r\n\t * Connects the website with graph filters.\r\n\t * @param datatypeFilter filter for all datatypes\r\n\t * @param objectPropertyFilter filter for all object properties\r\n\t * @param subclassFilter filter for all subclasses\r\n\t * @param disjointFilter filter for all disjoint with properties\r\n\t * @param setOperatorFilter filter for all set operators with properties\r\n\t * @param nodeDegreeFilter filters nodes by their degree\r\n\t */\r\n\tfilterMenu.setup = function (datatypeFilter, objectPropertyFilter, subclassFilter, disjointFilter, setOperatorFilter, nodeDegreeFilter, levelFilter) {\r\n\t\t// TODO: is this here really necessarry? << new menu visualization style?\r\n        menuControl.on(\"mouseover\",function(){\r\n\t\t\tvar searchMenu=graph.options().searchMenu();\r\n\t\t\tsearchMenu.hideSearchEntries();\r\n\t\t});\r\n        menuControl.on(\"mouseleave\", function () {\r\n\t\t\tfilterMenu.highlightForDegreeSlider(false);\r\n\t\t});\r\n\r\n//\t\taddFilterItem(datatypeFilter, \"datatype\", \"Datatype properties\", \"#datatypeFilteringOption\");\r\n//\t\taddFilterItem(objectPropertyFilter, \"objectProperty\", \"Object properties\", \"#objectPropertyFilteringOption\");\r\n//\t\taddFilterItem(subclassFilter, \"subclass\", \"Solitary subclasses\", \"#subclassFilteringOption\");\r\n//\t\taddFilterItem(disjointFilter, \"disjoint\", \"Class disjointness\", \"#disjointFilteringOption\");\r\n\t\taddFilterItem(setOperatorFilter, \"setoperator\", \"Set operators\", \"#setOperatorFilteringOption\");\r\n\r\n\t\taddNodeDegreeFilter(nodeDegreeFilter, nodeDegreeContainer);\r\n\t\taddLevelFilter(levelFilter,levelContainer);\r\n        addAnimationFinishedListener();\r\n\t};\r\n\r\n\r\n\tfunction addFilterItem(filter, identifier, pluralNameOfFilteredItems, selector) {\r\n\t\tvar filterContainer,\r\n\t\t\tfilterCheckbox;\r\n\r\n\t\tfilterContainer = d3.select(selector)\r\n\t\t\t.append(\"div\")\r\n\t\t\t.classed(\"checkboxContainer\", true);\r\n\r\n\t\tfilterCheckbox = filterContainer.append(\"input\")\r\n\t\t\t.classed(\"filterCheckbox\", true)\r\n\t\t\t.attr(\"id\", identifier + \"FilterCheckbox\")\r\n\t\t\t.attr(\"type\", \"checkbox\")\r\n\t\t\t.property(\"checked\", filter.enabled());\r\n\r\n\t\t// Store for easier resetting\r\n\t\tcheckboxData.push({checkbox: filterCheckbox, defaultState: filter.enabled()});\r\n\r\n\t\tfilterCheckbox.on(\"click\", function (silent) {\r\n\t\t\t// There might be no parameters passed because of a manual\r\n\t\t\t// invocation when resetting the filters\r\n\t\t\tvar isEnabled = filterCheckbox.property(\"checked\");\r\n\t\t\tfilter.enabled(isEnabled);\r\n\t\t\tif (silent !== true) {\r\n\t\t\t\t// updating graph when silent is false or the parameter is not given.\r\n\t\t\t\tgraph.update();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfilterContainer.append(\"label\")\r\n\t\t\t.attr(\"for\", identifier + \"FilterCheckbox\")\r\n\t\t\t.text(pluralNameOfFilteredItems);\r\n\t}\r\n\r\n\tfunction addNodeDegreeFilter(nodeDegreeFilter, container) {\r\n\t\tnodeDegreeFilter.setMaxDegreeSetter(function (maxDegree) {\r\n\t\t\tdegreeSlider.attr(\"max\", 1);\r\n\t\t\tsetSliderValue(degreeSlider, Math.min(maxDegree, degreeSlider.property(\"value\")));\r\n\t\t});\r\n\r\n\t\tnodeDegreeFilter.setDegreeGetter(function () {\r\n\t\t\treturn +degreeSlider.property(\"value\");\r\n\t\t});\r\n\r\n\t\tnodeDegreeFilter.setDegreeSetter(function (value) {\r\n\t\t\tsetSliderValue(degreeSlider, value);\r\n\t\t});\r\n\r\n\t\tvar sliderContainer,\r\n\t\t\tsliderValueLabel;\r\n\r\n\t\tsliderContainer = container.append(\"div\")\r\n\t\t\t.classed(\"distanceSliderContainer\", true);\r\n\r\n\t\tdegreeSlider = sliderContainer.append(\"input\")\r\n\t\t\t.attr(\"id\", \"nodeDegreeDistanceSlider\")\r\n\t\t\t.attr(\"type\", \"range\")\r\n\t\t\t.attr(\"min\", 0)\r\n\t\t\t.attr(\"step\", 1);\r\n\r\n\t\tsliderContainer.append(\"label\")\r\n\t\t\t.classed(\"description\", true)\r\n\t\t\t.attr(\"for\", \"nodeDegreeDistanceSlider\")\r\n\t\t\t.text(\"塌陷度\");\r\n\r\n\t\tsliderValueLabel = sliderContainer.append(\"label\")\r\n\t\t\t.classed(\"value\", true)\r\n\t\t\t.attr(\"for\", \"nodeDegreeDistanceSlider\")\r\n\t\t\t.text(0);\r\n\r\n\r\n\r\n\t\tdegreeSlider.on(\"change\", function (silent) {\r\n\t\t\tif (silent !== true) {\r\n\t\t\t\tgraph.update();\r\n\t\t\t\tgraphDegreeLevel=degreeSlider.property(\"value\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tdegreeSlider.on(\"input\", function () {\r\n\t\t\tvar degree = degreeSlider.property(\"value\");\r\n\t\t\tsliderValueLabel.text(degree);\r\n\t\t});\r\n\r\n\r\n\t\t// adding wheel events\r\n\t\tdegreeSlider.on(\"wheel\",handleWheelEvent);\r\n\t\tdegreeSlider.on(\"focusout\",function(){\r\n\t\t\tif (degreeSlider.property(\"value\")!==graphDegreeLevel) {\r\n\t\t\t\tgraph.update();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction addLevelFilter(levelFilter, container) {\r\n\t\tlevelFilter.setMaxLevelSetter(function (maxLevel) {\r\n\t\t\tlevelSlider.attr(\"max\", maxLevel);\r\n\t\t\tsetSliderValue(levelSlider, Math.min(maxLevel, levelSlider.property(\"value\")));\r\n\t\t});\r\n\r\n\t\tlevelFilter.setLevelGetter(function () {\r\n\t\t\treturn +levelSlider.property(\"value\");\r\n\t\t});\r\n\r\n\t\tlevelFilter.setLevelSetter(function (value) {\r\n\t\t\tsetSliderValue(levelSlider, value);\r\n\t\t});\r\n\r\n\t\tvar sliderContainer,\r\n\t\t\tsliderValueLabel;\r\n\r\n\t\tsliderContainer = container.append(\"div\")\r\n\t\t\t.classed(\"distanceSliderContainer\", true);\r\n\r\n\t\tlevelSlider = sliderContainer.append(\"input\")\r\n\t\t\t.attr(\"id\", \"levelDistanceSlider\")\r\n\t\t\t.attr(\"type\", \"range\")\r\n\t\t\t.attr(\"min\", 1)\r\n\t\t\t.attr(\"step\", 1);\r\n\r\n\t\tsliderContainer.append(\"label\")\r\n\t\t\t.classed(\"description\", true)\r\n\t\t\t.attr(\"for\", \"levelDistanceSlider\")\r\n\t\t\t.text(\"显示层级\");\r\n\r\n\t\tsliderValueLabel = sliderContainer.append(\"label\")\r\n\t\t\t.classed(\"value\", true)\r\n\t\t\t.attr(\"for\", \"levelDistanceSlider\")\r\n\t\t\t.text(0);\r\n\r\n\r\n\t\tlevelSlider.on(\"change\", function (silent) {\r\n\t\t\tif (silent !== true) {\r\n\t\t\t\tgraph.update();\r\n\t\t\t\tgraphLevelLevel=levelSlider.property(\"value\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tlevelSlider.on(\"input\", function () {\r\n\t\t\tvar degree = levelSlider.property(\"value\");\r\n\t\t\tsliderValueLabel.text(degree);\r\n\t\t});\r\n\r\n\r\n\t\t// adding wheel events\r\n\t\tlevelSlider.on(\"wheel\",handleWheelEvent);\r\n\t\tlevelSlider.on(\"focusout\",function(){\r\n\t\t\tif (levelSlider.property(\"value\")!==graphLevelLevel) {\r\n\t\t\t\tgraph.update();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction handleWheelEvent(){\r\n\t\tvar wheelEvent=d3.event;\r\n\r\n\t\tvar offset;\r\n\t\tif (wheelEvent.deltaY<0) offset=1;\r\n\t\tif (wheelEvent.deltaY>0) offset=-1;\r\n\r\n\t\tvar oldVal=parseInt(degreeSlider.property(\"value\"));\r\n\t\tvar newSliderValue=oldVal+offset;\r\n\t\tif (oldVal!==newSliderValue) {\r\n\t\t\t// only update when they are different [reducing redundant updates]\r\n\t\t\t// set the new value and emit an update signal\r\n\t\t\tdegreeSlider.property(\"value\", newSliderValue);\r\n\t\t\tdegreeSlider.on(\"input\")();// <<-- sets the text value\r\n\t\t\tgraph.update();\r\n\t\t}\r\n\t\td3.event.preventDefault();\r\n\t}\r\n\t\r\n\tfunction setSliderValue(slider, value) {\r\n\t\tslider.property(\"value\", value).on(\"input\")();\r\n\t}\r\n\r\n\t/**\r\n\t * Resets the filters (and also filtered elements) to their default.\r\n\t */\r\n\tfilterMenu.reset = function () {\r\n\t\tcheckboxData.forEach(function (checkboxData) {\r\n\t\t\tvar checkbox = checkboxData.checkbox,\r\n\t\t\t\tenabledByDefault = checkboxData.defaultState,\r\n\t\t\t\tisChecked = checkbox.property(\"checked\");\r\n\r\n\t\t\tif (isChecked !== enabledByDefault) {\r\n\t\t\t\tcheckbox.property(\"checked\", enabledByDefault);\r\n\t\t\t\t// Call onclick event handlers programmatically\r\n\t\t\t\tcheckbox.on(\"click\")();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsetSliderValue(degreeSlider, degreeSlider.property(\"max\"));\r\n\t\tsetSliderValue(levelSlider, levelSlider.property(\"max\"));\r\n\t\tdegreeSlider.on(\"change\")();\r\n\t\tlevelSlider.on(\"change\")();\r\n\t};\r\n\r\n\tfunction addAnimationFinishedListener() {\r\n        menuControl.node().addEventListener(\"animationend\", function () {\r\n            menuControl.classed(\"buttonPulse\", false);\r\n            menuControl.classed(\"filterMenuButtonHighlight\", true);\r\n\r\n        });\r\n    }\r\n\r\n    filterMenu.killButtonAnimation=function(){\r\n        menuControl.classed(\"buttonPulse\", false);\r\n        menuControl.classed(\"filterMenuButtonHighlight\", false);\r\n\t};\r\n\r\n\tfilterMenu.highlightForDegreeSlider = function (enable) {\r\n\t\tif (!arguments.length) {\r\n\t\t\tenable = true;\r\n\t\t}\r\n        menuControl.classed(\"highlighted\", enable);\r\n\t\tnodeDegreeContainer.classed(\"highlighted\", enable);\r\n\t\t// pulse button handling\r\n\t\tif (menuControl.classed(\"buttonPulse\")===true && enable===true){\r\n            menuControl.classed(\"buttonPulse\", false);\r\n\t\t\tvar timer= setTimeout(function() {\r\n                menuControl.classed(\"buttonPulse\", enable);\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t// after the time is done, remove the pulse but stay highlighted\r\n\t\t\t}, 100);\r\n\t\t}else {\r\n            menuControl.classed(\"buttonPulse\", enable);\r\n            menuControl.classed(\"filterMenuButtonHighlight\", enable);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/** importer functions **/\r\n\t// setting manually the values of the filter\r\n\t// no update of the gui settings, these are updated in updateSettings\r\n\tfilterMenu.setCheckBoxValue = function (id, checked) {\r\n\r\n\t};\r\n\r\n\tfilterMenu.getCheckBoxValue=function(id){\r\n\t\t\r\n\t};\r\n\t// set the value of the slider\r\n\tfilterMenu.setDegreeSliderValue = function (val) {\r\n\t\tdegreeSlider.property(\"value\", val);\r\n\t};\r\n\r\n\tfilterMenu.getDegreeSliderValue = function(){\r\n\t\treturn degreeSlider.property(\"value\");\r\n\t};\r\n\r\n\t// set the value of the slider\r\n\tfilterMenu.setLevelSliderValue = function (val) {\r\n\t\tlevelSlider.property(\"value\", val);\r\n\t};\r\n\r\n\tfilterMenu.getLevelSliderValue = function(){\r\n\t\tvar level = levelSlider.property(\"value\");\r\n\t\treturn level;\r\n\t};\r\n\r\n\t// update the gui without invoking graph update (calling silent onclick function)\r\n\tfilterMenu.updateSettings = function () {\r\n\r\n\t\tvar silent = true;\r\n\t\tvar sliderValue = degreeSlider.property(\"value\");\r\n\t\tif (sliderValue > 0) {\r\n\t\t\tfilterMenu.highlightForDegreeSlider(true);\r\n\t\t} else{\r\n\t\t\tfilterMenu.highlightForDegreeSlider(false);\r\n\t\t}\r\n\r\n\t\tvar levelSliderValue = levelSlider.property(\"value\");\r\n\t\tif (levelSliderValue > 0) {\r\n\t\t\tfilterMenu.highlightForDegreeSlider(true);\r\n\t\t} else{\r\n\t\t\tfilterMenu.highlightForDegreeSlider(false);\r\n\t\t}\r\n\r\n\t\tcheckboxData.forEach(function (checkboxData) {\r\n\t\t\tvar checkbox = checkboxData.checkbox;\r\n\t\t});\r\n\r\n\t\tdegreeSlider.on(\"input\")();\r\n\t\tdegreeSlider.on(\"change\")(silent);\r\n\t\tlevelSlider.on(\"input\")();\r\n\t\tlevelSlider.on(\"change\")(silent);\r\n\t};\r\n\r\n\treturn filterMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/filterMenu.js\n// module id = 320\n// module chunks = 1","/**\r\n * Contains the logic for setting up the gravity sliders.\r\n *\r\n * @param graph the associated webvowl graph\r\n * @returns {{}}\r\n */\r\nmodule.exports = function (graph) {\r\n\r\n\tvar gravityMenu = {},\r\n\t\tsliders = [],\r\n\t\toptions = graph.graphOptions(),\r\n\t\tdefaultCharge = options.charge();\r\n\r\n\r\n\t/**\r\n\t * Adds the gravity sliders to the website.\r\n\t */\r\n\tgravityMenu.setup = function () {\r\n\t\tvar menuEntry= d3.select(\"#m_gravity\");\r\n\t\tmenuEntry.on(\"mouseover\",function(){\r\n\t\t\tvar searchMenu=graph.options().searchMenu();\r\n\t\t\tsearchMenu.hideSearchEntries();\r\n\t\t});\r\n\t\taddDistanceSlider(\"#classSliderOption\", \"class\", \"节点间距\", options.classDistance);\r\n\t\taddDistanceSlider(\"#datatypeSliderOption\", \"datatype\", \"连线长度\", options.datatypeDistance);\r\n\t};\r\n\r\n\tfunction addDistanceSlider(selector, identifier, label, distanceFunction) {\r\n\t\tvar defaultLinkDistance = distanceFunction();\r\n\r\n\t\tvar sliderContainer,\r\n\t\t\tsliderValueLabel;\r\n\r\n\t\tsliderContainer = d3.select(selector)\r\n\t\t\t.append(\"div\")\r\n\t\t\t.datum({distanceFunction: distanceFunction}) // connect the options-function with the slider\r\n\t\t\t.classed(\"distanceSliderContainer\", true);\r\n\r\n\t\tvar slider = sliderContainer.append(\"input\")\r\n\t\t\t.attr(\"id\", identifier + \"DistanceSlider\")\r\n\t\t\t.attr(\"type\", \"range\")\r\n\t\t\t.attr(\"min\", 10)\r\n\t\t\t.attr(\"max\", 600)\r\n\t\t\t.attr(\"value\", distanceFunction())\r\n\t\t\t.attr(\"step\", 10);\r\n\r\n\t\tsliderContainer.append(\"label\")\r\n\t\t\t.classed(\"description\", true)\r\n\t\t\t.attr(\"for\", identifier + \"DistanceSlider\")\r\n\t\t\t.text(label);\r\n\r\n\t\tsliderValueLabel = sliderContainer.append(\"label\")\r\n\t\t\t.classed(\"value\", true)\r\n\t\t\t.attr(\"for\", identifier + \"DistanceSlider\")\r\n\t\t\t.text(distanceFunction());\r\n\r\n\t\t// Store slider for easier resetting\r\n\t\tsliders.push(slider);\r\n\r\n\t\tslider.on(\"focusout\",function(){\r\n\t\t\tgraph.updateStyle();\r\n\t\t});\r\n\r\n\t\tslider.on(\"input\", function () {\r\n\t\t\tvar distance = slider.property(\"value\");\r\n\t\t\tdistanceFunction(distance);\r\n\t\t\tadjustCharge(defaultLinkDistance);\r\n\t\t\tsliderValueLabel.text(distance);\r\n\t\t\tgraph.updateStyle();\r\n\t\t});\r\n\r\n\t\t// add wheel event to the slider\r\n\t\tslider.on(\"wheel\",function(){\r\n\t\t\tvar wheelEvent=d3.event;\r\n\t\t\tvar offset;\r\n\t\t\tif (wheelEvent.deltaY<0) offset=10;\r\n\t\t\tif (wheelEvent.deltaY>0) offset=-10;\r\n\t\t\tvar oldVal=parseInt(slider.property(\"value\"));\r\n\t\t\tvar newSliderValue=oldVal+offset;\r\n\t\t\tif (newSliderValue!==oldVal){\r\n\t\t\t\tslider.property(\"value\",newSliderValue);\r\n\t\t\t\tdistanceFunction(newSliderValue);\r\n\t\t\t\tslider.on(\"input\")(); // << set text and update the graphStyles\r\n\t\t\t}\r\n            d3.event.preventDefault();\r\n\t\t});\r\n\t}\r\n\r\n\tfunction adjustCharge(defaultLinkDistance) {\r\n\t\tvar greaterDistance = Math.max(options.classDistance(), options.datatypeDistance()),\r\n\t\t\tratio = greaterDistance / defaultLinkDistance,\r\n\t\t\tnewCharge = defaultCharge * ratio;\r\n\r\n\t\toptions.charge(newCharge);\r\n\t}\r\n\r\n\t/**\r\n\t * Resets the gravity sliders to their default.\r\n\t */\r\n\tgravityMenu.reset = function () {\r\n\t\tsliders.forEach(function (slider) {\r\n\t\t\tslider.property(\"value\", function (d) {\r\n\t\t\t\t// Simply reload the distance from the options\r\n\t\t\t\treturn d.distanceFunction();\r\n\t\t\t});\r\n\t\t\tslider.on(\"input\")();\r\n\t\t});\r\n\t};\r\n\r\n\r\n\treturn gravityMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/gravityMenu.js\n// module id = 321\n// module chunks = 1","/**\r\n * Contains the logic for connecting the modes with the website.\r\n *\r\n * @param graph the graph that belongs to these controls\r\n * @returns {{}}\r\n */\r\nmodule.exports = function (graph) {\r\n\r\n\tvar SAME_COLOR_MODE = {text: \"彩色\", type: \"same\"};\r\n\tvar GRADIENT_COLOR_MODE = {text: \"彩色\", type: \"gradient\"};\r\n\r\n\tvar modeMenu = {},\r\n\t\tcheckboxes = [],\r\n\t\tcolorModeSwitch;\r\n\r\n\tvar dynamicLabelWidthCheckBox;\r\n\t// getter and setter for the state of color modes\r\n\tmodeMenu.colorModeState = function (s) {\r\n\t\tif (!arguments.length) return colorModeSwitch.datum().active;\r\n\t\tcolorModeSwitch.datum().active = s;\r\n\t\treturn modeMenu;\r\n\t};\r\n\r\n\r\n\tmodeMenu.setDynamicLabelWidth=function(val){\r\n        dynamicLabelWidthCheckBox.property(\"checked\",val);\r\n\t};\r\n\t// getter for checkboxes\r\n\tmodeMenu.getCheckBoxContainer = function () {\r\n\t\treturn checkboxes;\r\n\t};\r\n\t// getter for the color switch [needed? ]\r\n\tmodeMenu.colorModeSwitch = function () {\r\n\t\treturn colorModeSwitch;\r\n\t};\r\n\r\n\t/**\r\n\t * Connects the website with the available graph modes.\r\n\t */\r\n\tmodeMenu.setup = function (pickAndPin, nodeScaling, compactNotation, colorExternals) {\r\n\t\tvar menuEntry= d3.select(\"#m_modes\");\r\n\t\tmenuEntry.on(\"mouseover\",function(){\r\n\t\t\tvar searchMenu=graph.options().searchMenu();\r\n\t\t\tsearchMenu.hideSearchEntries();\r\n\t\t});\r\n    addCheckBox(\"labelWidth\",\"动态标签宽度\",\"#dynamicLabelWidth\",graph.options().dynamicLabelWidth,1);\r\n\t\taddModeItem(pickAndPin, \"pickandpin\", \"挑选 & 抓取\", \"#pickAndPinOption\", false);\r\n\t\taddModeItem(nodeScaling, \"nodescaling\", \"节点缩放\", \"#nodeScalingOption\", true);\r\n\t\taddModeItem(compactNotation, \"compactnotation\", \"紧缩技法\", \"#compactNotationOption\", true);\r\n\t\tvar container = addModeItem(colorExternals, \"colorexternals\", \"颜色拓展\", \"#colorExternalsOption\", true);\r\n\t\tcolorModeSwitch = addExternalModeSelection(container, colorExternals);\r\n\t};\r\n    function addCheckBox(identifier, modeName, selector,onChangeFunc,updateLvl) {\r\n        var moduleOptionContainer = d3.select(selector)\r\n            .append(\"div\")\r\n            .classed(\"checkboxContainer\", true);\r\n\r\n        var moduleCheckbox = moduleOptionContainer.append(\"input\")\r\n            .classed(\"moduleCheckbox\", true)\r\n            .attr(\"id\", identifier + \"ModuleCheckbox\")\r\n            .attr(\"type\", \"checkbox\")\r\n            .property(\"checked\", onChangeFunc());\r\n\r\n        moduleCheckbox.on(\"click\", function (d) {\r\n            var isEnabled = moduleCheckbox.property(\"checked\");\r\n            onChangeFunc(isEnabled);\r\n            d3.select(\"#maxLabelWidthSliderOption\").classed(\"hidden\",!isEnabled);\r\n            if (updateLvl>0){\r\n                graph.lazyRefresh(); // maybe to much of an update\r\n            }\r\n        });\r\n        moduleOptionContainer.append(\"label\")\r\n            .attr(\"for\", identifier + \"ModuleCheckbox\")\r\n            .text(modeName);\r\n        dynamicLabelWidthCheckBox=moduleCheckbox;\r\n    }\r\n\r\n\tfunction addModeItem(module, identifier, modeName, selector, updateGraphOnClick) {\r\n\t\tvar moduleOptionContainer,\r\n\t\t\tmoduleCheckbox;\r\n\r\n\t\tmoduleOptionContainer = d3.select(selector)\r\n\t\t\t.append(\"div\")\r\n\t\t\t.classed(\"checkboxContainer\", true)\r\n\t\t\t.datum({module: module, defaultState: module.enabled()});\r\n\r\n\t\tmoduleCheckbox = moduleOptionContainer.append(\"input\")\r\n\t\t\t.classed(\"moduleCheckbox\", true)\r\n\t\t\t.attr(\"id\", identifier + \"ModuleCheckbox\")\r\n\t\t\t.attr(\"type\", \"checkbox\")\r\n\t\t\t.property(\"checked\", module.enabled());\r\n\r\n\t\t// Store for easier resetting all modes\r\n\t\tcheckboxes.push(moduleCheckbox);\r\n\r\n\t\tmoduleCheckbox.on(\"click\", function (d, silent) {\r\n\t\t\tvar isEnabled = moduleCheckbox.property(\"checked\");\r\n\t\t\td.module.enabled(isEnabled);\r\n\t\t\tif (updateGraphOnClick && silent !== true) {\r\n\t\t\t\tgraph.update();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tmoduleOptionContainer.append(\"label\")\r\n\t\t\t.attr(\"for\", identifier + \"ModuleCheckbox\")\r\n\t\t\t.text(modeName);\r\n\r\n\t\treturn moduleOptionContainer;\r\n\t}\r\n\r\n\tfunction addExternalModeSelection(container, colorExternalsMode) {\r\n\t\tvar button = container.append(\"button\").datum({active: false}).classed(\"color-mode-switch\", true);\r\n\t\tapplyColorModeSwitchState(button, colorExternalsMode);\r\n\r\n\t\tbutton.on(\"click\", function (silent) {\r\n\t\t\tvar data = button.datum();\r\n\t\t\tdata.active = !data.active;\r\n\t\t\tapplyColorModeSwitchState(button, colorExternalsMode);\r\n\t\t\tif (colorExternalsMode.enabled() && silent !== true) {\r\n\t\t\t\tgraph.update();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn button;\r\n\t}\r\n\r\n\tfunction applyColorModeSwitchState(element, colorExternalsMode) {\r\n\t\tvar isActive = element.datum().active;\r\n\t\tvar activeColorMode = getColorModeByState(isActive);\r\n\r\n\t\telement.classed(\"active\", isActive)\r\n\t\t\t.text(activeColorMode.text);\r\n\r\n\t\tif (colorExternalsMode) {\r\n\t\t\tcolorExternalsMode.colorModeType(activeColorMode.type);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getColorModeByState(isActive) {\r\n\t\treturn isActive ? GRADIENT_COLOR_MODE : SAME_COLOR_MODE;\r\n\t}\r\n\r\n\t/**\r\n\t * Resets the modes to their default.\r\n\t */\r\n\tmodeMenu.reset = function () {\r\n\t\tcheckboxes.forEach(function (checkbox) {\r\n\t\t\tvar defaultState = checkbox.datum().defaultState,\r\n\t\t\t\tisChecked = checkbox.property(\"checked\");\r\n\r\n\t\t\tif (isChecked !== defaultState) {\r\n\t\t\t\tcheckbox.property(\"checked\", defaultState);\r\n\t\t\t\t// Call onclick event handlers programmatically\r\n\t\t\t\tcheckbox.on(\"click\")(checkbox.datum());\r\n\t\t\t}\r\n\r\n\t\t\t// Reset the module that is connected with the checkbox\r\n\t\t\tcheckbox.datum().module.reset();\r\n\t\t});\r\n\r\n\t\t// set the switch to active and simulate disabling\r\n\t\tcolorModeSwitch.datum().active = true;\r\n\t\tcolorModeSwitch.on(\"click\")();\r\n\t};\r\n\r\n\t/** importer functions **/\r\n\t// setting manually the values of the filter\r\n\t// no update of the gui settings, these are updated in updateSettings\r\n\tmodeMenu.setCheckBoxValue = function (id, checked) {\r\n\t\tfor (var i = 0; i < checkboxes.length; i++) {\r\n\t\t\tvar cbdId = checkboxes[i].attr(\"id\");\r\n\r\n\t\t\tif (cbdId === id) {\r\n\t\t\t\tcheckboxes[i].property(\"checked\", checked);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n    modeMenu.getCheckBoxValue = function (id) {\r\n        for (var i = 0; i < checkboxes.length; i++) {\r\n            var cbdId = checkboxes[i].attr(\"id\");\r\n            if (cbdId === id) {\r\n                return checkboxes[i].property(\"checked\");\r\n            }\r\n        }\r\n    };\r\n\r\n\tmodeMenu.setColorSwitchState = function (state) {\r\n\t\t// need the !state because we simulate later a click\r\n\t\tmodeMenu.colorModeState(!state);\r\n\t};\r\n    modeMenu.setColorSwitchStateUsingURL = function (state) {\r\n        // need the !state because we simulate later a click\r\n        modeMenu.colorModeState(!state);\r\n        colorModeSwitch.on(\"click\")(true);\r\n    };\r\n\r\n\r\n    modeMenu.updateSettingsUsingURL = function () {\r\n        var silent = true;\r\n        checkboxes.forEach(function (checkbox) {\r\n            checkbox.on(\"click\")(checkbox.datum(), silent);\r\n        });\r\n    };\r\n\r\n\tmodeMenu.updateSettings = function () {\r\n\t\tvar silent = true;\r\n\t\tcheckboxes.forEach(function (checkbox) {\r\n\t\t\tcheckbox.on(\"click\")(checkbox.datum(), silent);\r\n\t\t});\r\n\t\t// this simulates onclick and inverts its state\r\n\t\tcolorModeSwitch.on(\"click\")(silent);\r\n\t};\r\n\treturn modeMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/modeMenu.js\n// module id = 322\n// module chunks = 1","var unescape = require(\"lodash/unescape\");\r\n\r\nmodule.exports = function (graph) {\r\n\r\n\tvar ontologyMenu = {},\r\n\t\tloadingInfo = d3.select(\"#loading-info\"),\r\n\t\tloadingProgress = d3.select(\"#loading-progress\"),\r\n\r\n\t\tontologyMenuTimeout,\r\n\t\tfileToLoad,\r\n        stopTimer=false,\r\n\t\tloadingError=false,\r\n        loadingStatusTimer,\r\n        conversion_sessionId,\r\n\t\tcachedConversions = {},\r\n\t\tloadingModule,\r\n\t\tloadOntologyFromText;\r\n\r\n\tString.prototype.beginsWith = function (string) {\r\n\t\treturn(this.indexOf(string) === 0);\r\n\t};\r\n\r\n\tontologyMenu.getLoadingFunction=function(){\r\n\t\treturn loadOntologyFromText;\r\n\t};\r\n\r\n\tontologyMenu.cachedOntology=function(ontoName){\r\n\t\treturn cachedConversions[ontoName];\r\n\t};\r\n    ontologyMenu.setCachedOntology=function(ontoName, ontoContent){\r\n        cachedConversions[ontoName]=ontoContent;\r\n    };\r\n\r\n    ontologyMenu.getErrorStatus=function(){\r\n    \treturn loadingError;\r\n    };\r\n\r\n\tontologyMenu.setup = function (_loadOntologyFromText) {\r\n\t\tloadOntologyFromText = _loadOntologyFromText;\r\n\t\tloadingModule=graph.options().loadingModule();\r\n\t\tvar menuEntry= d3.select(\"#m_select\");\r\n\t\tmenuEntry.on(\"mouseover\",function(){\r\n\t\t\tvar searchMenu=graph.options().searchMenu();\r\n\t\t\tsearchMenu.hideSearchEntries();\r\n\t\t});\r\n\r\n\t\tsetupConverterButtons();\r\n\t\tsetupUploadButton();\r\n\t\tsetupUriListener();\r\n\t    loadingModule.setOntologyMenu(ontologyMenu);\r\n\t};\r\n\r\n\tfunction setupUriListener() {\r\n\t\t// reload ontology when hash parameter gets changed manually\r\n\t\td3.select(window).on(\"hashchange\", function () {\r\n\t\t\tvar oldURL = d3.event.oldURL, newURL = d3.event.newURL;\r\n\t\t\tif (oldURL !== newURL) {\r\n\t\t\t\t// don't reload when just the hash parameter gets appended\r\n\t\t\t\tif (newURL === oldURL + \"#\") {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tupdateNavigationHrefs();\r\n\t\t\t\tloadingModule.parseUrlAndLoadOntology();\r\n\t\t\t}\r\n\t\t});\r\n\t\tupdateNavigationHrefs();\r\n\t}\r\n\r\n\tontologyMenu.stopLoadingTimer=function(){\r\n        stopTimer=true;\r\n        clearTimeout(loadingStatusTimer);\r\n\t};\r\n\r\n\t/**\r\n\t * Quick fix: update all anchor tags that are used as buttons because a click on them\r\n\t * changes the url and this will load an other ontology.\r\n\t */\r\n\tfunction updateNavigationHrefs() {\r\n\t\td3.selectAll(\"#menuElementContainer > li > a\").attr(\"href\", location.hash || \"#\");\r\n\t}\r\n\r\n\tontologyMenu.setIriText=function(text){\r\n\t\td3.select(\"#iri-converter-input\").node().value=text;\r\n\t\td3.select(\"#iri-converter-button\").attr(\"disabled\", false);\r\n\t\td3.select(\"#iri-converter-form\").on(\"submit\")();\r\n\t};\r\n\r\n    ontologyMenu.clearDetailInformation=function(){\r\n        var bpContainer=d3.select(\"#bulletPoint_container\");\r\n        var htmlCollection = bpContainer.node().children;\r\n        var numEntries = htmlCollection.length;\r\n\r\n        for (var i = 0; i < numEntries; i++) {\r\n            htmlCollection[0].remove();\r\n        }\r\n\t};\r\n    ontologyMenu.append_message=function(msg){\r\n        // forward call\r\n        append_message(msg);\r\n    };\r\n    function append_message(msg){\r\n        var bpContainer=d3.select(\"#bulletPoint_container\");\r\n        var div=bpContainer.append(\"div\");\r\n\t\tdiv.node().innerHTML=msg;\r\n        loadingModule.scrollDownDetails();\r\n    }\r\n\tontologyMenu.append_message_toLastBulletPoint=function(msg){\r\n\t\t// forward call\r\n\t\tappend_message_toLastBulletPoint(msg);\r\n\t};\r\n\r\n    ontologyMenu.append_bulletPoint=function(msg){\r\n        // forward call\r\n        append_bulletPoint(msg);\r\n    };\r\n    function append_message_toLastBulletPoint(msg){\r\n        var bpContainer=d3.select(\"#bulletPoint_container\");\r\n        var htmlCollection = bpContainer.node().getElementsByTagName(\"LI\");\r\n        var lastItem= htmlCollection.length-1;\r\n        if (lastItem>=0){\r\n            var oldText=htmlCollection[lastItem].innerHTML;\r\n            htmlCollection[lastItem].innerHTML=oldText+msg;\r\n        }\r\n        loadingModule.scrollDownDetails();\r\n    }\r\n\r\n    function append_bulletPoint(msg){\r\n        var bp_container=d3.select(\"#bulletPoint_container\");\r\n        var bp=bp_container.append(\"li\");\r\n        bp.node().innerHTML=msg;\r\n        d3.select(\"#currentLoadingStep\").node().innerHTML=msg;\r\n        loadingModule.scrollDownDetails();\r\n    }\r\n\r\n\r\n\tfunction setupConverterButtons() {\r\n\t\tvar iriConverterButton = d3.select(\"#iri-converter-button\");\r\n\t\tvar iriConverterInput = d3.select(\"#iri-converter-input\");\r\n\r\n\t\tiriConverterInput.on(\"input\", function () {\r\n\t\t\tkeepOntologySelectionOpenShortly();\r\n\r\n\t\t\tvar inputIsEmpty = iriConverterInput.property(\"value\") === \"\";\r\n\t\t\tiriConverterButton.attr(\"disabled\", inputIsEmpty || undefined);\r\n\t\t}).on(\"click\", function () {\r\n\t\t\tkeepOntologySelectionOpenShortly();\r\n\t\t});\r\n\r\n\t\td3.select(\"#iri-converter-form\").on(\"submit\", function () {\r\n\t\t\tvar inputName=iriConverterInput.property(\"value\");\r\n\r\n\t\t\t// remove first spaces\r\n\t\t\tvar clearedName=inputName.replace(/%20/g,\" \");\r\n\t\t\twhile (clearedName.beginsWith(\" \")){\r\n\t\t\t\tclearedName=clearedName.substr(1,clearedName.length);\r\n\t\t\t}\r\n\t\t\t// remove ending spaces\r\n\t\t\twhile (clearedName.endsWith(\" \")){\r\n\t\t\t\tclearedName=clearedName.substr(0,clearedName.length-1);\r\n\t\t\t}\r\n\t\t\t// check if iri is actually an url for a json file (ends with .json)\r\n\t\t\t// create lowercase filenames;\r\n\t\t\tinputName=clearedName;\r\n\t\t\tvar lc_iri=inputName.toLowerCase();\r\n\t\t\tif (lc_iri.endsWith(\".json\")) {\r\n\t\t\t\tlocation.hash = \"url=\" + inputName;\r\n\t\t\t\tiriConverterInput.property(\"value\", \"\");\r\n\t\t\t\tiriConverterInput.on(\"input\")();\r\n\t\t\t} else {\r\n\t\t\t\tlocation.hash = \"iri=\" + inputName;\r\n\t\t\t\tiriConverterInput.property(\"value\", \"\");\r\n\t\t\t\tiriConverterInput.on(\"input\")();\r\n\t\t\t}\r\n\t\t\td3.event.preventDefault();\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction setupUploadButton() {\r\n\t\tvar input = d3.select(\"#file-converter-input\"),\r\n\t\t\tinputLabel = d3.select(\"#file-converter-label\"),\r\n\t\t\tuploadButton = d3.select(\"#file-converter-button\");\r\n\r\n\t\tinput.on(\"change\", function () {\r\n\t\t\tvar selectedFiles = input.property(\"files\");\r\n\t\t\tif (selectedFiles.length <= 0) {\r\n\t\t\t\tinputLabel.text(\"Select ontology file\");\r\n\t\t\t\tuploadButton.property(\"disabled\", true);\r\n\t\t\t} else {\r\n\t\t\t\tinputLabel.text(selectedFiles[0].name);\r\n                fileToLoad=selectedFiles[0].name;\r\n\t\t\t\tuploadButton.property(\"disabled\", false);\r\n\t\t\t\tuploadButton.node().click();\r\n\t\t\t\t// close menu;\r\n                graph.options().navigationMenu().hideAllMenus();\r\n            }\r\n\t\t});\r\n\r\n\t\tuploadButton.on(\"click\", function () {\r\n\t\t\tvar selectedFile = input.property(\"files\")[0];\r\n\t\t\tif (!selectedFile) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar newHashParameter = \"file=\" + selectedFile.name;\r\n\t\t\t// Trigger the reupload manually, because the iri is not changing\r\n\t\t\tif (location.hash === \"#\" + newHashParameter) {\r\n\t\t\t\tloadingModule.parseUrlAndLoadOntology();\r\n\t\t\t} else {\r\n\t\t\t\tlocation.hash = newHashParameter;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction setLoadingStatusInfo(message){\r\n\t\t// check if there is a owl2vowl li item;\r\n\t\tvar o2vConverterContainer=d3.select(\"#o2vConverterContainer\");\r\n\t\tif (!o2vConverterContainer.node()){\r\n            var bp_container=d3.select(\"#bulletPoint_container\");\r\n            var div=bp_container.append(\"div\");\r\n\t\t\to2vConverterContainer=div.append(\"ul\");\r\n\t\t\to2vConverterContainer.attr(\"id\",\"o2vConverterContainer\");\r\n\t\t\to2vConverterContainer.style(\"margin-left\",\"-25px\");\r\n\t\t}\r\n\t\t// clear o2vConverterContainer;\r\n        var htmlCollection = o2vConverterContainer.node().children;\r\n\t\tvar numEntries = htmlCollection.length;\r\n        for (var i = 0; i < numEntries; i++) {\r\n                htmlCollection[0].remove();\r\n        }\r\n\t\t// split tokens provided by o2v messages\r\n\t\tvar tokens=message.split(\"* \");\r\n        var liForToken;\r\n\t\tfor (var t=0;t<tokens.length;t++) {\r\n            var tokenMessage = tokens[t];\r\n            // create li for tokens;\r\n            if (tokenMessage.length > 0) {\r\n                liForToken = o2vConverterContainer.append(\"li\");\r\n            \tliForToken.attr(\"type\", \"disc\");\r\n            \tliForToken.node().innerHTML = tokenMessage.replace(/\\n/g,\"<br>\");\r\n        \t}\r\n\t\t}\r\n\t\tif (liForToken)\r\n\t\t\tliForToken.node().innerHTML+=\"<br>\";\r\n\r\n        loadingModule.scrollDownDetails();\r\n\t}\r\n\r\n\tontologyMenu.setLoadingStatusInfo=function(message){\r\n\t\t// forward call\r\n        setLoadingStatusInfo(message);\r\n    };\r\n\r\n    function getLoadingStatusOnceCallBacked(callback,parameter){\r\n        d3.xhr(\"loadingStatus?sessionId=\"+conversion_sessionId, \"application/text\", function (error, request) {\r\n            if (error){\r\n                console.log(\"ontologyMenu getLoadingStatusOnceCallBacked throws error\");\r\n                console.log(\"---------Error -----------\");\r\n                console.log(error);\r\n                console.log(\"---------Request -----------\");\r\n                console.log(request);\r\n            }\r\n            setLoadingStatusInfo(request.responseText);\r\n            callback(parameter);\r\n        });\r\n    }\r\n\r\n\tfunction getLoadingStatusTimeLooped(){\r\n        d3.xhr(\"loadingStatus?sessionId=\"+conversion_sessionId, \"application/text\", function (error, request) {\r\n        \tif (error){\r\n                console.log(\"ontologyMenu getLoadingStatusTimeLooped throws error\");\r\n                console.log(\"---------Error -----------\");\r\n                console.log(error);\r\n                console.log(\"---------Request -----------\");\r\n                console.log(request);\r\n\t\t\t}\r\n            if (stopTimer===false) {\r\n                setLoadingStatusInfo(request.responseText);\r\n                timedLoadingStatusLogger();\r\n            }\r\n    \t});\r\n\t}\r\n\r\n\tfunction timedLoadingStatusLogger(){\r\n        clearTimeout(loadingStatusTimer);\r\n        if (stopTimer===false) {\r\n            loadingStatusTimer = setTimeout(function () {\r\n                getLoadingStatusTimeLooped();\r\n            }, 1000);\r\n        }\r\n\t}\r\n\r\n\tfunction callbackUpdateLoadingMessage(msg){\r\n        d3.xhr(\"loadingStatus\", \"application/text\", function (error, request) {\r\n        \tif (request!==undefined){\r\n    \t        setLoadingStatusInfo(request.responseText+ \"<br>\"+msg);\r\n        \t}else{\r\n        \t\tappend_message(msg);\r\n\t\t\t}\r\n        });\r\n\t}\r\n\r\n\tontologyMenu.setConversionID=function (id){\r\n\t\tconversion_sessionId=id;\r\n\t};\r\n\r\n\tontologyMenu.callbackLoad_Ontology_FromIRI=function(parameter){\r\n        var relativePath=parameter[0];\r\n        var ontoName=parameter[1];\r\n        var localThreadId=parameter[2];\r\n        stopTimer=false;\r\n        timedLoadingStatusLogger();\r\n        d3.xhr(relativePath, \"application/json\", function (error, request) {\r\n            var loadingSuccessful = !error;\r\n            // check if error occurred or responseText is empty\r\n            if ((error!==null && error.status === 500) || (request && request.responseText.length===0)) {\r\n     \t\t\tclearTimeout(loadingStatusTimer);\r\n                stopTimer=true;\r\n                getLoadingStatusOnceCallBacked(callbackFromIRI_URL_ERROR,[error,request,localThreadId]);\r\n            }\r\n            var jsonText;\r\n            if (loadingSuccessful) {\r\n                clearTimeout(loadingStatusTimer);\r\n                stopTimer=true;\r\n                jsonText = request.responseText;\r\n                getLoadingStatusOnceCallBacked(callbackFromIRI_Success,[jsonText,ontoName,localThreadId]);\r\n            }\r\n        });\r\n\t};\r\n\r\n\tfunction callbackFromIRI_Success(parameter){\r\n        var local_conversionId=parameter[2];\r\n        if (local_conversionId!==conversion_sessionId){\r\n            console.log(\"The conversion process for file:\"+parameter[1]+\" has been canceled!\");\r\n            ontologyMenu.conversionFinished(local_conversionId);\r\n            return;\r\n        }\r\n        loadingModule.loadFromOWL2VOWL(parameter[0],parameter[1]);\r\n        ontologyMenu.conversionFinished();\r\n\r\n    }\r\n\r\n    ontologyMenu.getConversionId=function(){return conversion_sessionId;};\r\n\r\n\tontologyMenu.callbackLoad_JSON_FromURL=function(parameter){\r\n\t\tvar relativePath=parameter[0];\r\n\t\tvar ontoName=parameter[1];\r\n\t\tvar local_conversionId=parameter[2];\r\n        stopTimer=false;\r\n        timedLoadingStatusLogger();\r\n        d3.xhr(relativePath, \"application/json\", function (error, request) {\r\n            var loadingSuccessful = !error;\r\n            // check if error occurred or responseText is empty\r\n            if ((error!==null && error.status === 500) || (request && request.responseText.length===0)) {\r\n                clearTimeout(loadingStatusTimer);\r\n                stopTimer=true;\r\n                loadingSuccessful=false;\r\n                console.log(request);\r\n                console.log(request.responseText.length);\r\n                getLoadingStatusOnceCallBacked(callbackFromJSON_URL_ERROR,[error,request,local_conversionId]);\r\n            }\r\n            if (loadingSuccessful) {\r\n                clearTimeout(loadingStatusTimer);\r\n                stopTimer=true;\r\n                var jsonText = request.responseText;\r\n                getLoadingStatusOnceCallBacked(callbackFromJSON_Success,[jsonText,ontoName,local_conversionId]);\r\n            }\r\n        });\r\n\t};\r\n\r\n\tfunction callbackFromJSON_Success(parameter){\r\n        var local_conversionId=parameter[2];\r\n        if (local_conversionId!==conversion_sessionId){\r\n            console.log(\"The conversion process for file:\"+parameter[1]+\" has been canceled!\");\r\n            return;\r\n        }\r\n        loadingModule.loadFromOWL2VOWL(parameter[0],parameter[1]);\r\n\t}\r\n\r\n\tfunction callbackFromIRI_URL_ERROR(parameter){\r\n        var error=parameter[0];\r\n        var request=parameter[1];\r\n        var local_conversionId=parameter[2];\r\n        if (local_conversionId!==conversion_sessionId){\r\n            console.log(\"This thread has been canceled!!\");\r\n            ontologyMenu.conversionFinished(local_conversionId);\r\n            return;\r\n        }\r\n        callbackUpdateLoadingMessage(\"<br><span style='color:red'> Failed to convert the file.</span> \"+\r\n            \" Ontology could not be loaded.<br>Is it a valid OWL ontology? Please check with <a target=\\\"_blank\\\"\" +\r\n            \"href=\\\"http://visualdataweb.de/validator/\\\">OWL Validator</a>\");\r\n\r\n        if (error!==null && error.status === 500){\r\n            append_message(\"<span style='color:red'>Could not find ontology  at the URL</span>\");\r\n        }\r\n        if (request && request.responseText.length===0){\r\n            append_message(\"<span style='color:red'>Received empty graph</span>\");\r\n        }\r\n        graph.handleOnLoadingError();\r\n        ontologyMenu.conversionFinished();\r\n    }\r\n\tfunction callbackFromJSON_URL_ERROR(parameter){\r\n\r\n\t\tvar error=parameter[0];\r\n\t\tvar request=parameter[1];\r\n\t\tvar local_conversionId=parameter[2];\r\n\t\tif (local_conversionId!==conversion_sessionId){\r\n            console.log(\"The loading process of JSON_URL has been canceled!\");\r\n\t\t\treturn;\r\n\t\t}\r\n        // callbackUpdateLoadingMessage(\"<br> <span style='color:red'> Failed to convert the file.</span> \"+\r\n        //     \"Ontology could not be loaded.<br>Is it a valid OWL ontology? Please check with <a target=\\\"_blank\\\"\" +\r\n        //     \"href=\\\"http://visualdataweb.de/validator/\\\">OWL Validator</a>\");\r\n        if (error!==null && error.status === 500){\r\n            append_message(\"<span style='color:red'>Could not find json at the URL</span>\");\r\n        }\r\n        if (request && request.responseText.length===0){\r\n            append_message(\"<span style='color:red'>Received empty graph</span>\");\r\n        }\r\n\r\n        graph.handleOnLoadingError();\r\n        ontologyMenu.conversionFinished();\r\n\t}\r\n\r\n\tontologyMenu.callbackLoadFromOntology=function(selectedFile,filename,local_threadId){\r\n    \tcallbackLoadFromOntology(selectedFile,filename,local_threadId);\r\n\t};\r\n\r\n    function callbackLoadFromOntology(selectedFile, filename, local_threadId){\r\n    \tstopTimer=false;\r\n        timedLoadingStatusLogger();\r\n\r\n        var formData = new FormData();\r\n        formData.append(\"ontology\" , selectedFile);\r\n        formData.append(\"sessionId\", local_threadId);\r\n        var xhr = new XMLHttpRequest();\r\n\r\n        xhr.open(\"POST\", \"convert\", true);\r\n        xhr.onload = function () {\r\n            clearTimeout(loadingStatusTimer);\r\n            stopTimer=true;\r\n            getLoadingStatusOnceCallBacked(callbackForConvert,[xhr, filename,local_threadId]);\r\n        };\r\n        timedLoadingStatusLogger();\r\n        xhr.send(formData);\r\n\t}\r\n\r\n\tfunction callbackForConvert(parameter){\r\n    \tvar xhr=parameter[0];\r\n    \tvar filename=parameter[1];\r\n    \tvar local_threadId=parameter[2];\r\n    \tif (local_threadId!==conversion_sessionId){\r\n    \t\tconsole.log(\"The conversion process for file:\"+filename+\" has been canceled!\");\r\n            ontologyMenu.conversionFinished(local_threadId);\r\n    \t\treturn;\r\n\t\t}\r\n        if (xhr.status === 200) {\r\n            loadingModule.loadFromOWL2VOWL(xhr.responseText,filename);\r\n            ontologyMenu.conversionFinished();\r\n        } else {\r\n            callbackUpdateLoadingMessage(\"Failed to convert the file. \"+\r\n                \"Ontology could not be loaded.<br>Is it a valid OWL ontology? Please check with <a target=\\\"_blank\\\"\" +\r\n                \"href=\\\"http://visualdataweb.de/validator/\\\">OWL Validator</a>\");\r\n            graph.handleOnLoadingError();\r\n            ontologyMenu.conversionFinished();\r\n\t\t}\r\n\t}\r\n\r\n    ontologyMenu.conversionFinished=function(id){\r\n\t\tvar local_id=conversion_sessionId;\r\n\t\tif (id){\r\n            local_id=id;\r\n\t\t}\r\n        d3.xhr(\"conversionDone?sessionId=\"+local_id, \"application/text\", function (error, request) {\r\n            if (error){\r\n                console.log(\"ontologyMenu conversionFinished throws error\");\r\n                console.log(\"---------Error -----------\");\r\n                console.log(error);\r\n                console.log(\"---------Request -----------\");\r\n                console.log(request);\r\n            }\r\n        });\r\n\t};\r\n\r\n\tfunction keepOntologySelectionOpenShortly() {\r\n\t\t// Events in the menu should not be considered\r\n\t\tvar ontologySelection = d3.select(\"#select .toolTipMenu\");\r\n\t\tontologySelection.on(\"click\", function () {\r\n\t\t\td3.event.stopPropagation();\r\n\t\t}).on(\"keydown\", function () {\r\n\t\t\td3.event.stopPropagation();\r\n\t\t});\r\n\r\n\t\tontologySelection.style(\"display\", \"block\");\r\n\r\n\t\tfunction disableKeepingOpen() {\r\n\t\t\tontologySelection.style(\"display\", undefined);\r\n\r\n\t\t\tclearTimeout(ontologyMenuTimeout);\r\n\t\t\td3.select(window).on(\"click\", undefined).on(\"keydown\", undefined);\r\n\t\t\tontologySelection.on(\"mouseover\", undefined);\r\n\t\t}\r\n\r\n\t\t// Clear the timeout to handle fast calls of this function\r\n\t\tclearTimeout(ontologyMenuTimeout);\r\n\t\tontologyMenuTimeout = setTimeout(function () {\r\n\t\t\tdisableKeepingOpen();\r\n\t\t}, 3000);\r\n\r\n\t\t// Disable forced open selection on interaction\r\n\t\td3.select(window).on(\"click\", function () {\r\n\t\t\tdisableKeepingOpen();\r\n\t\t}).on(\"keydown\", function () {\r\n\t\t\tdisableKeepingOpen();\r\n\t\t});\r\n\r\n\t\tontologySelection.on(\"mouseover\", function () {\r\n\t\t\tdisableKeepingOpen();\r\n\t\t});\r\n\t}\r\n\r\n    ontologyMenu.showLoadingStatus=function (visible){\r\n\t\tif (visible===true){\r\n\t\t\tdisplayLoadingIndicators();\r\n\t\t}\r\n\t\telse {\r\n\t\t\thideLoadingInformations();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction displayLoadingIndicators() {\r\n        d3.select(\"#layoutLoadingProgressBarContainer\").classed(\"hidden\",false);\r\n        loadingInfo.classed(\"hidden\",false);\r\n\t\tloadingProgress.classed(\"hidden\", false);\r\n\t}\r\n\r\n\tfunction hideLoadingInformations() {\r\n        loadingInfo.classed(\"hidden\",true);\r\n\t}\r\n\r\n\treturn ontologyMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/ontologyMenu.js\n// module id = 323\n// module chunks = 1","var toString = require('./toString'),\n    unescapeHtmlChar = require('./_unescapeHtmlChar');\n\n/** Used to match HTML entities and HTML characters. */\nvar reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n    reHasEscapedHtml = RegExp(reEscapedHtml.source);\n\n/**\n * The inverse of `_.escape`; this method converts the HTML entities\n * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n * their corresponding characters.\n *\n * **Note:** No other HTML entities are unescaped. To unescape additional\n * HTML entities use a third-party library like [_he_](https://mths.be/he).\n *\n * @static\n * @memberOf _\n * @since 0.6.0\n * @category String\n * @param {string} [string=''] The string to unescape.\n * @returns {string} Returns the unescaped string.\n * @example\n *\n * _.unescape('fred, barney, &amp; pebbles');\n * // => 'fred, barney, & pebbles'\n */\nfunction unescape(string) {\n  string = toString(string);\n  return (string && reHasEscapedHtml.test(string))\n    ? string.replace(reEscapedHtml, unescapeHtmlChar)\n    : string;\n}\n\nmodule.exports = unescape;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/unescape.js\n// module id = 324\n// module chunks = 1","var basePropertyOf = require('./_basePropertyOf');\n\n/** Used to map HTML entities to characters. */\nvar htmlUnescapes = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&quot;': '\"',\n  '&#39;': \"'\"\n};\n\n/**\n * Used by `_.unescape` to convert HTML entities to characters.\n *\n * @private\n * @param {string} chr The matched character to unescape.\n * @returns {string} Returns the unescaped character.\n */\nvar unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\nmodule.exports = unescapeHtmlChar;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_unescapeHtmlChar.js\n// module id = 325\n// module chunks = 1","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = basePropertyOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_basePropertyOf.js\n// module id = 326\n// module chunks = 1","/**\r\n * Contains the logic for the pause and resume button.\r\n *\r\n * @param graph the associated webvowl graph\r\n * @returns {{}}\r\n */\r\nmodule.exports = function (graph) {\r\n\r\n\tvar pauseMenu = {},\r\n\t\tpauseButton;\r\n\r\n\r\n\t/**\r\n\t * Adds the pause button to the website.\r\n\t */\r\n\tpauseMenu.setup = function () {\r\n\t\tvar menuEntry = d3.select(\"#pauseOption\");\r\n\t\tmenuEntry.on(\"mouseover\", function () {\r\n\t\t\tvar searchMenu = graph.options().searchMenu();\r\n\t\t\tsearchMenu.hideSearchEntries();\r\n\t\t});\r\n\t\tpauseButton = d3.select(\"#pause-button\")\r\n\t\t\t.datum({paused: false})\r\n\t\t\t.on(\"click\", function (d) {\r\n\t\t\t\tgraph.paused(!d.paused);\r\n\t\t\t\td.paused = !d.paused;\r\n\t\t\t\tupdatePauseButton();\r\n\t\t\t\tpauseButton.classed(\"highlighted\", d.paused);\r\n\t\t\t});\r\n\t\t// Set these properties the first time manually\r\n\t\tupdatePauseButton();\r\n\t};\r\n\r\n\tpauseMenu.setPauseValue = function (value) {\r\n\t\tpauseButton.datum().paused = value;\r\n\t\tgraph.paused(value);\r\n\t\tpauseButton.classed(\"highlighted\", value);\r\n\t\tupdatePauseButton();\r\n\t};\r\n\r\n\tfunction updatePauseButton() {\r\n\t\tupdatePauseButtonClass();\r\n\t\tupdatePauseButtonText();\r\n\t}\r\n\r\n\tfunction updatePauseButtonClass() {\r\n\t\tpauseButton.classed(\"paused\", function (d) {\r\n\t\t\treturn d.paused;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction updatePauseButtonText() {\r\n\t\tif (pauseButton.datum().paused) {\r\n\t\t\tpauseButton.text(\"动态\");\r\n\t\t} else {\r\n\t\t\tpauseButton.text(\"静态\");\r\n\t\t}\r\n\t}\r\n\r\n\tpauseMenu.reset = function () {\r\n\t\t// resuming\r\n\t\tpauseMenu.setPauseValue(false);\r\n\t};\r\n\r\n\r\n\treturn pauseMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/pauseMenu.js\n// module id = 327\n// module chunks = 1","/**\r\n * Contains the logic for the reset button.\r\n *\r\n * @param graph the associated webvowl graph\r\n * @returns {{}}\r\n */\r\nmodule.exports = function (graph) {\r\n\r\n\tvar resetMenu = {},\r\n\t\toptions = graph.graphOptions(),\r\n\t\tresettableModules,\r\n\t\tuntouchedOptions = webvowl.options();\r\n\r\n\r\n\t/**\r\n\t * Adds the reset button to the website.\r\n\t * @param _resettableModules modules that can be resetted\r\n\t */\r\n\tresetMenu.setup = function (_resettableModules) {\r\n\t\tresettableModules = _resettableModules;\r\n\t\td3.select(\"#reset-button\").on(\"click\", resetGraph);\r\n\t\tvar menuEntry= d3.select(\"#resetOption\");\r\n\t\tmenuEntry.on(\"mouseover\",function(){\r\n\t\t\tvar searchMenu=graph.options().searchMenu();\r\n\t\t\tsearchMenu.hideSearchEntries();\r\n\t\t});\r\n\t};\r\n\r\n\tfunction resetGraph() {\r\n\t\tgraph.resetSearchHighlight();\r\n\t\tgraph.options().searchMenu().clearText();\r\n\t\toptions.classDistance(untouchedOptions.classDistance());\r\n\t\toptions.datatypeDistance(untouchedOptions.datatypeDistance());\r\n\t\toptions.charge(untouchedOptions.charge());\r\n\t\toptions.gravity(untouchedOptions.gravity());\r\n\t\toptions.linkStrength(untouchedOptions.linkStrength());\r\n\t\tgraph.reset();\r\n\r\n\t\tresettableModules.forEach(function (module) {\r\n\t\t\tmodule.reset();\r\n\t\t});\r\n\r\n\t\tgraph.updateStyle();\r\n\t}\r\n\r\n\r\n\treturn resetMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/resetMenu.js\n// module id = 328\n// module chunks = 1","/**\r\n * Contains the search \"engine\"\r\n *\r\n * @param graph the associated webvowl graph\r\n * @returns {{}}\r\n */\r\nmodule.exports = function (graph) {\r\n\tvar searchMenu = {},\r\n\t\tdictionary = [],\r\n\t\tentryNames = [],\r\n\t\tsearchLineEdit,\r\n\t\tmergedStringsList,\r\n\t\tmergedIdList,\r\n\t\tmaxEntries = 6,\r\n\t\tdictionaryUpdateRequired = true,\r\n\t\tlabelDictionary,\r\n\t\tinputText,\r\n\t\tviewStatusOfSearchEntries = false;\r\n\r\n\r\n\t\tvar c_locate=d3.select(\"#locateSearchResult\");\r\n\t\tvar c_search=d3.select(\"#c_search\");\r\n\t\tvar m_search=d3.select(\"#m_search\"); // << dropdown container;\r\n\r\n\r\n\tString.prototype.beginsWith = function (string) {\r\n\t\treturn(this.indexOf(string) === 0);\r\n\t};\r\n\r\n\tsearchMenu.requestDictionaryUpdate = function () {\r\n\t\tdictionaryUpdateRequired = true;\r\n\t\t// clear possible pre searched entries\r\n\t\tvar htmlCollection = m_search.node().children;\r\n\t\tvar numEntries = htmlCollection.length;\r\n\r\n\t\tfor (var i = 0; i < numEntries; i++)\r\n\t\t\thtmlCollection[0].remove();\r\n\t\tsearchLineEdit.node().value = \"\";\r\n\t};\r\n\r\n\r\n\tfunction updateSearchDictionary() {\r\n\t\tlabelDictionary = graph.getUpdateDictionary();\r\n\t\tdictionaryUpdateRequired = false;\r\n\t\tdictionary = [];\r\n\t\tentryNames = [];\r\n\t\tvar idList = [];\r\n\t\tvar stringList = [];\r\n\r\n\t\tvar i;\r\n\t\tfor (i = 0; i < labelDictionary.length; i++) {\r\n\t\t\tvar lEntry = labelDictionary[i].labelForCurrentLanguage();\r\n\t\t\tidList.push(labelDictionary[i].id());\r\n\t\t\tstringList.push(lEntry);\r\n\t\t\t// add all equivalents to the search space;\r\n\t\t\tif (labelDictionary[i].equivalents && labelDictionary[i].equivalents().length>0){\r\n\t\t\t\tvar eqs=labelDictionary[i].equivalentsString();\r\n\t\t\t\tvar eqsLabels=eqs.split(\", \");\r\n\t\t\t\tfor (var e=0;e<eqsLabels.length;e++){\r\n                    idList.push(labelDictionary[i].id());\r\n                    stringList.push(eqsLabels[e]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmergedStringsList = [];\r\n\t\tmergedIdList = [];\r\n\t\tvar indexInStringList=-1;\r\n\t\tvar currentString;\r\n\t\tvar currentObjectId;\r\n\r\n\t\tfor (i = 0; i < stringList.length; i++) {\r\n\t\t\tif (i === 0) {\r\n\t\t\t\t// just add the elements\r\n\t\t\t\tmergedStringsList.push(stringList[i]);\r\n\t\t\t\tmergedIdList.push([]);\r\n\t\t\t\tmergedIdList[0].push(idList[i]);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcurrentString = stringList[i];\r\n\t\t\t\tcurrentObjectId = idList[i];\r\n\t\t\t\tindexInStringList = mergedStringsList.indexOf(currentString);\r\n\t\t\t}\r\n\t\t\tif (indexInStringList === -1) {\r\n\t\t\t\tmergedStringsList.push(stringList[i]);\r\n\t\t\t\tmergedIdList.push([]);\r\n\t\t\t\tvar lastEntry = mergedIdList.length;\r\n\t\t\t\tmergedIdList[lastEntry - 1].push(currentObjectId);\r\n\t\t\t} else {\r\n\t\t\t\tmergedIdList[indexInStringList].push(currentObjectId);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < mergedStringsList.length; i++) {\r\n\t\t\tvar aString = mergedStringsList[i];\r\n\t\t\tvar correspondingIdList = mergedIdList[i];\r\n\t\t\tvar idListResult = \"[ \";\r\n\t\t\tfor (var j = 0; j < correspondingIdList.length; j++) {\r\n\t\t\t\tidListResult = idListResult + correspondingIdList[j].toString();\r\n\t\t\t\tidListResult = idListResult + \", \";\r\n\t\t\t}\r\n\t\t\tidListResult = idListResult.substring(0, idListResult.length - 2);\r\n\t\t\tidListResult = idListResult + \" ]\";\r\n\r\n\t\t\tvar firstVal=correspondingIdList[0];\r\n\r\n\t\t\tif (correspondingIdList.length > 1 ){\r\n\t\t\t\t// we have several ids for a search entry;\r\n\t\t\t\t// we check if they are allSame meaning that we are searching for an equivalent property;\r\n\t\t\t\tvar allSame=true;\r\n\t\t\t\t// using simple for-loop since id list should be small\r\n\t\t\t\tfor (var x=0;x<correspondingIdList.length;x++){\r\n\t\t\t\t\tif (correspondingIdList[x]!==firstVal){\r\n\t\t\t\t\t\tallSame=false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (allSame===true)\r\n                    dictionary.push(aString);\r\n\t\t\t\telse\r\n                dictionary.push(aString + \" (\" + correspondingIdList.length + \")\");\r\n            }\r\n\t\t\telse\r\n\t\t\t\tdictionary.push(aString);\r\n\t\t\tentryNames.push(aString);\r\n\t\t}\r\n\t}\r\n\r\n\tsearchMenu.setup = function () {\r\n\t\t// clear dictionary;\r\n\t\tdictionary = [];\r\n\t\tsearchLineEdit = d3.select(\"#search-input-text\");\r\n\t\tsearchLineEdit.on(\"input\", userInput);\r\n\t\tsearchLineEdit.on(\"keydown\", userNavigation);\r\n\t\tsearchLineEdit.on(\"click\", toggleSearchEntryView);\r\n\t\tsearchLineEdit.on(\"mouseover\", hoverSearchEntryView);\r\n\r\n        c_locate.on(\"click\",function(){\r\n            graph.locateSearchResult();\r\n        });\r\n\r\n        c_locate.on(\"mouseover\",function(){\r\n            searchMenu.hideSearchEntries();\r\n        });\r\n\r\n    };\r\n\r\n\tfunction hoverSearchEntryView() {\r\n\t\tsearchMenu.showSearchEntries();\r\n\t}\r\n\r\n\tfunction toggleSearchEntryView() {\r\n\t\tif (viewStatusOfSearchEntries) {\r\n\t\t\tsearchMenu.hideSearchEntries();\r\n\t\t} else {\r\n\t\t\tsearchMenu.showSearchEntries();\r\n\t\t}\r\n\t}\r\n\r\n\tsearchMenu.hideSearchEntries = function () {\r\n        m_search.style(\"display\", \"none\");\r\n\t\tviewStatusOfSearchEntries = false;\r\n\t};\r\n\r\n\tsearchMenu.showSearchEntries = function () {\r\n        m_search.style(\"display\", \"block\");\r\n\t\tviewStatusOfSearchEntries = true;\r\n\t};\r\n\r\n\tfunction ValidURL(str) {\r\n\t\tvar urlregex = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/;\r\n\t\treturn urlregex.test(str);\r\n\r\n\t}\r\n\r\n\r\n\tfunction userNavigation() {\r\n\t\tif (dictionaryUpdateRequired) {\r\n\t\t\tupdateSearchDictionary();\r\n\t\t}\r\n\r\n\t\tvar htmlCollection = m_search.node().children;\r\n\t\tvar numEntries = htmlCollection.length;\r\n\r\n\r\n\t\tvar move = 0;\r\n\t\tvar i;\r\n\t\tvar selectedEntry = -1;\r\n\t\tfor (i = 0; i < numEntries; i++) {\r\n\t\t\tvar atr = htmlCollection[i].getAttribute('class');\r\n\t\t\tif (atr === \"dbEntrySelected\") {\r\n\t\t\t\tselectedEntry = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (d3.event.keyCode === 13) {\r\n\t\t\tif (selectedEntry >= 0 && selectedEntry < numEntries) {\r\n\t\t\t\t// simulate onClick event\r\n\t\t\t\thtmlCollection[selectedEntry].onclick();\r\n\t\t\t\tsearchMenu.hideSearchEntries();\r\n\t\t\t}\r\n\t\t\telse if (numEntries===0){\r\n\t\t\t\tinputText = searchLineEdit.node().value;\r\n\t\t\t\t// check if input text ends or begins with with space\r\n\t\t\t\t// remove first spaces\r\n\t\t\t\tvar clearedText=inputText.replace(/%20/g,\" \");\r\n\t\t\t\twhile (clearedText.beginsWith(\" \")){\r\n\t\t\t\t\tclearedText=clearedText.substr(1,clearedText.length);\r\n\t\t\t\t}\r\n\t\t\t\t// remove ending spaces\r\n\t\t\t\twhile (clearedText.endsWith(\" \")){\r\n\t\t\t\t\tclearedText=clearedText.substr(0,clearedText.length-1);\r\n\t\t\t\t}\r\n\t\t\t\tvar iri=clearedText.replace(/ /g,\"%20\");\r\n\r\n\t\t\t\tvar valid=ValidURL(iri);\r\n\t\t\t\t// validate url:\r\n\t\t\t\tif (valid){\r\n\t\t\t\t\tvar ontM=graph.options().ontologyMenu();\r\n\t\t\t\t\tontM.setIriText(iri);\r\n\t\t\t\t\tsearchLineEdit.node().value=\"\";\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tconsole.log(iri+\" is not a valid URL!\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (d3.event.keyCode === 38) {\r\n\t\t\tmove = -1;\r\n\t\t\tsearchMenu.showSearchEntries();\r\n\t\t}\r\n\t\tif (d3.event.keyCode === 40) {\r\n\t\t\tmove = +1;\r\n\t\t\tsearchMenu.showSearchEntries();\r\n\t\t}\r\n\r\n\t\tvar newSelection = selectedEntry + move;\r\n\t\tif (newSelection !== selectedEntry) {\r\n\r\n\t\t\tif (newSelection < 0 && selectedEntry <= 0) {\r\n\t\t\t\thtmlCollection[0].setAttribute('class', \"dbEntrySelected\");\r\n\t\t\t}\r\n\r\n\t\t\tif (newSelection >= numEntries) {\r\n\t\t\t\thtmlCollection[selectedEntry].setAttribute('class', \"dbEntrySelected\");\r\n\t\t\t}\r\n\t\t\tif (newSelection >= 0 && newSelection < numEntries) {\r\n\t\t\t\thtmlCollection[newSelection].setAttribute('class', \"dbEntrySelected\");\r\n\t\t\t\tif (selectedEntry >= 0)\r\n\t\t\t\t\thtmlCollection[selectedEntry].setAttribute('class', \"dbEntry\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsearchMenu.getSearchString=function (){return searchLineEdit.node().value;};\r\n\tfunction handleAutoCompletion() {\r\n\t\t/**  pre condition: autoCompletion has already a valid text**/\r\n\t\tvar htmlCollection;\r\n\t\tvar numEntries;\r\n\t\tinputText = searchLineEdit.node().value;\r\n\r\n\t\tvar results = [];\r\n\t\tvar resultID = [];\r\n\t\tvar i;\r\n\t\tvar lc_text = inputText.toLowerCase();\r\n\t\tvar token;\r\n\r\n\t\tfor (i = 0; i < dictionary.length; i++) {\r\n\t\t\tvar tokenElement = dictionary[i];\r\n\t\t\tif (tokenElement === undefined){\r\n\t\t\t\t//@WORKAROUND : nodes with undefined labels are skipped\r\n\t\t\t\t//@FIX: these nodes are now not added to the dictionary\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\ttoken = dictionary[i].toLowerCase();\r\n\t\t\tif (token.indexOf(lc_text) > -1) {\r\n\t\t\t\tresults.push(dictionary[i]);\r\n\t\t\t\tresultID.push(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// update the entries in the gui\r\n\t\thtmlCollection = m_search.node().children;\r\n\t\tnumEntries = htmlCollection.length;\r\n\t\tfor (i = 0; i < numEntries; i++)\r\n\t\t\thtmlCollection[0].remove();\r\n\r\n\r\n\t\t// reorder the results and its ids\r\n\t\t//******************************************\r\n\t\t// create a copy of results;;\r\n\t\tvar copyRes = results;\r\n\t\tnumEntries = results.length;\r\n\t\tif (numEntries > maxEntries)\r\n\t\t\tnumEntries = maxEntries;\r\n\r\n\r\n\t\tvar newResults = [];\r\n\t\tvar newResultsIds = [];\r\n\r\n\t\tfor (i = 0; i < numEntries; i++) {\r\n\t\t\t// search for the best entry\r\n\t\t\tvar indexElement  = 1000000;\r\n\t\t\tvar lengthElement = 1000000;\r\n\t\t\tvar bestElement = -1;\r\n\t\t\tfor (var j = 0; j < copyRes.length; j++) {\r\n\t\t\t\ttoken = copyRes[j].toLowerCase();\r\n\t\t\t\tvar tIe = token.indexOf(lc_text);\r\n\t\t\t\tvar tLe = token.length;\r\n\t\t\t\tif (tIe > -1 && tIe <= indexElement && tLe <= lengthElement) {\r\n\t\t\t\t\tbestElement = j;\r\n\t\t\t\t\tindexElement = tIe;\r\n\t\t\t\t\tlengthElement = tLe;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnewResults.push(copyRes[bestElement]);\r\n\t\t\tnewResultsIds.push(resultID[bestElement]);\r\n\t\t\tcopyRes[bestElement] = \"\";\r\n\t\t}\r\n\r\n\t\t// add the results to the entry menu\r\n\t\t//******************************************\r\n\t\tnumEntries = results.length;\r\n\t\tif (numEntries > maxEntries)\r\n\t\t\tnumEntries = maxEntries;\r\n\r\n\t\tfor (i = 0; i < numEntries; i++) {\r\n\t\t\t//add results to the dropdown menu\r\n\t\t\tvar testEntry = document.createElement('li');\r\n\t\t\ttestEntry.setAttribute('elementID', newResultsIds[i]);\r\n\t\t\ttestEntry.onclick= handleClick (newResultsIds[i]);\r\n\t\t\ttestEntry.setAttribute('class', \"dbEntry\");\r\n\t\t\tvar createAText = document.createTextNode(newResults[i]);\r\n\t\t\ttestEntry.appendChild(createAText);\r\n            m_search.node().appendChild(testEntry);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction userInput() {\r\n\r\n\t\tif (dictionaryUpdateRequired) {\r\n\t\t\tupdateSearchDictionary();\r\n\t\t}\r\n\t\tgraph.resetSearchHighlight();\r\n\r\n\t\tif (dictionary.length === 0) {\r\n\t\t\tconsole.log(\"dictionary is empty\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar i;\r\n\t\tvar htmlCollection = m_search.node().children;\r\n\t\tvar numEntries = htmlCollection.length;\r\n\t\tinputText = searchLineEdit.node().value;\r\n\t\tc_locate.classed(\"highlighted\", false);\r\n        c_locate.node().title=\"Nothing to locate, enter search term.\";\r\n\t\tif (inputText.length === 0) {\r\n\t\t\tfor (i = 0; i < numEntries; i++)\r\n\t\t\t\thtmlCollection[0].remove();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// search in list\r\n\t\tvar results = [];\r\n\t\tvar resultID = [];\r\n\r\n\t\tvar lc_text = inputText.toLowerCase();\r\n\t\tvar token;\r\n\r\n\t\tfor (i = 0; i < dictionary.length; i++) {\r\n\t\t\tvar tokenElement = dictionary[i];\r\n\t\t\tif (tokenElement === undefined){\r\n\t\t\t\t//@WORKAROUND : nodes with undefined labels are skipped\r\n\t\t\t\t//@FIX: these nodes are now not added to the dictionary\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\ttoken = dictionary[i].toLowerCase();\r\n\t\t\tif (token.indexOf(lc_text) > -1) {\r\n\t\t\t\tresults.push(dictionary[i]);\r\n\t\t\t\tresultID.push(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear the list;\r\n\t\thtmlCollection = m_search.node().children;\r\n\t\tnumEntries = htmlCollection.length;\r\n\t\tfor (i = 0; i < numEntries; i++)\r\n\t\t\thtmlCollection[0].remove();\r\n\r\n\t\t// reorder the results and its ids\r\n\t\t//******************************************\r\n\t\t// create a copy of results;;\r\n\t\tvar copyRes = results;\r\n\t\tnumEntries = results.length;\r\n\t\tif (numEntries > maxEntries)\r\n\t\t\tnumEntries = maxEntries;\r\n\r\n\r\n\t\tvar newResults = [];\r\n\t\tvar newResultsIds = [];\r\n\r\n\t\tfor (i = 0; i < numEntries; i++) {\r\n\t\t\t// search for the best entry\r\n\t\t\tvar indexElement  = 100000000;\r\n\t\t\tvar lengthElement = 100000000;\r\n\t\t\tvar bestElement = -1;\r\n\t\t\tfor (var j = 0; j < copyRes.length; j++) {\r\n\t\t\t\ttoken = copyRes[j].toLowerCase();\r\n\t\t\t\tvar tIe = token.indexOf(lc_text);\r\n\t\t\t\tvar tLe = token.length;\r\n\t\t\t\tif (tIe > -1 && tIe <= indexElement && tLe <= lengthElement) {\r\n\t\t\t\t\tbestElement = j;\r\n\t\t\t\t\tindexElement = tIe;\r\n\t\t\t\t\tlengthElement = tLe;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnewResults.push(copyRes[bestElement]);\r\n\t\t\tnewResultsIds.push(resultID[bestElement]);\r\n\t\t\tcopyRes[bestElement] = \"\";\r\n\t\t}\r\n\r\n\t\t// add the results to the entry menu\r\n\t\t//******************************************\r\n\t\tfor (i = 0; i < numEntries; i++) {\r\n\t\t\t//add results to the dropdown menu\r\n\t\t\tvar testEntry;\r\n\t\t\ttestEntry= document.createElement('li');\r\n\t\t\ttestEntry.setAttribute('elementID', newResultsIds[i]);\r\n\t\t\ttestEntry.setAttribute('class', \"dbEntry\");\r\n\t\t\ttestEntry.onclick= handleClick (newResultsIds[i]);\r\n\t\t\tvar createAText = document.createTextNode(newResults[i]);\r\n\t\t\ttestEntry.appendChild(createAText);\r\n            m_search.node().appendChild(testEntry);\r\n\t\t}\r\n\t\tsearchMenu.showSearchEntries();\r\n\t}\r\n\r\n\tfunction handleClick(elementId){\r\n\r\n\t\treturn function(){\r\n\t\t\tvar id = elementId;\r\n\t\t\tvar correspondingIds = mergedIdList[id];\r\n\r\n\t\t\t// autoComplete the text for the user\r\n\t\t\tvar autoComStr = entryNames[id];\r\n\t\t\tsearchLineEdit.node().value = autoComStr;\r\n\r\n\t\t\tgraph.resetSearchHighlight();\r\n\t\t\tgraph.highLightNodes(correspondingIds);\r\n            c_locate.node().title=\"Locate search term\";\r\n\t\t\tif (autoComStr !== inputText) {\r\n\t\t\t\thandleAutoCompletion();\r\n\t\t\t}\r\n\t\t\tsearchMenu.hideSearchEntries();\r\n\t\t};\r\n\t}\r\n\r\n\tsearchMenu.clearText=function(){\r\n\t\tsearchLineEdit.node().value=\"\";\r\n        c_locate.classed(\"highlighted\", false);\r\n        c_locate.node().title=\"Nothing to locate, enter search term.\";\r\n\t\tvar htmlCollection = m_search.node().children;\r\n\t\tvar numEntries = htmlCollection.length;\r\n\t\tfor (var i = 0; i < numEntries; i++){\r\n\t\t\thtmlCollection[0].remove();\r\n\t\t}\r\n\t};\r\n\r\n\treturn searchMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/searchMenu.js\n// module id = 329\n// module chunks = 1","/**\r\n * Contains the navigation \"engine\"\r\n *\r\n * @param graph the associated webvowl graph\r\n * @returns {{}}\r\n */\r\nmodule.exports = function (graph) {\r\n\tvar navigationMenu  = {},\r\n        scrollContainer = d3.select(\"#menuElementContainer\").node(),\r\n        menuContainer   = d3.select(\"#menuContainer\").node(),\r\n        leftButton=d3.select(\"#scrollLeftButton\"),\r\n        rightButton=d3.select(\"#scrollRightButton\"),\r\n        scrolLeftValue,\r\n        scrollMax,\r\n        currentlyVisibleMenu,\r\n        currentlyHoveredEntry,\r\n        touchedElement=false,\r\n        t_scrollLeft,\r\n        t_scrollRight,\r\n        c_select=[],\r\n        m_select=[];\r\n\r\n\r\n    function clearAllTimers(){\r\n        cancelAnimationFrame(t_scrollLeft);\r\n        cancelAnimationFrame(t_scrollRight);\r\n    }\r\n\r\n    function timed_scrollRight(){\r\n        scrolLeftValue+=5;\r\n        scrollContainer.scrollLeft=scrolLeftValue;\r\n        navigationMenu.updateScrollButtonVisibility();\r\n        if (scrolLeftValue>=scrollMax){\r\n            clearAllTimers();\r\n            return;\r\n        }\r\n        t_scrollRight=requestAnimationFrame(timed_scrollRight);\r\n\r\n    }\r\n    function timed_scrollLeft(){\r\n        scrolLeftValue-=5;\r\n        scrollContainer.scrollLeft=scrolLeftValue;\r\n        navigationMenu.updateScrollButtonVisibility();\r\n        if (scrolLeftValue<=0){\r\n            clearAllTimers();\r\n            return;\r\n        }\r\n        t_scrollRight=requestAnimationFrame(timed_scrollLeft);\r\n    }\r\n    // collect all menu entries and stuff;\r\n    function setupControlsAndMenus(){\r\n        // HEURISTIC : to match the menus and their controllers we remove the first 2 letters and match\r\n        c_select=[];\r\n        m_select=[];\r\n\r\n        var c_temp=[];\r\n        var m_temp=[];\r\n        var i;\r\n        var controlElements=scrollContainer.children;\r\n        var numEntries = controlElements.length;\r\n\r\n        for ( i = 0; i < numEntries; i++) {\r\n            c_temp.push(controlElements[i].id.slice(2));\r\n        }\r\n\r\n        var menuElements=menuContainer.children;\r\n        numEntries = menuElements.length;\r\n        for ( i = 0; i < numEntries; i++) {\r\n            m_temp.push(menuElements[i].id.slice(2));\r\n        }\r\n\r\n        numEntries=controlElements.length;\r\n        for ( i = 0; i < numEntries; i++) {\r\n            c_select[i]=\"c_\"+c_temp[i];\r\n            if (m_temp.indexOf(c_temp[i])>-1){\r\n                m_select[i]=\"m_\"+c_temp[i];\r\n            } else{\r\n                m_select[i]=undefined;\r\n            }\r\n            // create custom behavior for click, touch, and hover\r\n            d3.select(\"#\"+c_select[i]).on(\"mouseover\",menuElementOnHovered);\r\n            d3.select(\"#\"+c_select[i]).on(\"mouseout\",menuElementOutHovered);\r\n\r\n            d3.select(\"#\"+c_select[i]).on(\"click\",menuElementClicked);\r\n            d3.select(\"#\"+c_select[i]).on(\"touchstart\",menuElementTouched);\r\n\r\n        }\r\n\r\n        // connect to mouseWheel\r\n        d3.select(\"#menuElementContainer\").on(\"wheel\",function() {\r\n            var wheelEvent = d3.event;\r\n            var offset;\r\n            if (wheelEvent.deltaY < 0) offset =  20;\r\n            if (wheelEvent.deltaY > 0) offset = -20;\r\n            scrollContainer.scrollLeft+=offset;\r\n            navigationMenu.hideAllMenus();\r\n            navigationMenu.updateScrollButtonVisibility();\r\n        });\r\n\r\n        // connect scrollIndicator Buttons;\r\n        d3.select(\"#scrollRightButton\").on(\"mousedown\",function(){\r\n            scrolLeftValue=scrollContainer.scrollLeft;\r\n            navigationMenu.hideAllMenus();\r\n            t_scrollRight=requestAnimationFrame(timed_scrollRight);\r\n\r\n        }).on(\"touchstart\",function(){\r\n            scrolLeftValue=scrollContainer.scrollLeft;\r\n            navigationMenu.hideAllMenus();\r\n            t_scrollRight=requestAnimationFrame(timed_scrollRight);\r\n        }).on(\"mouseup\",clearAllTimers)\r\n          .on(\"touchend\",clearAllTimers)\r\n          .on(\"touchcancel\",clearAllTimers);\r\n\r\n        d3.select(\"#scrollLeftButton\").on(\"mousedown\",function(){\r\n            scrolLeftValue=scrollContainer.scrollLeft;\r\n            navigationMenu.hideAllMenus();\r\n            t_scrollLeft=requestAnimationFrame(timed_scrollLeft);\r\n        }).on(\"touchstart\",function(){\r\n            scrolLeftValue=scrollContainer.scrollLeft;\r\n            navigationMenu.hideAllMenus();\r\n            t_scrollLeft=requestAnimationFrame(timed_scrollLeft);\r\n        }).on(\"mouseup\",clearAllTimers)\r\n          .on(\"touchend\",clearAllTimers)\r\n          .on(\"touchcancel\",clearAllTimers);\r\n\r\n        // connect the scroll functionality;\r\n        d3.select(\"#menuElementContainer\").on(\"scroll\",function(){\r\n            navigationMenu.updateScrollButtonVisibility();\r\n            navigationMenu.hideAllMenus();\r\n        });\r\n    }\r\n\r\n    function menuElementOnHovered(){\r\n        navigationMenu.hideAllMenus();\r\n        if  (touchedElement){ return; }\r\n        showSingleMenu( this.id );\r\n    }\r\n\r\n    function menuElementOutHovered(){\r\n        hoveroutedControMenu( this.id );\r\n    }\r\n\r\n    function menuElementClicked() {\r\n        var m_element=m_select[c_select.indexOf(this.id)];\r\n        if (m_element) {\r\n            var menuElement = d3.select(\"#\" + m_element);\r\n            if (menuElement) {\r\n                if (menuElement.style(\"display\") === \"block\") {\r\n                    menuElement.style(\"display\", \"none\");// hide it\r\n                }else {\r\n                    showSingleMenu(this.id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function menuElementTouched(){\r\n        // it sets a flag that we have touched it,\r\n        // since d3. propagates the event for touch as hover and then click, we block the hover event\r\n        touchedElement=true;\r\n    }\r\n\r\n\r\n    function hoveroutedControMenu( controllerID ){\r\n        currentlyHoveredEntry=d3.select(\"#\"+controllerID);\r\n        if (controllerID !== \"c_search\") {\r\n                d3.select(\"#\" + controllerID).select(\"path\").style(\"stroke-width\", \"0\");\r\n                d3.select(\"#\" + controllerID).select(\"path\").style(\"fill\", \"#fff\");\r\n            }\r\n\r\n    }\r\n\r\n    function showSingleMenu( controllerID ){\r\n        currentlyHoveredEntry=d3.select(\"#\"+controllerID).node();\r\n        // get the corresponding menu element for this controller\r\n        var m_element=m_select[c_select.indexOf(controllerID)];\r\n        if (m_element) {\r\n            if (controllerID !== \"c_search\") {\r\n\r\n            d3.select(\"#\" + controllerID).select(\"path\").style(\"stroke-width\", \"0\");\r\n            d3.select(\"#\" + controllerID).select(\"path\").style(\"fill\", \"#bdc3c7\");\r\n        }\r\n            // show it if we have a menu\r\n            currentlyVisibleMenu=d3.select(\"#\"+m_element);\r\n            currentlyVisibleMenu.style(\"display\",\"block\");\r\n            if (m_element===\"m_export\")\r\n                graph.options().exportMenu().exportAsUrl();\r\n            updateMenuPosition();\r\n        }\r\n    }\r\n\r\n    function updateMenuPosition(){\r\n        if (currentlyHoveredEntry) {\r\n            var leftOffset = currentlyHoveredEntry.offsetLeft;\r\n            var scrollOffset = scrollContainer.scrollLeft;\r\n            var totalOffset = leftOffset - scrollOffset;\r\n            var finalOffset = Math.max(0, totalOffset);\r\n            var fullContainer_width = scrollContainer.getBoundingClientRect().width;\r\n            var elementWidth = currentlyVisibleMenu.node().getBoundingClientRect().width;\r\n            // make priority > first check if we are right\r\n            if (finalOffset + elementWidth > fullContainer_width) {\r\n                finalOffset = fullContainer_width - elementWidth;\r\n            }\r\n            // fix priority;\r\n            finalOffset = Math.max(0, finalOffset);\r\n            currentlyVisibleMenu.style(\"left\", finalOffset + \"px\");\r\n\r\n            // // check if outside the viewport\r\n            // var menuWidth=currentlyHoveredEntry.getBoundingClientRect().width;\r\n            // var bt_width=36;\r\n            // if (totalOffset+menuWidth<bt_width || totalOffset+bt_width>fullContainer_width){\r\n            //     navigationMenu.hideAllMenus();\r\n            //     currentlyHoveredEntry=undefined;\r\n            // }\r\n        }\r\n    }\r\n\r\n    navigationMenu.hideAllMenus=function(){\r\n        d3.selectAll(\".toolTipMenu\").style(\"display\",\"none\"); // hiding all menus\r\n    };\r\n\r\n    navigationMenu.updateScrollButtonVisibility=function(){\r\n        scrollMax = scrollContainer.scrollWidth - scrollContainer.clientWidth -2;\r\n        if ( scrollContainer.scrollLeft === 0){\r\n               leftButton.classed(\"hidden\",true);\r\n        }else{ leftButton.classed(\"hidden\",false);}\r\n\r\n        if ( scrollContainer.scrollLeft > scrollMax){\r\n               rightButton.classed(\"hidden\",true);\r\n        }else{ rightButton.classed(\"hidden\",false); }\r\n\r\n    };\r\n\r\n\tnavigationMenu.setup = function () {\r\n        setupControlsAndMenus();\r\n        // make sure that the menu elements follow their controller and also their restrictions\r\n        // some hovering behavior -- lets the menu disappear when hovered in graph or sidebar;\r\n        d3.select(\"#graph\")         .on(\"mouseover\",function(){ navigationMenu.hideAllMenus(); });\r\n        d3.select(\"#generalDetails\").on(\"mouseover\",function(){ navigationMenu.hideAllMenus(); });\r\n    };\r\n\r\n    return navigationMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/navigationMenu.js\n// module id = 330\n// module chunks = 1","/** The zoom Slider **/\r\nmodule.exports = function (graph) {\r\n    var zoomSlider  = {};\r\n    var minMag=graph.options().minMagnification(),\r\n        maxMag=graph.options().maxMagnification(),\r\n        defZoom,\r\n        t_zoomOut,\r\n        t_zoomIn,\r\n        zoomValue,\r\n        showSlider=true,\r\n        w = graph.options().width(),\r\n        h = graph.options().height(),\r\n        slider;\r\n\r\n    defZoom = Math.min(w, h) / 1000;\r\n\r\n    function clearAllTimers() {\r\n        cancelAnimationFrame(t_zoomOut);\r\n        cancelAnimationFrame(t_zoomIn);\r\n    }\r\n\r\n    function timed_zoomOut(){\r\n        zoomValue=0.98*zoomValue;\r\n        // fail saves\r\n        if (zoomValue < minMag) {\r\n            zoomValue = minMag;\r\n        }\r\n        graph.setSliderZoom(zoomValue);\r\n        t_zoomOut=requestAnimationFrame(timed_zoomOut);\r\n    }\r\n\r\n    function timed_zoomIn(){\r\n        zoomValue=1.02*zoomValue;\r\n        // fail saves\r\n        if (zoomValue > maxMag) {\r\n            zoomValue = maxMag;\r\n        }\r\n        graph.setSliderZoom(zoomValue);\r\n        t_zoomIn=requestAnimationFrame(timed_zoomIn);\r\n    }\r\n\r\n    zoomSlider.setup = function () {\r\n        slider= d3.select(\"#zoomSliderParagraph\").append(\"input\")\r\n            .datum({})\r\n            .attr(\"id\",\"zoomSliderElement\")\r\n            .attr(\"type\", \"range\")\r\n            .attr(\"value\", defZoom)\r\n            .attr(\"min\", minMag)\r\n            .attr(\"max\", maxMag)\r\n            .attr(\"step\", (maxMag - minMag) / 40)\r\n            .attr(\"title\",\"zoom factor\")\r\n            .on(\"input\", function(){\r\n            zoomSlider.zooming();});\r\n\r\n        d3.select(\"#zoomOutButton\").on(\"mousedown\",function(){\r\n            graph.options().navigationMenu().hideAllMenus();\r\n            zoomValue=graph.scaleFactor();\r\n            t_zoomOut = requestAnimationFrame(timed_zoomOut);\r\n        })\r\n            .on(\"touchstart\",function(){\r\n                graph.options().navigationMenu().hideAllMenus();\r\n                zoomValue=graph.scaleFactor();\r\n                t_zoomOut = requestAnimationFrame(timed_zoomOut);\r\n            })\r\n            .on(\"mouseup\",clearAllTimers)\r\n            .on(\"touchend\",clearAllTimers)\r\n            .on(\"touchcancel\",clearAllTimers)\r\n            .attr(\"title\",\"zoom out\");\r\n\r\n        d3.select(\"#zoomInButton\").on(\"mousedown\",function(){\r\n            graph.options().navigationMenu().hideAllMenus();\r\n            zoomValue=graph.scaleFactor();\r\n            t_zoomIn = requestAnimationFrame(timed_zoomIn);\r\n          })\r\n            .on(\"touchstart\",function(){\r\n                graph.options().navigationMenu().hideAllMenus();\r\n                zoomValue=graph.scaleFactor();\r\n                t_zoomIn = requestAnimationFrame(timed_zoomIn);\r\n            })\r\n            .on(\"mouseup\",clearAllTimers)\r\n            .on(\"touchend\",clearAllTimers)\r\n            .on(\"touchcancel\",clearAllTimers)\r\n            .attr(\"title\",\"zoom in\");\r\n\r\n        d3.select(\"#centerGraphButton\").on(\"click\",function(){\r\n                graph.options().navigationMenu().hideAllMenus();\r\n                graph.forceRelocationEvent();\r\n        }).attr(\"title\",\"center graph\");\r\n\r\n    };\r\n\r\n    zoomSlider.showSlider=function(val){\r\n        if (!arguments.length) return showSlider;\r\n        d3.select(\"#zoomSlider\").classed(\"hidden\",!val);\r\n        showSlider=val;\r\n    };\r\n\r\n    zoomSlider.zooming=function(){\r\n        graph.options().navigationMenu().hideAllMenus();\r\n        var zoomValue=slider.property(\"value\");\r\n        slider.attr(\"value\", zoomValue);\r\n        graph.setSliderZoom(zoomValue);\r\n    };\r\n\r\n    zoomSlider.updateZoomSliderValue=function(val){\r\n        if(slider){\r\n            slider.attr(\"value\",val);\r\n            slider.property(\"value\",val);\r\n        }\r\n    };\r\n\r\n    return zoomSlider;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/zoomSlider.js\n// module id = 331\n// module chunks = 1","/**\n * Contains the logic for the sidebar.\n * @param graph the graph that belongs to these controls\n * @returns {{}}\n */\nmodule.exports = function (graph) {\n\n\tvar sidebar = {},\n\t\tlanguageTools = webvowl.util.languageTools(),\n\t\telementTools = webvowl.util.elementTools(),\n\t// Required for reloading when the language changes\n\t\tontologyInfo,\n        visibleSidebar=1,\n\t\tlastSelectedElement,\n\n\t    detailArea     = d3.select(\"#detailsArea\"),\n\t    graphArea      = d3.select(\"#canvasArea\"),\n\t    menuArea       = d3.select(\"#swipeBarContainer\"),\n\t    collapseButton = d3.select(\"#sidebarExpandButton\");\n\n\tfunction setupCollapsing() {\n\t\t// adapted version of this example: http://www.normansblog.de/simple-jquery-accordion/\n\t\tfunction collapseContainers(containers) {\n\t\t\tcontainers.classed(\"hidden\", true);\n\t\t}\n\n\t\tfunction expandContainers(containers) {\n\t\t\tcontainers.classed(\"hidden\", false);\n\t\t}\n\n\t\tvar triggers = d3.selectAll(\".accordion-trigger\");\n\n\t\t// Collapse all inactive triggers on startup\n\t\tcollapseContainers(d3.selectAll(\".accordion-trigger:not(.accordion-trigger-active) + div\"));\n\n\t\ttriggers.on(\"click\", function () {\n\t\t\tvar selectedTrigger = d3.select(this),\n\t\t\t\tactiveTriggers = d3.selectAll(\".accordion-trigger-active\");\n\n\t\t\tif (selectedTrigger.classed(\"accordion-trigger-active\")) {\n\t\t\t\t// Collapse the active (which is also the selected) trigger\n\t\t\t\tcollapseContainers(d3.select(selectedTrigger.node().nextElementSibling));\n\t\t\t\tselectedTrigger.classed(\"accordion-trigger-active\", false);\n\t\t\t} else {\n\t\t\t\t// Collapse the other trigger ...\n\t\t\t\tcollapseContainers(d3.selectAll(\".accordion-trigger-active + div\"));\n\t\t\t\tactiveTriggers.classed(\"accordion-trigger-active\", false);\n\t\t\t\t// ... and expand the selected one\n\t\t\t\texpandContainers(d3.select(selectedTrigger.node().nextElementSibling));\n\t\t\t\tselectedTrigger.classed(\"accordion-trigger-active\", true);\n\t\t\t}\n\t\t});\n\t}\n\n\tsidebar.clearOntologyInformation= function(){\n\n\t\td3.select(\"#title\").text(\"No title available\");\n\t\td3.select(\"#about\").attr(\"href\", \"#\").attr(\"target\", \"_blank\").text(\"not given\");\n\t\td3.select(\"#version\").text(\"--\");\n\t\td3.select(\"#authors\").text(\"--\");\n\t\td3.select(\"#description\").text(\"No description available.\");\n\t\tvar container = d3.select(\"#ontology-metadata\");\n\t\tcontainer.selectAll(\"*\").remove();\n\t\td3.select(\"#classCount\")\n\t\t\t.text(\"0\");\n\t\td3.select(\"#objectPropertyCount\")\n\t\t\t.text(\"0\");\n\t\td3.select(\"#datatypePropertyCount\")\n\t\t\t.text(\"0\");\n\t\td3.select(\"#individualCount\")\n\t\t\t.text(\"0\");\n\t\td3.select(\"#nodeCount\")\n\t\t\t.text(\"0\");\n\t\td3.select(\"#edgeCount\")\n\t\t\t.text(\"0\");\n\n\t\t// clear selectedNode info\n\t\tvar isTriggerActive = d3.select(\"#selection-details-trigger\").classed(\"accordion-trigger-active\");\n\t\tif (isTriggerActive){\n\t\t\t// close accordion\n\t\t\td3.select(\"#selection-details-trigger\").node().click();\n\t\t}\n\t\tshowSelectionAdvice();\n\n\t};\n\n\t/**\n\t * Updates the information of the passed ontology.\n\t * @param data the graph data\n\t * @param statistics the statistics module\n\t */\n\tsidebar.updateOntologyInformation = function (data, statistics) {\n\t\tdata = data || {};\n\t\tontologyInfo = data.header || {};\n\n\t\tupdateGraphInformation();\n\t\tdisplayGraphStatistics(undefined, statistics);\n\t\tdisplayMetadata(ontologyInfo.other);\n\n\t\t// Reset the sidebar selection\n\t\tsidebar.updateSelectionInformation(undefined);\n\n\t\tsetLanguages(ontologyInfo.languages);\n\t};\n\n\tfunction setLanguages(languages) {\n\t\tlanguages = languages || [];\n\n\t\t// Put the default and unset label on top of the selection labels\n\t\tlanguages.sort(function (a, b) {\n\t\t\tif (a === webvowl.util.constants().LANG_IRIBASED) {\n\t\t\t\treturn -1;\n\t\t\t} else if (b === webvowl.util.constants().LANG_IRIBASED) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (a === webvowl.util.constants().LANG_UNDEFINED) {\n\t\t\t\treturn -1;\n\t\t\t} else if (b === webvowl.util.constants().LANG_UNDEFINED) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn a.localeCompare(b);\n\t\t});\n\n\t\tvar languageSelection = d3.select(\"#language\")\n\t\t\t.on(\"change\", function () {\n\t\t\t\tgraph.language(d3.event.target.value);\n\t\t\t\tupdateGraphInformation();\n\t\t\t\tsidebar.updateSelectionInformation(lastSelectedElement);\n\t\t\t});\n\n\t\tlanguageSelection.selectAll(\"option\").remove();\n\t\tlanguageSelection.selectAll(\"option\")\n\t\t\t.data(languages)\n\t\t\t.enter().append(\"option\")\n\t\t\t.attr(\"value\", function (d) {\n\t\t\t\treturn d;\n\t\t\t})\n\t\t\t.text(function (d) {\n\t\t\t\treturn d;\n\t\t\t});\n\n\t\tif (!trySelectDefaultLanguage(languageSelection, languages, \"en\")) {\n\t\t\tif (!trySelectDefaultLanguage(languageSelection, languages, webvowl.util.constants().LANG_UNDEFINED)) {\n\t\t\t\ttrySelectDefaultLanguage(languageSelection, languages, webvowl.util.constants().LANG_IRIBASED);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction trySelectDefaultLanguage(selection, languages, language) {\n\t\tvar langIndex = languages.indexOf(language);\n\t\tif (langIndex >= 0) {\n\t\t\tselection.property(\"selectedIndex\", langIndex);\n\t\t\tgraph.language(language);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction updateGraphInformation() {\n\t\tvar title = languageTools.textInLanguage(ontologyInfo.title, graph.language());\n\t\td3.select(\"#title\").text(title || \"No title available\");\n\t\td3.select(\"#about\").attr(\"href\", ontologyInfo.iri).attr(\"target\", \"_blank\").text(ontologyInfo.iri);\n\t\td3.select(\"#version\").text(ontologyInfo.version || \"--\");\n\t\tvar authors = ontologyInfo.author;\n\t\tif (typeof authors === \"string\") {\n\t\t\t// Stay compatible with author info as strings after change in january 2015\n\t\t\td3.select(\"#authors\").text(authors);\n\t\t} else if (authors instanceof Array) {\n\t\t\td3.select(\"#authors\").text(authors.join(\", \"));\n\t\t} else {\n\t\t\td3.select(\"#authors\").text(\"--\");\n\t\t}\n\n\t\tvar description = languageTools.textInLanguage(ontologyInfo.description, graph.language());\n\t\td3.select(\"#description\").text(description || \"No description available.\");\n\t}\n\n\tfunction displayGraphStatistics(deliveredMetrics, statistics) {\n\t\t// Metrics are optional and may be undefined\n\t\tdeliveredMetrics = deliveredMetrics || {};\n\n\t\td3.select(\"#classCount\")\n\t\t\t.text(deliveredMetrics.classCount || statistics.classCount());\n\t\td3.select(\"#objectPropertyCount\")\n\t\t\t.text(deliveredMetrics.objectPropertyCount || statistics.objectPropertyCount());\n\t\td3.select(\"#datatypePropertyCount\")\n\t\t\t.text(deliveredMetrics.datatypePropertyCount || statistics.datatypePropertyCount());\n\t\td3.select(\"#individualCount\")\n\t\t\t.text(deliveredMetrics.totalIndividualCount || statistics.totalIndividualCount());\n\t\td3.select(\"#nodeCount\")\n\t\t\t.text(statistics.nodeCount());\n\t\td3.select(\"#edgeCount\")\n\t\t\t.text(statistics.edgeCount());\n\t}\n\n\tfunction displayMetadata(metadata) {\n\t\tvar container = d3.select(\"#ontology-metadata\");\n\t\tcontainer.selectAll(\"*\").remove();\n\n\t\tlistAnnotations(container, metadata);\n\n\t\tif (container.selectAll(\".annotation\").size() <= 0) {\n\t\t\tcontainer.append(\"p\").text(\"No annotations available.\");\n\t\t}\n\t}\n\n\tfunction listAnnotations(container, annotationObject) {\n\t\tannotationObject = annotationObject || {};  //todo\n\n\t\t// Collect the annotations in an array for simpler processing\n\t\tvar annotations = [];\n\t\tfor (var annotation in annotationObject) {\n\t\t\tif (annotationObject.hasOwnProperty(annotation)) {\n\t\t\t\tannotations.push(annotationObject[annotation][0]);\n\t\t\t}\n\t\t}\n\n\t\tcontainer.selectAll(\".annotation\").remove();\n\t\tcontainer.selectAll(\".annotation\").data(annotations).enter().append(\"p\")\n\t\t\t.classed(\"annotation\", true)\n\t\t\t.classed(\"statisticDetails\", true)\n\t\t\t.text(function (d) {\n\t\t\t\treturn d.identifier + \":\";\n\t\t\t})\n\t\t\t.append(\"span\")\n\t\t\t.each(function (d) {\n\t\t\t\tappendIriLabel(d3.select(this), d.value, d.type === \"iri\" ? d.value : undefined);\n\t\t\t});\n\t}\n\n\t/**\n\t * Update the information of the selected node.\n\t * @param selectedElement the selection or null if nothing is selected\n\t */\n\tsidebar.updateSelectionInformation = function (selectedElement) {\n\t\t// 单个节点的点击事件\n\t\tlastSelectedElement = selectedElement;\n\n\t\t// Click event was prevented when dragging\n\t\tif (d3.event && d3.event.defaultPrevented) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar isTriggerActive = d3.select(\"#selection-details-trigger\").classed(\"accordion-trigger-active\");\n\t\tif (selectedElement && !isTriggerActive) {\n\t\t\td3.select(\"#selection-details-trigger\").node().click();\n\t\t} else if (!selectedElement && isTriggerActive) {\n\t\t\tshowSelectionAdvice();\n\t\t\treturn;\n\t\t}\n\n\t\tif (elementTools.isProperty(selectedElement)) {\n\t\t\tdisplayPropertyInformation(selectedElement);\n\t\t} else if (elementTools.isNode(selectedElement)) {\n\t\t\tdisplayNodeInformation(selectedElement);\n\t\t}\n\t};\n\n\tfunction showSelectionAdvice() {\n\t\tsetSelectionInformationVisibility(false, false, true);\n\t}\n\n\tfunction setSelectionInformationVisibility(showClasses, showProperties, showAdvice) {\n\t\td3.select(\"#classSelectionInformation\").classed(\"hidden\", !showClasses);\n\t\td3.select(\"#propertySelectionInformation\").classed(\"hidden\", !showProperties);\n\t\td3.select(\"#noSelectionInformation\").classed(\"hidden\", !showAdvice);\n\t}\n\n\tfunction displayPropertyInformation(property) {\n\t\tshowPropertyInformations();\n\n\t\tsetIriLabel(d3.select(\"#propname\"), property.labelForCurrentLanguage(), property.iri());\n\t\td3.select(\"#typeProp\").text(property.type());\n\n\t\tif (property.inverse() !== undefined) {\n\t\t\td3.select(\"#inverse\").classed(\"hidden\", false);\n\t\t\tsetIriLabel(d3.select(\"#inverse span\"), property.inverse().labelForCurrentLanguage(), property.inverse().iri());\n\t\t} else {\n\t\t\td3.select(\"#inverse\").classed(\"hidden\", true);\n\t\t}\n\n\t\tvar equivalentIriSpan = d3.select(\"#propEquivUri\");\n\t\tlistNodeArray(equivalentIriSpan, property.equivalents());\n\n\t\tlistNodeArray(d3.select(\"#subproperties\"), property.subproperties());\n\t\tlistNodeArray(d3.select(\"#superproperties\"), property.superproperties());\n\n\t\tif (property.minCardinality() !== undefined) {\n\t\t\td3.select(\"#infoCardinality\").classed(\"hidden\", true);\n\t\t\td3.select(\"#minCardinality\").classed(\"hidden\", false);\n\t\t\td3.select(\"#minCardinality span\").text(property.minCardinality());\n\t\t\td3.select(\"#maxCardinality\").classed(\"hidden\", false);\n\n\t\t\tif (property.maxCardinality() !== undefined) {\n\t\t\t\td3.select(\"#maxCardinality span\").text(property.maxCardinality());\n\t\t\t} else {\n\t\t\t\td3.select(\"#maxCardinality span\").text(\"*\");\n\t\t\t}\n\n\t\t} else if (property.cardinality() !== undefined) {\n\t\t\td3.select(\"#minCardinality\").classed(\"hidden\", true);\n\t\t\td3.select(\"#maxCardinality\").classed(\"hidden\", true);\n\t\t\td3.select(\"#infoCardinality\").classed(\"hidden\", false);\n\t\t\td3.select(\"#infoCardinality span\").text(property.cardinality());\n\t\t} else {\n\t\t\td3.select(\"#infoCardinality\").classed(\"hidden\", true);\n\t\t\td3.select(\"#minCardinality\").classed(\"hidden\", true);\n\t\t\td3.select(\"#maxCardinality\").classed(\"hidden\", true);\n\t\t}\n\n\t\tsetIriLabel(d3.select(\"#domain\"), property.domain().labelForCurrentLanguage(), property.domain().iri());\n\t\tsetIriLabel(d3.select(\"#range\"), property.range().labelForCurrentLanguage(), property.range().iri());\n\n\t\tdisplayAttributes(property.attributes(), d3.select(\"#propAttributes\"));\n\n\t\tsetTextAndVisibility(d3.select(\"#propDescription\"), property.descriptionForCurrentLanguage());\n\t\tsetTextAndVisibility(d3.select(\"#propComment\"), property.commentForCurrentLanguage());\n\n\t\tlistAnnotations(d3.select(\"#propertySelectionInformation\"), property.annotations());\n\t}\n\n\tfunction showPropertyInformations() {\n\t\tsetSelectionInformationVisibility(false, true, false);\n\t}\n\n\tfunction setIriLabel(element, name, iri) {\n\t\tvar parent = d3.select(element.node().parentNode);\n\n\t\tif (name) {\n\t\t\telement.selectAll(\"*\").remove();\n\t\t\tappendIriLabel(element, name, iri);\n\t\t\tparent.classed(\"hidden\", false);\n\t\t} else {\n\t\t\tparent.classed(\"hidden\", true);\n\t\t}\n\t}\n\n\tfunction appendIriLabel(element, name, iri) {\n\t\tvar tag;\n\n\t\tif (iri) {\n\t\t\ttag = element.append(\"a\")\n\t\t\t\t.attr(\"href\", iri)\n\t\t\t\t.attr(\"title\", iri)\n\t\t\t\t.attr(\"target\", \"_blank\");\n\t\t} else {\n\t\t\ttag = element.append(\"span\");\n\t\t}\n\t\ttag.text(name);\n\t}\n\n\tfunction displayAttributes(attributes, textSpan) {\n\t\tvar spanParent = d3.select(textSpan.node().parentNode);\n\n\t\tif (attributes && attributes.length > 0) {\n\t\t\t// Remove redundant redundant attributes for sidebar\n\t\t\tremoveElementFromArray(\"object\", attributes);\n\t\t\tremoveElementFromArray(\"datatype\", attributes);\n\t\t\tremoveElementFromArray(\"rdf\", attributes);\n\t\t}\n\n\t\tif (attributes && attributes.length > 0) {\n\t\t\ttextSpan.text(attributes.join(\", \"));\n\n\t\t\tspanParent.classed(\"hidden\", false);\n\t\t} else {\n\t\t\tspanParent.classed(\"hidden\", true);\n\t\t}\n\t}\n\n\tfunction removeElementFromArray(element, array) {\n\t\tvar index = array.indexOf(element);\n\t\tif (index > -1) {\n\t\t\tarray.splice(index, 1);\n\t\t}\n\t}\n\n\tfunction displayNodeInformation(node) {\n\t\tshowClassInformations();\n\t\td3.select(\"#name\").text(node.labelForCurrentLanguage()).attr(\"title\",node.labelForCurrentLanguage());\n\t\t// 20181113 将 其类型修改成 => 根 册 章 节 知识点 \n\t\t// 20181113 将 其类型修改成 => 根 章 节 知识点 1 2 3 4 去掉了册信息\n\t\tswitch (node.level()){\n\t\t\tcase 1:\n\t\t\t\td3.select(\".mainTitle\").text(\"学科概况\");\n\t\t\t\td3.select(\"#nodeNameTitle\").text(\"学科名称: \");\n\t\t\t\td3.select(\"#typeNode\").text(\"根\");\n\t\t\t\tbreak;\n//\t\t\tcase 2:\n//\t\t\t\td3.select(\".mainTitle\").text(\"教材概况\");\n//\t\t\t\td3.select(\"#nodeNameTitle\").text(\"教材/册: \");\n//\t\t\t\td3.select(\"#typeNode\").text(\"册\");\n//\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\td3.select(\".mainTitle\").text(\"章概况\");\n\t\t\t\td3.select(\"#nodeNameTitle\").text(\"章名称: \");\n\t\t\t\td3.select(\"#typeNode\").text(\"章\");\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\td3.select(\".mainTitle\").text(\"节概况\");\n\t\t\t\td3.select(\"#nodeNameTitle\").text(\"节名称: \");\n\t\t\t\td3.select(\"#typeNode\").text(\"节\");\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\td3.select(\".mainTitle\").text(\"知识点概况\");\n\t\t\t\td3.select(\"#nodeNameTitle\").text(\"知识点名称: \");\n\t\t\t\td3.select(\"#typeNode\").text(\"知识点\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// 单个节点的点击事件\n\t\t// setHtmlAndVisibility(d3.select(\"#nodeComment\"), node.commentForCurrentLanguage());\n\t\tsetHtmlAndVisibility(d3.select(\"#nodeComment\"), node.comment(), node.level());\n\t\t\n\t\t// 绘制饼状图开始\n\t\t// 在 #nodeComment 墨迹节点内append 一个元素, 如果 => 优 良 中 差 四个数值都为0 则圆形不进行绘制\n\t\t// if (d3.select(\"#goodScore\").text() == 0 && d3.select(\"#satisScore\").text() == 0 && d3.select(\"#mediumScore\").text() == 0 && d3.select(\"#badScore\").text() == 0) {\n\t\t// \treturn false;\n\t\t// } else {\n\t\t// \tvar width = 150;\n\t\t// \tvar height =150;\n\t\t// \tvar dataset = [ \n\t\t// \t\tNumber(d3.select(\"#goodScore\").text()), \n\t\t// \t\tNumber(d3.select(\"#satisScore\").text()), \n\t\t// \t\tNumber(d3.select(\"#mediumScore\").text()), \n\t\t// \t\tNumber(d3.select(\"#badScore\").text())\n\t\t// \t];\n\t\t// \tvar svg = d3.select(\"#nodeComment\").attr(\"style\",\"display: block;position: relative;min-height: 420px;\").append(\"svg\")\n\t\t// \t\t\t\t\t\t\t.attr(\"style\",\"width: 180px; min-height:180px !important; position: absolute; bottom: 0; left:0; right:0; margin: 30px auto 0px; text-align: center;\")\n\t\t// \t// 定义饼图\n\t\t// \tvar pie = d3.layout.pie().sort(null);\n\t\t\t\n\t\t// \tvar outerRadius = width / 2;\n\t\t// \tvar innerRadius = width / 1000000;\n\t\t// \tvar arc = d3.svg.arc()\n\t\t// \t\t\t\t\t.innerRadius(innerRadius)\n\t\t// \t\t\t\t\t.outerRadius(outerRadius);\n\t\t// \tvar color = [ \"#54BA78\", \"#5A78C3\", \"#9B6DC3\", \"#FAC842\" ];\n\t\t// \tvar arcs = svg.selectAll(\"g\")\n\t\t// \t\t\t\t\t.data(pie(dataset))\n\t\t// \t\t\t\t\t.enter()\n\t\t// \t\t\t\t\t.append(\"g\")\n\t\t// \t\t\t\t\t.attr(\"transform\",\"translate(\"+outerRadius+\",\"+outerRadius+\")\");\n\t\t// \tarcs.append(\"path\")\n\t\t// \t\t.attr(\"fill\",function(d,i){\n\t\t// \t\t\treturn color[i];\n\t\t// \t\t})\n\t\t// \t\t.attr(\"d\",function(d){\n\t\t// \t\t\treturn arc(d);\n\t\t// \t\t});\n\t\t// \tvar numFlag = 0;\n\t\t// \tarcs.append(\"text\")\n\t\t// \t\t.attr(\"transform\",function(d){\n\t\t// \t\t\treturn \"translate(\" + arc.centroid(d) + \")\";\n\t\t// \t\t})\n\t\t// \t\t.attr(\"text-anchor\",\"middle\")\n\t\t// \t\t.attr(\"style\",\"font-size: 12px; font-style: normal; font-family: 'microsoft yahei'; fill: #ffffff !important;\")\n\t\t// \t\t.text(function(d){\n\t\t// \t\t\tnumFlag ++;\n\t\t// \t\t\tconst dValue = changeTextInside(d,numFlag);\n\t\t// \t\t\tif(numFlag == 5){\n\t\t// \t\t\t\tnumFlag = 0;\n\t\t// \t\t\t}\n\t\t// \t\t\treturn dValue;\n\t\t// \t\t});\n\t\t// \t\t// 绘制饼状图结束\n\t\t// \tlistAnnotations(d3.select(\"#classSelectionInformation\"), node.annotations());\n\t\t// }\n\n\t\t// 20181122 绘制饼状图 => 优良中差信息显示在线外边\n\t\tif (d3.select(\"#goodScore\").text() == 0 && d3.select(\"#satisScore\").text() == 0 && d3.select(\"#mediumScore\").text() == 0 && d3.select(\"#badScore\").text() == 0) {\n\t\t\treturn false;\n\t\t} else { \n\t\t\tvar box = document.getElementById(\"detailsArea\")\n\t\t\tvar contentWidth = box.offsetWidth;\n\t\t\tvar width  = contentWidth - 80;\n\t\t\tvar height = contentWidth - 80;\n\t\t\tvar goodScore = Number(d3.select(\"#goodScore\").text()) == 0 ? \"\" : \"优：\" + d3.select(\"#goodScore\").text() + \"%\";\n\t\t\tvar satisScore = Number(d3.select(\"#satisScore\").text()) == 0 ? \"\" : \"良：\" + d3.select(\"#satisScore\").text() + \"%\";\n\t\t\tvar mediumScore = Number(d3.select(\"#mediumScore\").text()) == 0 ? \"\" : \"中：\" + d3.select(\"#mediumScore\").text() + \"%\";\n\t\t\tvar badScore = Number(d3.select(\"#badScore\").text()) == 0 ? \"\" : \"差：\" + d3.select(\"#badScore\").text() + \"%\";\n\t\t\tvar dataset = [ \n\t\t\t\t[ goodScore, Number(d3.select(\"#goodScore\").text()) ], \n\t\t\t\t[ satisScore, Number(d3.select(\"#satisScore\").text()) ], \n\t\t\t\t[ mediumScore, Number(d3.select(\"#mediumScore\").text()) ], \n\t\t\t\t[ badScore, Number(d3.select(\"#badScore\").text()) ], \n\t\t\t];\n\t\t\tvar svg = d3.select(\"#nodeComment\")\n\t\t\t\t\t.attr(\"style\", \"display: block;position: relative;min-height: \" +(210+contentWidth)+ \"px;\")\n\t\t\t\t\t.append(\"svg\")\n\t\t\t\t\t.attr(\"style\",\"width: \"+(contentWidth-80)+\"px; height:\"+(contentWidth)+\"px !important; position: absolute; bottom: 0; left:0; right:0; margin: 30px auto 0px; text-align: center; overflow: visible;\")\n\n\t\t\t//转换数据, 不按照比例大小进行排序, 默认 \"优良中差\"\n\t\t\tvar pie = d3.layout.pie().sort(null)\n\t\t\t\t.value(function (d) {\n\t\t\t\t\treturn d[1];\n\t\t\t\t});\n\t\t\t//dataset为转换前的数据 piedata为转换后的数据\n\t\t\tvar piedata = pie(dataset);\n\t\t\tvar outerRadius = width / 3;\n\t\t\tvar innerRadius = 0; \n\t\t\tvar arc = d3.svg.arc()\n\t\t\t\t.innerRadius(innerRadius)\n\t\t\t\t.outerRadius(outerRadius);\n\t\t\tvar color = [ \"#54BA78\", \"#5A78C3\", \"#9B6DC3\", \"#FAC842\" ];\n\t\t\tvar arcs = svg.selectAll(\"g\")\n\t\t\t\t.data(piedata)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"transform\", \"translate(\" + (width / 2) + \",\" + (height / 2) + \")\");\n\t\t\tarcs.append(\"path\")\n\t\t\t\t.attr(\"fill\", function (d, i) {\n\t\t\t\t\treturn color[i];\n\t\t\t\t})\n\t\t\t\t.attr(\"d\", function (d) {\n\t\t\t\t\treturn arc(d);\n\t\t\t\t});\n\t\t\t//添加连接弧外文字的直线元素\n\t\t\tarcs.append(\"line\")\n\t\t\t\t.attr(\"stroke\", \"black\")\n\t\t\t\t.attr(\"x1\", function (d) {\n\t\t\t\t\tif (d.value == 0) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn arc.centroid(d)[0] * 2;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"y1\", function (d) {\n\t\t\t\t\tif (d.value == 0) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn arc.centroid(d)[1] * 2;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"x2\", function (d) {\n\t\t\t\t\tif (d.value == 0) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn arc.centroid(d)[0] * 2.2;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"y2\", function (d) {\n\t\t\t\t\tif (d.value == 0) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn arc.centroid(d)[1] * 2.2;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tvar fontsize = 12;\n\t\t\tarcs.append(\"line\")\n\t\t\t\t.style(\"stroke\", \"#979797\")\n\t\t\t\t.each(function (d) {\n\t\t\t\t\tif (d.value !== 0) {\n\t\t\t\t\t\td.textLine = {\n\t\t\t\t\t\t\tx1: 0,\n\t\t\t\t\t\t\ty1: 0,\n\t\t\t\t\t\t\tx2: 0,\n\t\t\t\t\t\t\ty2: 0\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\td.textLine = {\n\t\t\t\t\t\t\tx1: \"\",\n\t\t\t\t\t\t\ty1: \"\",\n\t\t\t\t\t\t\tx2: \"\",\n\t\t\t\t\t\t\ty2: \"\"\n\t\t\t\t\t\t};;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"x1\", function (d) {\n\t\t\t\t\tif (d.value !== 0) {\n\t\t\t\t\t\td.textLine.x1 = arc.centroid(d)[0] * 2.2;\n\t\t\t\t\t}\n\t\t\t\t\treturn d.textLine.x1;\n\t\t\t\t})\n\t\t\t\t.attr(\"y1\", function (d) {\n\t\t\t\t\tif (d.value !== 0) {\n\t\t\t\t\t\td.textLine.y1 = arc.centroid(d)[1] * 2.2;\n\t\t\t\t\t}\n\t\t\t\t\treturn d.textLine.y1;\n\t\t\t\t})\n\t\t\t\t.attr(\"x2\", function (d) {\n\t\t\t\t\tif (d.value !== 0) {\n\t\t\t\t\t\tvar strLen = getPixelLength(d.data[0], fontsize) * 1.5;\n\t\t\t\t\t\tvar bx = arc.centroid(d)[0] * 2.2;\n\t\t\t\t\t\td.textLine.x2 = bx >= 0 ? bx + strLen : bx - strLen;\n\t\t\t\t\t}\n\t\t\t\t\treturn d.textLine.x2;\n\t\t\t\t})\n\t\t\t\t.attr(\"y2\", function (d) {\n\t\t\t\t\tif (d.value !== 0) {\n\t\t\t\t\t\td.textLine.y2 = arc.centroid(d)[1] * 2.2;\n\t\t\t\t\t}\n\t\t\t\t\treturn d.textLine.y2;\n\t\t\t\t});\n\t\t\t//添加弧外的文字元素\n\t\t\tarcs.append(\"text\")\n\t\t\t\t.attr(\"transform\", function (d) {\n\t\t\t\t\tvar x = 0;\n\t\t\t\t\tvar y = 0;\n\t\t\t\t\tx = (d.textLine.x1 + d.textLine.x2) / 2;\n\t\t\t\t\ty = d.textLine.y1;\n\t\t\t\t\ty = y > 0 ? y + fontsize * 1.1 : y - fontsize * 0.4;\n\t\t\t\t\treturn \"translate(\" + x + \",\" + y + \")\";\n\t\t\t\t})\n\t\t\t\t.style(\"text-anchor\", \"middle\")\n\t\t\t\t.style(\"font-size\", fontsize)\n\t\t\t\t.text(function (d) {\n\t\t\t\t\treturn d.data[0];\n\t\t\t\t});\n\t\t\tfunction getPixelLength(str, fontsize) {\n\t\t\t\tvar curLen = 0;\n\t\t\t\tfor (var i = 0; i < str.length; i++) {\n\t\t\t\t\tvar code = str.charCodeAt(i);\n\t\t\t\t\tvar pixelLen = code > 255 ? fontsize : fontsize / 2;\n\t\t\t\t\tcurLen += pixelLen;\n\t\t\t\t}\n\t\t\t\treturn curLen;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// 饼状图 内部 text 文本处理\n\tfunction changeTextInside(d,num){\n\t\tif(d.value == 0){\n\t\t\treturn \"\"\n\t\t}else{\n\t\t\tswitch (num){\n\t\t\t\tcase 1:\n\t\t\t\t\treturn \"优\"\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\treturn \"良\"\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\treturn \"中\"\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\treturn \"差\"\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\treturn \"未知\"\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction showClassInformations() {\n\t\tsetSelectionInformationVisibility(true, false, false);\n\t}\n\n\tfunction listNodeArray(textSpan, nodes) {\n\t\tvar spanParent = d3.select(textSpan.node().parentNode);\n\n\t\tif (nodes && nodes.length) {\n\t\t\ttextSpan.selectAll(\"*\").remove();\n\t\t\tnodes.forEach(function (element, index) {\n\t\t\t\tif (index > 0) {\n\t\t\t\t\ttextSpan.append(\"span\").text(\", \");\n\t\t\t\t}\n\t\t\t\tappendIriLabel(textSpan, element.labelForCurrentLanguage(), element.iri());\n\t\t\t});\n\n\t\t\tspanParent.classed(\"hidden\", false);\n\t\t} else {\n\t\t\tspanParent.classed(\"hidden\", true);\n\t\t}\n\t}\n\n\tfunction setTextAndVisibility(label, value) {\n\t\tvar parentNode = d3.select(label.node().parentNode);\n\t\tvar hasValue = !!value;\n\t\tif (value) {\n\t\t\tlabel.text(value);\n\t\t}\n\t\tparentNode.classed(\"hidden\", !hasValue);\n\t}\n\t\n\t// 添加针对  节点  内部元素 span#nodeComment 内部填充 HTML 格式方法\n\tfunction setHtmlAndVisibility(label, value, level) {\n\t\tvar valueStr = \"\"\n\t\tif (level == 1) {\n\t\t\t// level == 1 => value中为空对象\n\t\t\treturn;\n\t\t} else {\n\t\t\td3.select(\"#nodeDetailTitle\").attr(\"style\", \"clear: both; display: block; \");\n\t\t\t// level == 2 3 4 => value 除了difficulty是多少就是多少 其他字段为百分率%\n\t\t\tvalueStr += \"<p>难度值：\" +value.difficulty+ \"</p>\"\n\t\t\t\t\t\t\t\t+ \"<p>考频值：\" +value.frequency+ \"</p>\"\n\t\t\t\t\t\t\t\t+ \"<p>完成率：\" +(value.compRate*100).toFixed(0)+ \"%</p>\"\n\t\t\t\t\t\t\t\t+ \"<p>优秀率：\" +(value.goods*100).toFixed(0)+ \"%</p>\"\n\t\t\t\t\t\t\t\t+ '<p>优：<span id=\"goodScore\" style=\"color: #333333; font-family: microsoft yahei;\">' +(value.aRate*100).toFixed(0)+ '</span>%<span \t\tstyle=\"display:inline-block; float: right; height: 14px; width: 50px; margin-right: 3em; background: #54BA78;\"></span></p>'\n\t\t\t\t\t\t\t\t+ '<p>良：<span id=\"satisScore\" style=\"color: #333333; font-family: microsoft yahei;\">' +(value.bRate*100).toFixed(0)+ '</span>%<span style=\"display:inline-block; float: right; height: 14px; width: 50px; margin-right: 3em; background: #5A78C3;\"></span></p>'\n\t\t\t\t\t\t\t\t+ '<p>中：<span id=\"mediumScore\" style=\"color: #333333; font-family: microsoft yahei;\">' +(value.cRate*100).toFixed(0)+ '</span>%<span style=\"display:inline-block; float: right; height: 14px; width: 50px; margin-right: 3em; background: #9B6DC3;\"></span></p>'\n\t\t\t\t\t\t\t\t+ '<p>差：<span id=\"badScore\" style=\"color: #333333; font-family: microsoft yahei;\">' +(value.dRate*100).toFixed(0)+ '</span>%<span style=\"display:inline-block; float: right; height: 14px; width: 50px; margin-right: 3em; background: #FAC842;\"></span></p>';\n\t\t\t\n\t\t\tlabel.html(valueStr);\n\t\t}\n\t}\n\n\t/** Collapsible Sidebar functions; **/\n\n    sidebar.showSidebar=function(val,init){\n        // make val to bool\n        if (val===1) {\n            visibleSidebar=true;\n            collapseButton.node().innerHTML=\">\";\n            detailArea.classed(\"hidden\",true);\n            if (init===true) {\n                detailArea.classed(\"hidden\",!visibleSidebar);\n                graphArea.style(\"width\",\"78%\");\n                graphArea.style(\"-webkit-animation-name\",\"none\");\n                 menuArea.style(\"width\",\"78%\");\n                 menuArea.style(\"-webkit-animation-name\",\"none\");\n            } else {\n                graphArea.style(\"width\",\"78%\");\n                graphArea.style(\"-webkit-animation-name\",\"sbCollapseAnimation\");\n                graphArea.style(\"-webkit-animation-duration\",\"0.5s\");\n                 menuArea.style(\"width\",\"78%\");\n                 menuArea.style(\"-webkit-animation-name\",\"sbCollapseAnimation\");\n                 menuArea.style(\"-webkit-animation-duration\",\"0.5s\");\n            }\n            graph.options().width(window.innerWidth - (window.innerWidth * 0.22));\n            graph.options().navigationMenu().updateScrollButtonVisibility();\n        }\n        if (val===0){\n            visibleSidebar=false;\n            detailArea.classed(\"hidden\",true);\n\n            collapseButton.node().innerHTML=\"<\";\n            // adjust the layout\n            if (init===true) {\n                graphArea.style(\"width\",\"100%\");\n                graphArea.style(\"-webkit-animation-name\",\"none\");\n                 menuArea.style(\"width\",\"100%\");\n                 menuArea.style(\"-webkit-animation-name\",\"none\");\n            }else {\n                graphArea.style(\"width\",\"100%\");\n                graphArea.style(\"-webkit-animation-name\",\"sbExpandAnimation\");\n                graphArea.style(\"-webkit-animation-duration\",\"0.5s\");\n\n                 menuArea.style(\"width\",\"100%\");\n                 menuArea.style(\"-webkit-animation-name\",\"sbExpandAnimation\");\n                 menuArea.style(\"-webkit-animation-duration\",\"0.5s\");\n            }\n            graph.options().width(window.innerWidth);\n            graph.updateCanvasContainerSize();\n            graph.options().navigationMenu().updateScrollButtonVisibility();\n        }\n        // finalize steps\n        // graph.updateCanvasContainerSize();\n        // graph.options().navigationMenu().updateScrollButtonVisibility();\n    };\n\n    sidebar.isSidebarVisible=function(){return visibleSidebar;};\n\n    sidebar.updateSideBarVis=function(init){\n        var vis=sidebar.getSidebarVisibility();\n        sidebar.showSidebar(parseInt(vis),init);\n    };\n\n    sidebar.getSidebarVisibility=function(){\n        var isHidden=detailArea.classed(\"hidden\");\n        if (isHidden===false) return String(1);\n        if (isHidden===true) return String(0);\n\t};\n\n    sidebar.initSideBarAnimation=function(){\n        graphArea.node().addEventListener(\"animationend\", function() {\n            detailArea.classed(\"hidden\", !visibleSidebar);\n            // if (visibleSidebar === true){\n             //    graph.options().width(window.innerWidth - (window.innerWidth * 0.22));\n            // }\n            // else{\n             //    graph.options().width(window.innerWidth);\n\t\t\t// }\n            graph.updateCanvasContainerSize();\n            graph.options().navigationMenu().updateScrollButtonVisibility();\n        });\n    };\n\n    sidebar.setup = function () {\n        setupCollapsing();\n        sidebar.initSideBarAnimation();\n\n        collapseButton.on(\"click\",function(){\n            graph.options().navigationMenu().hideAllMenus();\n            var settingValue=parseInt(sidebar.getSidebarVisibility());\n            if (settingValue===1) sidebar.showSidebar(0);\n            else                  sidebar.showSidebar(1);\n        });\n    };\n\n\treturn sidebar;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/sidebar.js\n// module id = 332\n// module chunks = 1","module.exports = function (graph) {\r\n    var configMenu = {},\r\n        checkboxes = [];\r\n\r\n\r\n    configMenu.setup = function () {\r\n        var menuEntry= d3.select(\"#m_modes\");\r\n        menuEntry.on(\"mouseover\",function(){\r\n            var searchMenu=graph.options().searchMenu();\r\n            searchMenu.hideSearchEntries();\r\n        });\r\n        addCheckBox(\"showZoomSlider\",\"缩放控件\",\"#zoomSliderOption\",graph.options().zoomSlider().showSlider,0);\r\n        // addLabelWidthSlider(\"#maxLabelWidthSliderOption\",\"maxLabelWidth\",\"Max label width\", graph.options().maxLabelWidth);\r\n    };\r\n\r\n\r\n    function addLabelWidthSlider(selector, identifier, label, onChangeFunction) {\r\n        var sliderContainer,\r\n            sliderValueLabel;\r\n\r\n        sliderContainer = d3.select(selector)\r\n            .append(\"div\")\r\n            .classed(\"distanceSliderContainer\", true);\r\n\r\n        var slider = sliderContainer.append(\"input\")\r\n            .attr(\"id\", identifier + \"Slider\")\r\n            .attr(\"type\", \"range\")\r\n            .attr(\"min\", 20)\r\n            .attr(\"max\", 600)\r\n            .attr(\"value\", onChangeFunction())\r\n            .attr(\"step\", 10);\r\n        sliderContainer.append(\"label\")\r\n            .classed(\"description\", true)\r\n            .attr(\"for\", identifier + \"Slider\")\r\n            .text(label);\r\n        sliderValueLabel = sliderContainer.append(\"label\")\r\n            .classed(\"value\", true)\r\n            .attr(\"for\", identifier + \"Slider\")\r\n            .text(onChangeFunction());\r\n\r\n        slider.on(\"input\", function () {\r\n            var value = slider.property(\"value\");\r\n            onChangeFunction(value);\r\n            sliderValueLabel.text(value);\r\n            if (graph.options().dynamicLabelWidth()===true)\r\n                graph.animateDynamicLabelWidth();\r\n        });\r\n\r\n        // add wheel event to the slider\r\n        slider.on(\"wheel\",function(){\r\n            var wheelEvent=d3.event;\r\n            var offset;\r\n            if (wheelEvent.deltaY<0) offset=10;\r\n            if (wheelEvent.deltaY>0) offset=-10;\r\n            var oldVal=parseInt(slider.property(\"value\"));\r\n            var newSliderValue=oldVal+offset;\r\n            if (newSliderValue!==oldVal){\r\n                slider.property(\"value\",newSliderValue);\r\n                onChangeFunction(newSliderValue);\r\n                slider.on(\"input\")(); // << set text and update the graphStyles\r\n            }\r\n            d3.event.preventDefault();\r\n        });\r\n    }\r\n\r\n    function addCheckBox(identifier, modeName, selector,onChangeFunc,updateLvl) {\r\n        var configOptionContainer = d3.select(selector)\r\n            .append(\"div\")\r\n            .classed(\"checkboxContainer\", true);\r\n        var configCheckbox = configOptionContainer.append(\"input\")\r\n            .classed(\"moduleCheckbox\", true)\r\n            .attr(\"id\", identifier + \"ConfigCheckbox\")\r\n            .attr(\"type\", \"checkbox\")\r\n            .property(\"checked\", onChangeFunc());\r\n\r\n\r\n        configCheckbox.on(\"click\", function (silent) {\r\n            var isEnabled = configCheckbox.property(\"checked\");\r\n            onChangeFunc(isEnabled);\r\n            if (silent !== true) {\r\n                // updating graph when silent is false or the parameter is not given.\r\n                if (updateLvl===1) {\r\n                    graph.lazyRefresh();\r\n                }\r\n                if (updateLvl===2){\r\n                    graph.update();\r\n                }\r\n            }\r\n\r\n        });\r\n        checkboxes.push(configCheckbox);\r\n        configOptionContainer.append(\"label\")\r\n            .attr(\"for\", identifier + \"ConfigCheckbox\")\r\n            .text(modeName);\r\n    }\r\n\r\n    configMenu.setCheckBoxValue=function(identifier,value){\r\n        for (var i = 0; i < checkboxes.length; i++) {\r\n            var cbdId = checkboxes[i].attr(\"id\");\r\n            if (cbdId === identifier) {\r\n                checkboxes[i].property(\"checked\", value);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    configMenu.getCheckBoxValue = function (id) {\r\n        for (var i = 0; i < checkboxes.length; i++) {\r\n            var cbdId = checkboxes[i].attr(\"id\");\r\n            if (cbdId === id) {\r\n                return checkboxes[i].property(\"checked\");\r\n            }\r\n        }\r\n    };\r\n\r\n    configMenu.updateSettings = function () {\r\n        var silent = true;\r\n        checkboxes.forEach(function (checkbox) {\r\n            checkbox.on(\"click\")(silent);\r\n        });\r\n    };\r\n\r\n    return configMenu;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/menu/configMenu.js\n// module id = 333\n// module chunks = 1","module.exports =  function (graph) {\r\n    /** some constants **/\r\n    var PREDEFINED  = 0,\r\n        FILE_UPLOAD = 1,\r\n        JSON_URL    = 2,\r\n        IRI_URL     = 3;\r\n\r\n    var PROGRESS_BAR_ERROR=0,\r\n        PROGRESS_BAR_BUSY=1,\r\n        PROGRESS_BAR_PERCENT=2,\r\n        progressBarMode=1;\r\n\r\n    var loadingWasSuccessFul=false;\r\n    var missingImportsWarning=false;\r\n    var showLoadingDetails=false;\r\n    var visibilityStatus=true;\r\n\r\n    var DEFAULT_JSON_NAME = \"foaf_one\"; // This file is loaded by default\r\n    var conversion_sessionId;\r\n\r\n    /** variable defs **/\r\n    var loadingModule={},\r\n        menuContainer=d3.select(\"#loading-info\"),\r\n        loadingInfoContainer=d3.select(\"#loadingInfo-container\"),\r\n        detailsButton=d3.select(\"#show-loadingInfo-button\"),\r\n        closeButton= d3.select(\"#loadingIndicator_closeButton\"),\r\n        ontologyMenu,\r\n        ontologyIdentifierFromURL;\r\n\r\n    /** functon defs **/\r\n    loadingModule.checkForScreenSize=function(){\r\n        // checks for window size and adjusts the loading indicator\r\n        var w=graph.options().width(),\r\n        h=graph.options().height();\r\n\r\n        if (w<270){\r\n            d3.select(\"#loading-info\").classed(\"hidden\",true);\r\n        } else {\r\n            // check if it should be visible\r\n            if (visibilityStatus===true){\r\n              d3.select(\"#loading-info\").classed(\"hidden\",false);\r\n            } else{\r\n              d3.select(\"#loading-info\").classed(\"hidden\",true);\r\n            }\r\n        }\r\n        if (h<150) {\r\n            d3.select(\"#loadingInfo_msgBox\").classed(\"hidden\", true);\r\n        }else {\r\n            d3.select(\"#loadingInfo_msgBox\").classed(\"hidden\", false);\r\n        }\r\n        if (h<80) {\r\n            d3.select(\"#progressBarContext\").classed(\"hidden\", true);\r\n            d3.select(\"#layoutLoadingProgressBarContainer\").style(\"height\",\"20px\");\r\n        }else {\r\n            d3.select(\"#progressBarContext\").classed(\"hidden\", false);\r\n            d3.select(\"#layoutLoadingProgressBarContainer\").style(\"height\",\"50px\");\r\n        }\r\n    };\r\n\r\n    loadingModule.getProgressBarMode=function(){\r\n        return progressBarMode;\r\n    };\r\n\r\n    loadingModule.successfullyLoadedOntology=function(){\r\n        return loadingWasSuccessFul;\r\n    };\r\n\r\n    loadingModule.missingImportsWarning=function(){\r\n        return missingImportsWarning;\r\n    };\r\n\r\n    loadingModule.setOntologyMenu=function(m){\r\n        ontologyMenu=m;\r\n    };\r\n\r\n    loadingModule.showErrorDetailsMessage=function(){\r\n        loadingModule.showLoadingIndicator();\r\n        loadingModule.expandDetails();\r\n        d3.select(\"#loadingIndicator_closeButton\").classed(\"hidden\",true);\r\n        loadingModule.scrollDownDetails();\r\n    };\r\n\r\n    loadingModule.showWarningDetailsMessage=function(){\r\n        d3.select(\"#currentLoadingStep\").style(\"color\",\"#ff0\");\r\n        loadingModule.showLoadingIndicator();\r\n        loadingModule.expandDetails();\r\n        d3.select(\"#loadingIndicator_closeButton\").classed(\"hidden\",false);\r\n        loadingModule.scrollDownDetails();\r\n    };\r\n\r\n    loadingModule.scrollDownDetails=function(){\r\n        var scrollingElement=d3.select(\"#loadingInfo-container\").node();\r\n        scrollingElement.scrollTop = scrollingElement.scrollHeight;\r\n    };\r\n\r\n    loadingModule.hideLoadingIndicator=function(){\r\n        d3.select(\"#loading-info\").classed(\"hidden\",true);\r\n        visibilityStatus=false;\r\n    };\r\n\r\n    loadingModule.showLoadingIndicator=function(){\r\n        d3.select(\"#loading-info\").classed(\"hidden\",false);\r\n        visibilityStatus=true;\r\n\r\n    };\r\n\r\n    /** -- SETUP -- **/\r\n    loadingModule.setup=function(){\r\n        // create connections for close and details button;\r\n        loadingInfoContainer.classed(\"hidden\",!showLoadingDetails);\r\n        detailsButton.on(\"click\",function(){\r\n            showLoadingDetails=!showLoadingDetails;\r\n            loadingInfoContainer.classed(\"hidden\",!showLoadingDetails);\r\n            detailsButton.classed(\"accordion-trigger-active\",showLoadingDetails);\r\n        });\r\n\r\n        closeButton.on(\"click\",function(){\r\n            menuContainer.classed(\"hidden\",true);\r\n        });\r\n        loadingModule.setBusyMode();\r\n    };\r\n\r\n    loadingModule.updateSize=function(){\r\n        showLoadingDetails=!(loadingInfoContainer.classed(\"hidden\"));\r\n        loadingInfoContainer.classed(\"hidden\",!showLoadingDetails);\r\n        detailsButton.classed(\"accordion-trigger-active\",showLoadingDetails);\r\n    };\r\n\r\n    loadingModule.getDetailsState=function(){\r\n        return showLoadingDetails;\r\n    };\r\n\r\n    loadingModule.expandDetails=function(){\r\n        showLoadingDetails=true;\r\n        loadingInfoContainer.classed(\"hidden\",!showLoadingDetails);\r\n        detailsButton.classed(\"accordion-trigger-active\",showLoadingDetails);\r\n    };\r\n\r\n    loadingModule.collapseDetails=function(){\r\n        showLoadingDetails=false;\r\n        loadingInfoContainer.classed(\"hidden\",!showLoadingDetails);\r\n        detailsButton.classed(\"accordion-trigger-active\",showLoadingDetails);\r\n    };\r\n\r\n    loadingModule.setBusyMode=function(){\r\n        d3.select(\"#currentLoadingStep\").style(\"color\",\"#fff\");\r\n        d3.select(\"#progressBarValue\").node().innherHTML=\"\";\r\n        d3.select(\"#progressBarValue\").style(\"width\",\"20%\");\r\n        d3.select(\"#progressBarValue\").classed(\"busyProgressBar\",true);\r\n        progressBarMode=PROGRESS_BAR_BUSY;\r\n    };\r\n\r\n    loadingModule.setSuccessful=function(){\r\n        d3.select(\"#currentLoadingStep\").style(\"color\",\"#0f0\");\r\n    };\r\n\r\n    loadingModule.setErrorMode=function(){\r\n        d3.select(\"#currentLoadingStep\").style(\"color\",\"#f00\");\r\n        d3.select(\"#progressBarValue\").style(\"width\",\"0%\");\r\n        d3.select(\"#progressBarValue\").classed(\"busyProgressBar\",false);\r\n        d3.select(\"#progressBarValue\").node().innherHTML=\"\";\r\n        progressBarMode=PROGRESS_BAR_ERROR;\r\n    };\r\n\r\n    loadingModule.setPercentMode=function(){\r\n        d3.select(\"#currentLoadingStep\").style(\"color\",\"#fff\");\r\n        d3.select(\"#progressBarValue\").classed(\"busyProgressBar\",false);\r\n        d3.select(\"#progressBarValue\").node().innherHTML=\"0%\";\r\n        d3.select(\"#progressBarValue\").style(\"width\",\"0%\");\r\n        progressBarMode=PROGRESS_BAR_PERCENT;\r\n    };\r\n\r\n    loadingModule.setPercentValue=function(val){\r\n        d3.select(\"#progressBarValue\").node().innherHTML=val;\r\n    };\r\n\r\n    loadingModule.emptyGraphContentError=function(){\r\n        graph.clearGraphData();\r\n        ontologyMenu.append_message_toLastBulletPoint(\"<span style='color:red;'>failed</span>\");\r\n        ontologyMenu.append_message_toLastBulletPoint(\"<br><span style=\\\"color:red;\\\">Error: Received empty graph</span>\");\r\n        loadingWasSuccessFul=false;\r\n        graph.handleOnLoadingError();\r\n        loadingModule.setErrorMode();\r\n    };\r\n\r\n    loadingModule.isThreadCanceled=function(){\r\n\r\n    };\r\n    /** ------------------ URL Interpreter -------------- **/\r\n    loadingModule.parseUrlAndLoadOntology=function() {\r\n        conversion_sessionId=-10000;\r\n        ontologyMenu.setConversionID(conversion_sessionId);\r\n        ontologyMenu.stopLoadingTimer();\r\n        graph.clearGraphData();\r\n        loadingModule.setBusyMode();\r\n        loadingModule.showLoadingIndicator();\r\n        loadingModule.collapseDetails();\r\n        missingImportsWarning=false;\r\n        d3.select(\"#loadingIndicator_closeButton\").classed(\"hidden\",true);\r\n        ontologyMenu.clearDetailInformation();\r\n\r\n        var urlString = String(location);\r\n        var parameterArray=identifyParameter(urlString);\r\n        ontologyIdentifierFromURL=DEFAULT_JSON_NAME;\r\n        loadGraphOptions(parameterArray); // identifies and loads configuration values\r\n        var loadingMethod= identifyOntologyLoadingMethod(ontologyIdentifierFromURL);\r\n        d3.select(\"#progressBarValue\").node().innerHTML=\" \";\r\n        switch (loadingMethod){\r\n            case 0:\r\n                loadingModule.from_presetOntology(ontologyIdentifierFromURL); break;\r\n            case 1:\r\n                loadingModule.from_FileUpload(ontologyIdentifierFromURL); break;\r\n            case 2:\r\n                loadingModule.from_JSON_URL(ontologyIdentifierFromURL); break;\r\n            case 3:\r\n                loadingModule.from_IRI_URL(ontologyIdentifierFromURL); break;\r\n            default:\r\n                console.log(\"Could not identify loading method , or not IMPLEMENTED YET\");\r\n        }\r\n    };\r\n\r\n    /** ------------------- LOADING --------------------- **/\r\n    // the loading module splits into 3 branches\r\n    // 1] PresetOntology Loading\r\n    // 2] File Upload\r\n    // 3] Load From URL / IRI\r\n\r\n    loadingModule.from_JSON_URL=function(fileName){\r\n        var filename = decodeURIComponent(fileName.slice(\"url=\".length));\r\n        ontologyIdentifierFromURL=filename;\r\n\r\n        var ontologyContent=\"\";\r\n        if (ontologyMenu.cachedOntology(filename)) {\r\n            ontologyMenu.append_bulletPoint(\"Loading already cached ontology: \" + filename);\r\n            ontologyContent = ontologyMenu.cachedOntology(filename);\r\n            loadingWasSuccessFul = true; // cached Ontology should be true;\r\n            parseOntologyContent(ontologyContent);\r\n        }else{\r\n            // involve the o2v conveter;\r\n            ontologyMenu.append_message(\"Retrieving ontology from JSON URL \" + filename);\r\n            requestServerTimeStampForJSON_URL(ontologyMenu.callbackLoad_JSON_FromURL,[\"read?json=\"+filename,filename]);\r\n        }\r\n    };\r\n\r\n    function requestServerTimeStampForJSON_URL(callback,parameter){\r\n        d3.xhr(\"serverTimeStamp\", \"application/text\", function (error, request) {\r\n            if (error){\r\n                // could not get server timestamp -> no connection to owl2vowl\r\n                ontologyMenu.append_bulletPoint(\"Could not establish connection to OWL2VOWL service\");\r\n                fallbackForJSON_URL(callback,parameter);\r\n            }else {\r\n                conversion_sessionId = request.responseText;\r\n                ontologyMenu.setConversionID(conversion_sessionId);\r\n                parameter.push(conversion_sessionId);\r\n                callback(parameter);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    loadingModule.from_IRI_URL=function(fileName){\r\n        // owl2vowl converters the given ontology url and returns json file;\r\n        var filename = decodeURIComponent(fileName.slice(\"iri=\".length));\r\n        ontologyIdentifierFromURL=filename;\r\n\r\n        var ontologyContent=\"\";\r\n        if (ontologyMenu.cachedOntology(filename)) {\r\n            ontologyMenu.append_bulletPoint(\"Loading already cached ontology: \" + filename);\r\n            ontologyContent = ontologyMenu.cachedOntology(filename);\r\n            loadingWasSuccessFul = true; // cached Ontology should be true;\r\n            parseOntologyContent(ontologyContent);\r\n        }else{\r\n            // involve the o2v conveter;\r\n            var encoded=encodeURIComponent(filename);\r\n            ontologyMenu.append_bulletPoint(\"Retrieving ontology from IRI: \" + filename);\r\n            requestServerTimeStampForIRI_Converte(ontologyMenu.callbackLoad_Ontology_FromIRI,[\"convert?iri=\"+encoded,filename]);\r\n        }\r\n    };\r\n\r\n    loadingModule.from_FileUpload=function(fileName){\r\n        loadingModule.setBusyMode();\r\n        var filename = decodeURIComponent(fileName.slice(\"file=\".length));\r\n        ontologyIdentifierFromURL=filename;\r\n        var ontologyContent=\"\";\r\n        if (ontologyMenu.cachedOntology(filename)) {\r\n            ontologyMenu.append_bulletPoint(\"Loading already cached ontology: \" + filename);\r\n            ontologyContent = ontologyMenu.cachedOntology(filename);\r\n            loadingWasSuccessFul = true; // cached Ontology should be true;\r\n            parseOntologyContent(ontologyContent);\r\n\r\n        }else{\r\n            // d3.select(\"#currentLoadingStep\").node().innerHTML=\"Loading ontology from file \"+ filename;\r\n            ontologyMenu.append_bulletPoint(\"Retrieving ontology from file: \"+ filename);\r\n            // get the file\r\n            var selectedFile = d3.select(\"#file-converter-input\").property(\"files\")[0];\r\n            // No selection -> this was triggered by the iri. Unequal names -> reuploading another file\r\n            if (!selectedFile || (filename && (filename !== selectedFile.name))) {\r\n                ontologyMenu.append_message_toLastBulletPoint(\"<br><span style=\\\"color:red;\\\">No cached version of \\\"\" + filename + \"\\\" was found.</span><br>Please reupload the file.\");\r\n                loadingModule.setErrorMode();\r\n                d3.select(\"#progressBarValue\").classed(\"busyProgressBar\",false);\r\n                graph.handleOnLoadingError();\r\n                return;\r\n            } else {\r\n                filename = selectedFile.name;\r\n            }\r\n\r\n\r\n// two options here\r\n//1] Direct Json Upload\r\n            if (filename.match(/\\.json$/)) {\r\n                ontologyMenu.setConversionID(-10000);\r\n                var reader = new FileReader();\r\n                reader.readAsText(selectedFile);\r\n                reader.onload = function () {\r\n                    ontologyContent=reader.result;\r\n                    ontologyIdentifierFromURL=filename;\r\n                    parseOntologyContent(ontologyContent);\r\n                };\r\n            }else{\r\n//2] File Upload to OWL2VOWL Converter\r\n                // 1) check if we can get a timeStamp;\r\n                var parameterArray=[selectedFile,filename];\r\n                requestServerTimeStamp(ontologyMenu.callbackLoadFromOntology,parameterArray);\r\n            }\r\n        }\r\n    };\r\n\r\n    function fallbackForJSON_URL(callback,parameter){\r\n        ontologyMenu.append_message_toLastBulletPoint(\"<br>Trying to convert with other communication protocol.\");\r\n        callback(parameter);\r\n\r\n    }\r\n\r\n    function fallbackConversion(parameter){\r\n        ontologyMenu.append_message_toLastBulletPoint(\"<br>Trying to convert with other communication protocol.\");\r\n        var file=parameter[0];\r\n        var name=parameter[1];\r\n        var formData = new FormData();\r\n        formData.append(\"ontology\" , file);\r\n\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"convert\", true);\r\n        var ontologyContent=\"\";\r\n        xhr.onload = function () {\r\n            if (xhr.status === 200) {\r\n                ontologyContent=xhr.responseText;\r\n                ontologyMenu.setCachedOntology(name,ontologyContent);\r\n                ontologyIdentifierFromURL=name;\r\n                missingImportsWarning=true; // using this variable for warnings\r\n                ontologyMenu.append_message_toLastBulletPoint(\"<br>Success, <span style='color:yellow'>but you are using a deprecated OWL2VOWL service!<span>\");\r\n                parseOntologyContent(ontologyContent);\r\n            }\r\n        };\r\n\r\n        // check what this thing is doing;\r\n        xhr.onreadystatechange = function(){\r\n            if (xhr.readyState===4 && xhr.status===0) {\r\n                ontologyMenu.append_message_toLastBulletPoint(\"<br>Old protocol also failed to establish connection to OWL2VOWL service!\");\r\n                loadingModule.setErrorMode();\r\n                ontologyMenu.append_bulletPoint(\"Failed to load ontology\");\r\n                ontologyMenu.append_message_toLastBulletPoint(\"<br><span style='color:red'>Could not connect to OWL2VOWL service </span>\");\r\n                loadingModule.showErrorDetailsMessage();\r\n            }\r\n        };\r\n        xhr.send(formData);\r\n    }\r\n\r\n    function requestServerTimeStampForIRI_Converte(callback,parameterArray){\r\n        d3.xhr(\"serverTimeStamp\", \"application/text\", function (error, request) {\r\n            loadingModule.setBusyMode();\r\n            if (error){\r\n                // could not get server timestamp -> no connection to owl2vowl\r\n                ontologyMenu.append_bulletPoint(\"Could not establish connection to OWL2VOWL service\");\r\n                loadingModule.setErrorMode();\r\n                ontologyMenu.append_bulletPoint(\"Failed to load ontology\");\r\n                ontologyMenu.append_message_toLastBulletPoint(\"<br><span style='color:red'>Could not connect to OWL2VOWL service </span>\");\r\n                loadingModule.showErrorDetailsMessage();\r\n            }else {\r\n                conversion_sessionId = request.responseText;\r\n                ontologyMenu.setConversionID(conversion_sessionId);\r\n                // update paramater for new communication paradigm\r\n                parameterArray[0]=parameterArray[0]+\"&sessionId=\"+conversion_sessionId;\r\n                parameterArray.push(conversion_sessionId);\r\n                callback(parameterArray);\r\n            }\r\n        });\r\n    }\r\n\r\n    function requestServerTimeStamp(callback,parameterArray){\r\n        d3.xhr(\"serverTimeStamp\", \"application/text\", function (error, request) {\r\n            if (error){\r\n                // could not get server timestamp -> no connection to owl2vowl\r\n                ontologyMenu.append_bulletPoint(\"Could not establish connection to OWL2VOWL service\");\r\n                fallbackConversion(parameterArray); // tries o2v version0.3.4 communication\r\n            }else {\r\n                conversion_sessionId = request.responseText;\r\n                ontologyMenu.setConversionID(conversion_sessionId);\r\n                console.log(\"Request Session ID:\"+ conversion_sessionId);\r\n                callback(parameterArray[0],parameterArray[1],conversion_sessionId);\r\n            }\r\n        });\r\n    }\r\n\r\n    loadingModule.loadFromOWL2VOWL=function(ontoContent,filename){\r\n        loadingWasSuccessFul=false;\r\n\r\n        var old=d3.select(\"#bulletPoint_container\").node().innerHTML;\r\n        if (old.indexOf(\"(with warnings)\")!==-1 ) { missingImportsWarning=true;}\r\n\r\n        if (ontologyMenu.cachedOntology(ontoContent)) {\r\n            ontologyMenu.append_bulletPoint(\"Loading already cached ontology: \" + filename);\r\n            parseOntologyContent(ontoContent);\r\n        }else{ // set parse the ontology content;\r\n            parseOntologyContent(ontoContent);\r\n        }\r\n    };\r\n\r\n    loadingModule.from_presetOntology=function(selectedOntology) {\r\n        ontologyMenu.append_bulletPoint(\"Retrieving ontology: \" + selectedOntology );\r\n        loadPresetOntology(selectedOntology);\r\n    };\r\n\r\n    function loadPresetOntology(ontology){\r\n        // check if already cached in ontology menu?\r\n        loadingWasSuccessFul=false;\r\n        var ontologyContent=\"\";\r\n        if (ontologyMenu.cachedOntology(ontology)){\r\n            ontologyMenu.append_bulletPoint(\"Loading already cached ontology: \"+ ontology);\r\n            ontologyContent=ontologyMenu.cachedOntology(ontology);\r\n            loadingWasSuccessFul=true; // cached Ontology should be true;\r\n            parseOntologyContent(ontologyContent);\r\n        }else {\r\n            // read the file name\r\n            var fileToRead=\"./data/\"+ontology+\".json\";\r\n            // read file\r\n            d3.xhr(fileToRead, \"application/json\", function (error, request) {\r\n                var loadingSuccessful = !error;\r\n                if (loadingSuccessful) {\r\n                    ontologyContent= request.responseText;\r\n                    parseOntologyContent(ontologyContent);\r\n                } else {\r\n                    // some error occurred\r\n                    ontologyMenu.append_bulletPoint(\"Failed to load: \"+ ontology);\r\n                    ontologyMenu.append_message_toLastBulletPoint(\"<span style='color: red'>ERROR STATUS:</span> \"+ error.status);\r\n                    graph.handleOnLoadingError();\r\n                    loadingModule.setErrorMode();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /** -- PARSE JSON CONTENT -- **/\r\n    function parseOntologyContent(content){\r\n        ontologyMenu.append_bulletPoint(\"Reading ontology graph ... \");\r\n        var _loader=ontologyMenu.getLoadingFunction();\r\n        _loader(content,ontologyIdentifierFromURL,\"noAlternativeNameYet\");\r\n    }\r\n\r\n    loadingModule.notValidJsonFile=function(){\r\n        graph.clearGraphData();\r\n        ontologyMenu.append_message_toLastBulletPoint(\"<span style='color:red;'>failed</span>\");\r\n        ontologyMenu.append_message_toLastBulletPoint(\"<br><span style='color:red;'>Error: Received empty graph</span>\");\r\n        loadingWasSuccessFul=false;\r\n        graph.handleOnLoadingError();\r\n\r\n    };\r\n\r\n    loadingModule.validJsonFile=function(){\r\n        ontologyMenu.append_message_toLastBulletPoint(\"done\");\r\n        loadingWasSuccessFul=true;\r\n    };\r\n\r\n\r\n\r\n    /** --- HELPER FUNCTIONS **/\r\n\r\n    function identifyParameter(url){\r\n        var numParameters = (url.match(/#/g) || []).length;\r\n        // create parameters array\r\n        var paramArray = [];\r\n        if (numParameters > 0) {\r\n            var tokens = url.split(\"#\");\r\n            // skip the first token since it is the address of the server\r\n            for (var i = 1; i < tokens.length; i++) {\r\n                if (tokens[i].length === 0) {\r\n                    // this token belongs actually to the last paramArray\r\n                    paramArray[paramArray.length - 1] = paramArray[paramArray.length - 1] + \"#\";\r\n                } else {\r\n                    paramArray.push(tokens[i]);\r\n                }\r\n            }\r\n        }\r\n        return paramArray;\r\n    }\r\n\r\n\r\n    function loadGraphOptions(parameterArray){\r\n        var optString=\"opts=\";\r\n        function loadDefaultConfig(){\r\n            graph.options().setOptionsFromURL(graph.options().defaultConfig());\r\n        }\r\n        function loadCustomConfig(opts){\r\n            // console.log(\"Loading custom config!\");\r\n            // console.log(opts);\r\n            var defObj=graph.options().defaultConfig();\r\n            for (var i=0;i<opts.length;i++){\r\n                var keyVal=opts[i].split('=');\r\n                defObj[keyVal[0]]=keyVal[1];\r\n            }\r\n            graph.options().setOptionsFromURL(defObj);\r\n        }\r\n\r\n        function identifyOptions(paramArray){\r\n            if(paramArray[0].indexOf(optString)>=0){\r\n                // parse the parameters;\r\n                var parameterLength=paramArray[0].length;\r\n                var givenOptionsStr=paramArray[0].substr(5,parameterLength-6);\r\n                var optionsArray=givenOptionsStr.split(';');\r\n                loadCustomConfig(optionsArray);\r\n            }else{\r\n                ontologyIdentifierFromURL=paramArray[0];\r\n                loadDefaultConfig();\r\n            }\r\n        }\r\n\r\n        function identifyOptionsAndOntology(paramArray){\r\n            if(paramArray[0].indexOf(optString)>=0) {\r\n                // parse the parameters;\r\n                var parameterLength = paramArray[0].length;\r\n                var givenOptionsStr = paramArray[0].substr(5, parameterLength - 6);\r\n                var optionsArray = givenOptionsStr.split(';');\r\n                loadCustomConfig(optionsArray);\r\n            }else{\r\n                loadDefaultConfig();\r\n            }\r\n            ontologyIdentifierFromURL=paramArray[1];\r\n        }\r\n\r\n        switch (parameterArray.length){\r\n            case 0: loadDefaultConfig(); break;\r\n            case 1: identifyOptions(parameterArray); break;\r\n            case 2: identifyOptionsAndOntology(parameterArray); break;\r\n            default :\r\n                console.log(\"To many input parameters , loading default config\");\r\n                loadDefaultConfig();\r\n                ontologyIdentifierFromURL=\"ERROR_TO_MANY_INPUT_PARAMETERS\";\r\n        }\r\n    }\r\n\r\n\r\n    function identifyOntologyLoadingMethod(url){\r\n        var iriKey = \"iri=\";\r\n        var urlKey = \"url=\";\r\n        var fileKey = \"file=\";\r\n\r\n        var method=-1;\r\n        if (url.substr(0, fileKey.length) === fileKey) {\r\n            method=FILE_UPLOAD;\r\n        }else if (url.substr(0, urlKey.length) === urlKey){\r\n            method=JSON_URL;\r\n        }else if (url.substr(0, iriKey.length) === iriKey){\r\n            method=IRI_URL;\r\n        }else {\r\n            method=PREDEFINED;\r\n        }\r\n        return method;\r\n    }\r\n\r\n    return loadingModule;\r\n};\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/js/loadingModule.js\n// module id = 334\n// module chunks = 1"],"sourceRoot":""}